/*!
 * Copyright (c) 2013-2023 Panascais ehf
 * Design & Development by the Panascais Website Team <https://panascais.net>
 * Made with <3 and ECMAScript in Atom, Visual Studio Code and SublimeText (https://atom.io, https://code.visualstudio.com, https://www.sublimetext.com)
 * Unauthorized use, copying and distribution of the code is strictly prohibited!
 */
/*! For license information please see commons.js.LICENSE.txt */
(self.webpackChunk_essential_gg_website=self.webpackChunk_essential_gg_website||[]).push([[351],{1935:function(t,e){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.lowercaseEnvironmentNames=e.environmentNames=e.Environment=void 0,function(t){t[t.DEVELOPMENT=0]="DEVELOPMENT",t[t.TESTING=1]="TESTING",t[t.STAGING=2]="STAGING",t[t.INTEGRATION=3]="INTEGRATION",t[t.PREVIEW=4]="PREVIEW",t[t.PRODUCTION=5]="PRODUCTION"}(r=e.Environment||(e.Environment={})),e.environmentNames=Object.keys(r).map((function(t){return r[t]})).filter((function(t){return"string"==typeof t})),e.lowercaseEnvironmentNames=e.environmentNames.map((function(t){return t.toLowerCase()}))},1123:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISO_DATE_REGEX=e.UUID_REGEX=e.URL_REGEX=e.LINK_REGEX=e.EMAIL_REGEX=e.BASE64_REGEX=e.ALPHA_NUMERIC_FULL_REGEX=e.ALPHA_NUMERIC_EXTENDED_REGEX=e.ALPHA_NUMERIC_REGEX=void 0,e.ALPHA_NUMERIC_REGEX=/^[\dA-Za-z]+$/,e.ALPHA_NUMERIC_EXTENDED_REGEX=/\w+$/,e.ALPHA_NUMERIC_FULL_REGEX=/^[\w.\u007F-\u00FF-]+$/,e.BASE64_REGEX=/^([\d+/A-Za-z]{4})*(([\d+/A-Za-z]{2}==)|([\d+/A-Za-z]{3}=))?$/,e.EMAIL_REGEX=/^((([a-z]|\d|[!#$%&'*+/=?^_`{|}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+/=?^_`{|}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((")(((([\u0009 ])*(\u000D\u000A))?([\u0009 ])+)?(([\u0001-\u0008\u000B\u000C\u000E-\u001F\u007F]|!|[\u0023-\u005B]|[\u005D-\u007E]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\u0001-\u0009\u000B-\u007F]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*((([\u0009 ])*(\u000D\u000A))?([\u0009 ])+)?(")))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,e.LINK_REGEX=new RegExp("^(?:(?:https?)://)(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),e.URL_REGEX=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[01])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4])|(?:[\da-z\u00A1-\uFFFF]-*)*[\da-z\u00A1-\uFFFF]+(?:\.(?:[\da-z\u00A1-\uFFFF]-*)*[\da-z\u00A1-\uFFFF]+)*\.[a-z\u00A1-\uFFFF]{2,})(?::\d{2,5})?(?:\/\S*)?$/i,e.UUID_REGEX=/^[\da-f]{8}-[\da-f]{4}-[1-5][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,e.ISO_DATE_REGEX=/^(\d{4}-[01]\d-[0-3]\dT[0-2](?:\d:[0-5]){2}\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2](?:\d:[0-5]){2}\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/},7884:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUppercase=e.isLowercase=e.isUuid=e.isFloat=e.isInteger=e.isBase64=e.isIsoDate=e.isAlphaNumericFull=e.isAlphaNumericExtended=e.isAlphaNumeric=e.isEmail=e.isLink=e.isUrl=e.isArrayBuffer=e.isUint32Array=e.isUint16Array=e.isUint8Array=e.isInt32Array=e.isInt16Array=e.isInt8Array=e.isObject=e.isDate=e.isMap=e.isSet=e.isInfinity=e.isNegativeInfinity=e.isPositiveInfinity=e.isArray=e.isNaN=e.isBoolean=e.isBigInt=e.isNumber=e.isString=e.isFalse=e.isTrue=e.isNotOptional=e.isOptional=e.isNotNull=e.isNull=e.isNotNil=e.isNil=void 0;var n=r(1123),i=r(3320);e.isNil=function(t){return null==t},e.isNotNil=function(t){return null!=t},e.isNull=function(t){return null==t},e.isNotNull=function(t){return null!=t},e.isOptional=function(t){return void 0===t},e.isNotOptional=function(t){return void 0!==t},e.isTrue=function(t){return!0===t},e.isFalse=function(t){return!1===t},e.isString=function(t){return(0,e.isNotNil)(t)&&"string"===(0,i.type)(t)},e.isNumber=function(t){return(0,e.isNotNil)(t)&&"number"===(0,i.type)(t)},e.isBigInt=function(t){return(0,e.isNotNil)(t)&&"bigint"===(0,i.type)(t)},e.isBoolean=function(t){return(0,e.isNotNil)(t)&&"boolean"===(0,i.type)(t)},e.isNaN=function(t){return(0,e.isNotNil)(t)&&"not-a-number"===(0,i.type)(t)},e.isArray=function(t){return(0,e.isNotNil)(t)&&Array.isArray(t)},e.isPositiveInfinity=function(t){return(0,e.isNotNil)(t)&&"positive-infinity"===(0,i.type)(t)},e.isNegativeInfinity=function(t){return(0,e.isNotNil)(t)&&"negative-infinity"===(0,i.type)(t)},e.isInfinity=function(t){return(0,e.isPositiveInfinity)(t)||(0,e.isNegativeInfinity)(t)},e.isSet=function(t){return(0,e.isNotNil)(t)&&"set"===(0,i.type)(t)},e.isMap=function(t){return(0,e.isNotNil)(t)&&"map"===(0,i.type)(t)},e.isDate=function(t){return(0,e.isNotNil)(t)&&"date"===(0,i.type)(t)},e.isObject=function(t){return(0,e.isNotNil)(t)&&"object"===(0,i.type)(t)},e.isInt8Array=function(t){return(0,e.isNotNil)(t)&&"int8-array"===(0,i.type)(t)},e.isInt16Array=function(t){return(0,e.isNotNil)(t)&&"int16-array"===(0,i.type)(t)},e.isInt32Array=function(t){return(0,e.isNotNil)(t)&&"int32-array"===(0,i.type)(t)},e.isUint8Array=function(t){return(0,e.isNotNil)(t)&&"uint8-array"===(0,i.type)(t)},e.isUint16Array=function(t){return(0,e.isNotNil)(t)&&"uint16-array"===(0,i.type)(t)},e.isUint32Array=function(t){return(0,e.isNotNil)(t)&&"uint32-array"===(0,i.type)(t)},e.isArrayBuffer=function(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)},e.isUrl=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.URL_REGEX.test(t)},e.isLink=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.LINK_REGEX.test(t)},e.isEmail=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.EMAIL_REGEX.test(t)},e.isAlphaNumeric=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.ALPHA_NUMERIC_REGEX.test(t)},e.isAlphaNumericExtended=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.ALPHA_NUMERIC_EXTENDED_REGEX.test(t)},e.isAlphaNumericFull=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.ALPHA_NUMERIC_FULL_REGEX.test(t)},e.isIsoDate=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.ISO_DATE_REGEX.test(t)},e.isBase64=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.BASE64_REGEX.test(t)},e.isInteger=function(t){return(0,e.isNotNil)(t)&&(0,e.isNumber)(t)&&t%1==0},e.isFloat=function(t){return(0,e.isNotNil)(t)&&(0,e.isNumber)(t)&&t%1!=0},e.isUuid=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&n.UUID_REGEX.test(t)},e.isLowercase=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&t.toLowerCase()===t},e.isUppercase=function(t){return(0,e.isNotNil)(t)&&(0,e.isString)(t)&&t.toUpperCase()===t}},3320:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.type=void 0,e.type=function(t){var e,r;if(t instanceof Map)return"map";if(t instanceof Set)return"set";if(t instanceof Int8Array)return"int8-array";if(t instanceof Int16Array)return"int16-array";if(t instanceof Int32Array)return"int32-array";if(t instanceof Uint8Array)return"uint8-array";if(t instanceof Uint16Array)return"uint16-array";if(t instanceof Uint32Array)return"uint32-array";if(Number.isNaN(t))return"not-a-number";if(t===Number.POSITIVE_INFINITY)return"positive-infinity";if(t===Number.NEGATIVE_INFINITY)return"negative-infinity";var n=Object.prototype.toString.call(t);return null===(e=/\s([A-Za-z]+)/.exec(n))||void 0===e||null===(r=e[1])||void 0===r?void 0:r.toLowerCase()}},269:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Operators=e.Degree=e.Pixel=e.Unitless=e.Translate3D=e.Filter=e.Transform=void 0,e.Transform=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotateZ","rotate"],e.Filter=["blur","hue-rotate","brightness"],e.Translate3D=["translateX","translateY","translateZ"],e.Unitless=["opacity"],e.Pixel=["perspective","border-radius","blur","translateX","translateY","translateZ"],e.Degree=["hue-rotate","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],e.Operators={add:!0,divide:!0,multiply:!0,power:!0,subtract:!0,ceil:!1,floor:!1,round:!1,random:!1,min:!1,max:!1,sqrt:!1,sin:!1,cos:!1,tan:!1,asin:!1,acos:!1,atan:!1,sinh:!1,cosh:!1,tanh:!1,asinh:!1,acosh:!1,atanh:!1,comparison:!1,concatenate:!1,conditional:!1,factorial:!1,logical:!1,remainder:!1,log:!1,ln:!1,lg:!1,log10:!1,abs:!1,trunc:!1,exp:!1,length:!1,in:!1,assignment:!1,fndef:!1,cbrt:!1,expm1:!1,log1p:!1,sign:!1,log2:!1}},1619:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Driver=void 0;var n=r(4705);e.Driver={cursorX:function(){return n.Animation.data.cursorX=window.innerWidth/2,document.addEventListener("mousemove",(function(t){var e;n.Animation.data.cursorX=null!==(e=t.clientX)&&void 0!==e?e:window.innerWidth/2})),function(){return n.Animation.data.cursorX}},cursorY:function(){return n.Animation.data.cursorY=window.innerHeight/2,document.addEventListener("mousemove",(function(t){var e;n.Animation.data.cursorY=null!==(e=t.clientY)&&void 0!==e?e:window.innerHeight/2})),function(){return n.Animation.data.cursorY}},scrollX:function(){return function(){return window.scrollX}},scrollY:function(){return function(){return window.scrollY}},screenX:function(){return function(){return window.innerWidth}},screenY:function(){return function(){return window.innerHeight}}}},8223:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0,e.Easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeOutBounce:function(t){var e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375},easeInBounce:function(t){return 1-e.Easing.easeOutBounce(1-t)},easeOutBack:function(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)},easeInBack:function(t){return 2.70158*t*t*t-1.70158*t*t}}},4705:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(i)?i:String(i)),n)}var i}function d(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var p=r(3161),g=r(8593),v=r(8223),m=r(269),y=r(7224),b=r(8248),E=r(215),T=r(8079),w=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.inertiaEnabled,a=void 0!==i&&i,o=n.frameStep,s=void 0===o?1:o;f(this,t),this.name="",this.lastValue=0,this.frameStep=1,this.m1=0,this.m2=0,this.inertia=0,this.inertiaEnabled=!1,this.name=e,this.getValueFn=r,this.inertiaEnabled=a,this.frameStep=s,this.lastValue=this.getValueFn(0)}return d(t,[{key:"getValue",value:function(t){var e=this.lastValue;if(t%this.frameStep==0&&(e=this.getValueFn(t)),this.inertiaEnabled){var r=e-this.lastValue,n=.8;this.m1=this.m1*n+r*(1-n),this.m2=this.m2*n+this.m1*(1-n),this.inertia=Math.round(5e3*this.m2)/15e3}return this.lastValue=e,[this.lastValue,this.inertia]}}]),t}(),S=function(t){a(r,t);var e=s(r);function r(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return f(this,r),(n=e.call(this)).element=t,n.data=a,n.index=i,n.on("locked",(function(){g.Logger.debug("locked")})),n.on("unlocked",(function(){g.Logger.debug("unlocked")})),n}return d(r,[{key:"calculate",value:function(){var t=this,e=this.element.getBoundingClientRect(),r=n(this.data,2),i=r[0],a=r[1];this.value=b.parseValue(b.getResponsiveValues(i),e,this.index);var o=b.getResponsiveValues(a);this.callback=function(e){t.lock(),o(t.element,e)}}},{key:"run",value:function(t){this.value&&this.callback&&(!this.isLocked()&&t>this.value?this.callback(t):t<this.value&&this.unlock())}}]),r}(T.Lockable),A=function(t){a(r,t);var e=s(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=s.styles,l=void 0===u?{}:u;return f(this,r),(a=e.call(this)).triggers={},a.parsedTransforms={},a.styles={},a.index=0,a.element=t,a.transforms=i,a.index=o,a.styles=l,Object.entries(a.transforms).forEach((function(t){var e=n(t,2),r=e[0],i=e[1];i.triggers&&(a.triggers[r]=i.triggers.map((function(t){return new S(a.element,a.index,t)}))),delete a.transforms[r].triggers})),Object.entries(a.styles).forEach((function(e){var r=n(e,2),i=r[0],a=r[1];t.style.setProperty(i,a)})),a.calculateTransforms(),a}return d(r,[{key:"update",value:function(t,e){for(var r,i=this,a={},o=function(){var o=u[s],l=i.parsedTransforms[o];if(!t[o])return g.Logger.error("No animation driver with name: ",o),"continue";var c=n(t[o],2),f=c[0],h=c[1];null===(r=i.triggers[o])||void 0===r||r.forEach((function(t){t.run(f)}));for(var d=0,p=Object.keys(l);d<p.length;d++){var y=p[d];if("triggers"!==y){var E=l[y];if(!E)return{v:void 0};var T=n(E,3),w=T[0],S=T[1],A=T[2],_=void 0===A?{}:A,k=_.modValue,L=_.frameStep,R=void 0===L?1:L,x=_.easing,C=_.inertia,I=_.inertiaMode,D=_.cssFn,P=_.cssUnit,O=void 0===P?"":P,M=v.Easing[x];if(e%R==0){var F=k?f%k:f,N=b.interpolate(w,S,F,M);if(C){var U=h*C;"absolute"===I&&(U=Math.abs(U)),N+=U}var B="px"==(O||m.Pixel.includes(y)?"px":m.Degree.includes(y)?"deg":"")?0:3;a[y]=D?D(N,i.element):N.toFixed(B)+O}}}},s=0,u=Object.keys(this.parsedTransforms);s<u.length;s++){var l=o();if("continue"!==l&&"object"===c(l))return l.v}this.applyStyles(a),this.emit("update",{values:t,element:this.element})}},{key:"calculateTransforms",value:function(){var t,e=this;this.parsedTransforms={};for(var r=function(){var r=a[i],o={raw:e.transforms[r],parsed:{}},s=o.raw.presets;(void 0===s?[]:s).forEach((function(t){var e=n(t.split(":"),3),r=e[0],i=e[1],a=e[2],s=y.Presets[r];s?Object.entries(s(i,a)).forEach((function(t){var e=n(t,2),r=e[0],i=e[1];o.raw[r]=i})):g.Logger.error("Lax preset cannot be found with name: ",r)})),delete o.raw.presets,null===(t=e.triggers[r])||void 0===t||t.forEach((function(t){t.calculate()}));for(var u=function(){var t=c[l],r=e.element.getBoundingClientRect(),i=n(o.raw[t],3),a=i[0],s=void 0===a?[-1e9,1e9]:a,u=i[1],f=void 0===u?[-1e9,1e9]:u,h=i[2],d=void 0===h?{}:h;o.parsed[t]=[b.getResponsiveValues(s).map((function(t){return b.parseValue(t,r,e.index)})),b.getResponsiveValues(f).map((function(t){return b.parseValue(t,r,e.index)})),d]},l=0,c=Object.keys(o.raw);l<c.length;l++)u();e.parsedTransforms[r]=o.parsed},i=0,a=Object.keys(this.transforms);i<a.length;i++)r()}},{key:"applyStyles",value:function(t){var e=this;Object.entries(b.flattenStyles(t)).forEach((function(t){var r=n(t,2),i=r[0],a=r[1];e.element.style.setProperty(i,a)}))}}]),r}(E.EventEmitter),_=function(){function t(){f(this,t)}return d(t,[{key:"parserOptions",value:function(e){t.pParser=new p.Parser({operators:Object.assign(Object.assign({},m.Operators),e)})}}],[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.enabled=!0,e&&(t.debug={frameStart:0,frameLengths:[]}),t.setDimensions(),window.requestAnimationFrame((function(){return t.loop()})),window.addEventListener("resize",(function(){return t.onResize()}))}},{key:"stop",value:function(){t.enabled=!1,delete t.debug,window.removeEventListener("resize",(function(){return t.onResize()}))}},{key:"addDriver",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.drivers.push(new w(e,r,n))}},{key:"removeDriver",value:function(e){t.drivers=t.drivers.filter((function(t){return t.name!==e}))}},{key:"addElements",value:function(e,r,n){var i;"string"==typeof e&&(e=Array.from(document.querySelectorAll(e)));var a=[];return e.forEach((function(t,e){a.push(new A(t,r,e,n))})),(i=t.elements).push.apply(i,a),a}},{key:"addElement",value:function(e,r,n){var i;if(!(i="string"==typeof e?document.querySelector(e):e))throw new Error("addElement() - no element found");return t.addElements([i],r,n)[0]}},{key:"removeElements",value:function(e){"string"==typeof e&&(e=Array.from(document.querySelectorAll(e))),t.elements=t.elements.filter((function(t){return!e.includes(t.element)}))}},{key:"removeElement",value:function(e){var r;"string"==typeof e&&(r=document.querySelector(e)),r&&(t.elements=t.elements.filter((function(t){return t.element!==e})))}},{key:"loop",value:function(){if(t.enabled){t.debug&&(t.debug.frameStart=Date.now());var e={};if(t.drivers.forEach((function(r){e[r.name]=r.getValue(t.frame)})),t.elements.forEach((function(r){r.update(e,t.frame)})),t.debug&&(t.debug.frameLengths.push(Date.now()-t.debug.frameStart),t.frame%60==0)){var r=Math.ceil(t.debug.frameLengths.reduce((function(t,e){return t+e}),0)/60);g.Logger.debug("Average frame calculation time: ".concat(r,"ms")),t.debug.frameLengths=[]}t.frame++,window.requestAnimationFrame((function(){return t.loop()}))}}},{key:"onResize",value:function(){document.body.clientWidth===t.dimension.width&&document.body.clientHeight===t.dimension.height||(t.setDimensions(),t.elements.forEach((function(t){return t.calculateTransforms()})))}},{key:"setDimensions",value:function(){t.pDimension={width:document.body.clientWidth,height:document.body.clientHeight}}},{key:"dimension",get:function(){return t.pDimension}},{key:"parser",get:function(){return t.pParser}}]),t}();e.Animation=_,_.data={},_.enabled=!1,_.pParser=new p.Parser({operators:m.Operators}),_.drivers=[],_.elements=[],_.frame=0,_.pDimension={width:0,height:0}},7224:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Presets=void 0;var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return["elInY+elHeight","elCenterY-".concat(t),"elCenterY","elCenterY+".concat(t),"elOutY-elHeight"]};e.Presets={fadeInOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{opacity:[r(t),[e,1,1,1,e]]}},fadeIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{opacity:[["elInY+elHeight",t],[e,1]]}},fadeOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{opacity:[[t,"elOutY-elHeight"],[1,e]]}},blurInOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return{blur:[r(t),[e,0,0,0,e]]}},blurIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return{blur:[["elInY+elHeight",t],[e,0]]}},blurOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return{opacity:[[t,"elOutY-elHeight"],[0,e]]}},scaleInOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;return{scale:[r(t),[e,1,1,1,e]]}},scaleIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;return{scale:[["elInY+elHeight",t],[e,1]]}},scaleOut:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elCenterY",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;return{scale:[[t,"elOutY-elHeight"],[1,e]]}},slideX:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return{translateX:[["elInY",t],[0,e]]}},slideY:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return{translateY:[["elInY",t],[0,e]]}},spin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360;return{rotate:[[0,t],[0,e],{modValue:t}]}},flipX:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360;return{rotateX:[[0,t],[0,e],{modValue:t}]}},flipY:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360;return{rotateY:[[0,t],[0,e],{modValue:t}]}},jiggle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return{skewX:[[0,1*t,2*t,3*t,4*t],[0,e,0,-e,0],{modValue:4*t}]}},seesaw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return{skewY:[[0,1*t,2*t,3*t,4*t],[0,e,0,-e,0],{modValue:4*t}]}},zigzag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return{translateX:[[0,1*t,2*t,3*t,4*t],[0,e,0,-e,0],{modValue:4*t}]}},hueRotate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360;return{"hue-rotate":[[0,t],[0,e],{modValue:t}]}}}},8248:function(t,e,r){"use strict";function n(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.parseValue=e.getScrollPosition=e.flattenStyles=e.interpolate=e.invlerp=e.lerp=e.getResponsiveValues=void 0;var a=r(4705),o=r(269);e.getResponsiveValues=function(t){if(Array.isArray(t)||"string"==typeof t||"number"==typeof t||"function"==typeof t)return t;var e,r=Object.keys(t).map((function(t){return parseInt(t,10)})).sort((function(t,e){return t>e?1:-1})),i=r[r.length-1],o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))){r&&(t=r);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}(r);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(a.Animation.dimension.width<s){i=s;break}}}catch(t){o.e(t)}finally{o.f()}return t[i]},e.lerp=function(t,e,r){return t*(1-r)+e*r},e.invlerp=function(t,e,r){return(r-t)/(e-t)},e.interpolate=function(t,r,n,i){var a=0;if(t.forEach((function(t){t<n&&a++})),a<=0)return r[0];if(a>=t.length)return r[t.length-1];var o=a-1,s=e.invlerp(t[o],t[a],n);return e.lerp(r[o],r[a],i?i(s):s)},e.flattenStyles=function(t){var e={transform:"",filter:""},r={translateX:1e-5,translateY:1e-5,translateZ:1e-5};return Object.keys(t).forEach((function(n){var i=t[n],a=o.Pixel.includes(n)?"px":o.Degree.includes(n)?"deg":"";o.Translate3D.includes(n)?r[n]=i:o.Transform.includes(n)?e.transform+="".concat(n,"(").concat(i).concat(a,") "):o.Filter.includes(n)?e.filter+="".concat(n,"(").concat(i).concat(a,") "):e[n]="".concat(i).concat(a," ")})),e.transform="translate3d(".concat(r.translateX,"px, ").concat(r.translateY,"px, ").concat(r.translateZ,"px) ").concat(e.transform),e},e.getScrollPosition=function(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||""),r=t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft;return[t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop,r]},e.parseValue=function(t,r,i){var o=r.width,s=r.height,u=r.x,l=r.y;if("number"==typeof t)return t;var c,h=document.body.scrollHeight,d=document.body.scrollWidth,p=window.innerWidth,g=window.innerHeight,v=(2,function(t){if(Array.isArray(t))return t}(c=e.getScrollPosition())||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{for(a=(r=r.call(t)).next,0;!(u=(n=a.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(c)||n(c,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=v[0],y=u+v[1],b=y+o,E=l+m,T=E+s;return a.Animation.parser.evaluate(t,{screenWidth:p,screenHeight:g,pageHeight:h,pageWidth:d,elWidth:o,elHeight:s,elInY:E-g,elOutY:T,elCenterY:E+s/2-g/2,elInX:y-p,elOutX:b,elCenterX:y+o/2-p/2,index:i})}},7534:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(a)?a:String(a)),i)}var a}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Accordion=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,n,l,c=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(l){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function f(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.querySelectorAll("accordion-frame");return i(this,f),(t=c.call(this,!1)).elements=e,t.elements.forEach((function(e){var r;null===(r=e.querySelector("accordion-header"))||void 0===r||r.addEventListener("click",(function(){e.hasAttribute("active")?t.hide(e):t.show(e)}))})),t}return e=f,(r=[{key:"show",value:function(t){t.hasAttribute("active")||(this.activate(),document.querySelectorAll("accordion-group").forEach((function(e){e!==t&&e.contains(t)&&e.querySelectorAll("accordion-frame").forEach((function(t){t.removeAttribute("active")}))})),t.setAttribute("active",""))}},{key:"hide",value:function(t){this.deactivate(),t.removeAttribute("active")}}])&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(r(3276).Toggleable);e.Accordion=l},215:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;var a=r(6008),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.emitter=new a.EventEmitter}var e,r;return e=t,(r=[{key:"on",value:function(t,e){this.emitter.on(t,e)}},{key:"off",value:function(t,e){this.emitter.off(t,e)}},{key:"once",value:function(t,e){this.emitter.once(t,e)}},{key:"emit",value:function(t,e){this.emitter.emit(t,e)}}])&&function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(a)?a:String(a)),i)}var a}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.EventEmitter=o},8079:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(a)?a:String(a)),i)}var a}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Lockable=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,n,l,c=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(l){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function f(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i(this,f),(t=c.call(this)).state=e,t}return e=f,(r=[{key:"lock",value:function(){this.state||(this.state=!0,this.emit("lock",void 0))}},{key:"unlock",value:function(){this.state&&(this.state=!1,this.emit("unlock",void 0))}},{key:"toggle",value:function(){this.state?this.unlock():this.lock()}},{key:"isLocked",value:function(){return this.state}}])&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(r(215).EventEmitter);e.Lockable=l},8593:function(t,e){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===r(a)?a:String(a)),i)}var a}Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var a=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));e.Logger=a,a.error=console.error,a.warn=console.warn,a.info=console.info,a.debug=console.debug},3276:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(a)?a:String(a)),i)}var a}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function o(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Toggleable=void 0;var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,t);var e,r,n,u,l=(n=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(u){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return o(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=l.call(this)).state=t||!1,e}return e=c,(r=[{key:"activate",value:function(){this.state||(this.state=!0,this.emit("activated",void 0))}},{key:"deactivate",value:function(){this.state&&(this.state=!1,this.emit("deactivated",void 0))}},{key:"toggle",value:function(){this.state?this.deactivate():this.activate(),this.emit("toggled",void 0)}},{key:"isActive",value:function(){return this.state}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(r(215).EventEmitter);e.Toggleable=u},6879:function(t,e,r){"use strict";t.exports=r(2669)},2669:function(t){"use strict";var e=function t(e){e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domains=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.timeout=e.timeout||t.DEFAULT_TIMEOUT,this.maxPending=e.maxPending||t.DEFAULT_MAX_PENDING};e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if("function"!=typeof e)throw new Error("You must pass a function to execute");var i=null,a=null,o=null;"function"!=typeof r&&(n=r,r=null,o=new this.Promise((function(t,e){i=t,a=e}))),n=n||{};var s=!1,u=null,l=this,c=function(e,n,u){e&&(0===l.queues[t].length&&delete l.queues[t],delete l.domains[t]),s||(o?n?a(n):i(u):"function"==typeof r&&r(n,u),s=!0),e&&l.queues[t]&&l.queues[t].length>0&&l.queues[t].shift()()},f=function(r){if(s)return c(r);if(u&&(clearTimeout(u),u=null),r&&(l.domains[t]=process.domain),1===e.length){var n=!1;e((function(t,e){n||(n=!0,c(r,t,e))}))}else l._promiseTry((function(){return e()})).then((function(t){c(r,void 0,t)}),(function(t){c(r,t)}))};if(process.domain&&(f=process.domain.bind(f)),l.queues[t])if(l.domainReentrant&&process.domain&&process.domain===l.domains[t])f(!1);else if(l.queues[t].length>=l.maxPending)c(!1,new Error("Too much pending tasks"));else{var h=function(){f(!0)};n.skipQueue?l.queues[t].unshift(h):l.queues[t].push(h);var d=n.timeout||l.timeout;d&&(u=setTimeout((function(){u=null,c(!1,new Error("async-lock timed out"))}),d))}else l.queues[t]=[],f(!0);return o||void 0},e.prototype._acquireBatch=function(t,e,r,n){"function"!=typeof r&&(n=r,r=null);var i=this,a=e;if(t.reverse().forEach((function(t){a=function(t,e){return function(r){i.acquire(t,e,r,n)}}(t,a)})),"function"!=typeof r)return new this.Promise((function(t,e){1===a.length?a((function(r,n){r?e(r):t(n)})):t(a())}));a(r)},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(t){return this.Promise.reject(t)}},t.exports=e},6008:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r,n="object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,a),n(r)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}v(t,e,a,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+e(t))}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,a,o,s;if(u(r),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),void 0===o)o=a[e]=r,++t._eventsCount;else if("function"==typeof o?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=l(t))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function v(t,r,n,i){if("function"==typeof t.on)i.once?t.once(r,n):t.on(r,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+e(t));t.addEventListener(r,(function e(a){i.once&&t.removeEventListener(r,e),n(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=a[t];if(void 0===u)return!1;if("function"==typeof u)i(u,this,e);else{var l=u.length,c=g(u,l);for(r=0;r<l;++r)i(c[r],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,a,o;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},2567:function(t,e,r){var n,i;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}!function o(s){var u;u=function(){"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function e(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e,r){return d=h()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&f(i,r.prototype),i},d.apply(null,arguments)}function p(t){var e="function"==typeof Map?new Map:void 0;return p=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return d(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)},p(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}var b={exports:{}};!function(t,e){var r,n,i,a,o;r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,f=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(f)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o}(b);var E=b.exports,T=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},w=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t}({}),S=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),A=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({}),_=function(){},k={trace:_,debug:_,log:_,warn:_,info:_,error:_},L=k;function R(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):_}function x(t,e){if(self.console&&!0===t||"object"===a(t)){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(e){L[e]=t[e]?t[e].bind(t):R(e)}))}(t,"debug","log","info","warn","error");try{L.log('Debug logs enabled for "'+e+'" in hls.js version 1.4.4')}catch(t){L=k}}else L=k}var C=L,I=/^(\d+)x(\d+)$/,D=/(.+?)=(".*?"|.*?)(?:,|$)/g,P=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&("X-"===r.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(r)),this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=I.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(D.lastIndex=0;null!==(e=D.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[e[1].trim()]=n}return r},t}();function O(t){return"SCTE35-OUT"===t||"SCTE35-IN"===t}var M=function(){function t(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){var r=e.attr;for(var n in r)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]!==r[n]){C.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+t.ID+'"'),this._badValueForSameId=n;break}t=u(new P({}),r,t)}if(this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){var i=new Date(this.attr["END-DATE"]);T(i.getTime())&&(this._endDate=i)}}return n(t,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var t=this.attr.decimalFloatingPoint("DURATION");if(T(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&T(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),t}(),F=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},N="audio",U="video",B="audiovideo",j=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[N]=null,e[U]=null,e[B]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),n=[];1===r.length?n[0]=e?e.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},n(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=E.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),G=function(t){function e(e,r){var n;return(n=t.call(this,r)||this)._decryptdata=null,n.rawProgramDateTime=null,n.programDateTime=null,n.tagList=[],n.duration=0,n.sn=0,n.levelkeys=void 0,n.type=void 0,n.loader=null,n.keyLoader=null,n.level=-1,n.cc=0,n.startPTS=void 0,n.endPTS=void 0,n.startDTS=void 0,n.endDTS=void 0,n.start=0,n.deltaPTS=void 0,n.maxStartPTS=void 0,n.minEndPTS=void 0,n.stats=new F,n.urlId=0,n.data=void 0,n.bitrateTest=!1,n.title=null,n.initSegment=null,n.endList=void 0,n.gap=void 0,n.type=e,n}l(e,t);var r=e.prototype;return r.setKeyFormat=function(t){if(this.levelkeys){var e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}},r.abortRequests=function(){var t,e;null==(t=this.loader)||t.abort(),null==(e=this.keyLoader)||e.abort()},r.setElementaryStreamInfo=function(t,e,r,n,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[t];s?(s.startPTS=Math.min(s.startPTS,e),s.endPTS=Math.max(s.endPTS,r),s.startDTS=Math.min(s.startDTS,n),s.endDTS=Math.max(s.endDTS,i)):o[t]={startPTS:e,endPTS:r,startDTS:n,endDTS:i,partial:a}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[N]=null,t[U]=null,t[B]=null},n(e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{var e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!T(this.programDateTime))return null;var t=T(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;if(null!=(t=this._decryptdata)&&t.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),r=e.length;if(r>1||1===r&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),e}(j),H=function(t){function e(e,r,n,i,a){var o;(o=t.call(this,n)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new F,o.duration=e.decimalFloatingPoint("DURATION"),o.gap=e.bool("GAP"),o.independent=e.bool("INDEPENDENT"),o.relurl=e.enumeratedString("URI"),o.fragment=r,o.index=i;var s=e.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return l(e,t),n(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(j),K=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},n(t,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&T(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),t}();function V(t){return Uint8Array.from(atob(t),(function(t){return t.charCodeAt(0)}))}function q(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(function(t){return t.charCodeAt(0)}))}var z={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},W="org.w3.clearkey",Y="com.apple.streamingkeydelivery",X="com.microsoft.playready",$="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Q(t){switch(t){case Y:return z.FAIRPLAY;case X:return z.PLAYREADY;case $:return z.WIDEVINE;case W:return z.CLEARKEY}}var Z="edef8ba979d64acea3c827dcd51d21ed";function J(t){switch(t){case z.FAIRPLAY:return Y;case z.PLAYREADY:return X;case z.WIDEVINE:return $;case z.CLEARKEY:return W}}function tt(t){var e=t.drmSystems,r=t.widevineLicenseUrl,n=e?[z.FAIRPLAY,z.WIDEVINE,z.PLAYREADY,z.CLEARKEY].filter((function(t){return!!e[t]})):[];return!n[z.WIDEVINE]&&r&&n.push(z.WIDEVINE),n}var et="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function rt(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}var nt,it=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},at=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},ot=function(t,e){for(var r=e,n=0;it(t,e);)n+=10,n+=st(t,e+6),at(t,e+10)&&(n+=10),e+=n;if(n>0)return t.subarray(r,r+n)},st=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},ut=function(t,e){return it(t,e)&&st(t,e+6)+10<=t.length-e},lt=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},ct=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=st(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},ft=function(t){for(var e=0,r=[];it(t,e);){for(var n=st(t,e+6),i=(e+=10)+n;e+8<i;){var a=ct(t.subarray(e)),o=ht(a);o&&r.push(o),e+=a.size+10}at(t,e)&&(e+=10)}return r},ht=function(t){return"PRIV"===t.type?dt(t):"W"===t.type[0]?gt(t):pt(t)},dt=function(t){if(!(t.size<2)){var e=mt(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},pt=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=mt(t.data.subarray(e),!0);e+=r.length+1;var n=mt(t.data.subarray(e));return{key:t.type,info:r,data:n}}var i=mt(t.data.subarray(1));return{key:t.type,data:i}}},gt=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=mt(t.data.subarray(e),!0);e+=r.length+1;var n=mt(t.data.subarray(e));return{key:t.type,info:r,data:n}}var i=mt(t.data);return{key:t.type,data:i}},vt=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},mt=function(t,e){void 0===e&&(e=!1);var r=(nt||void 0===self.TextDecoder||(nt=new self.TextDecoder("utf-8")),nt);if(r){var n=r.decode(t);if(e){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}for(var a,o,s,u=t.length,l="",c=0;c<u;){if(0===(a=t[c++])&&e)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:o=t[c++],l+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=t[c++],s=t[c++],l+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return l};var bt=function(t){for(var e="",r=0;r<t.length;r++){var n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e},Et=Math.pow(2,32)-1,Tt=[].push,wt={video:1,audio:2,id3:3,text:4};function St(t){return String.fromCharCode.apply(null,t)}function At(t,e){var r=t[e]<<8|t[e+1];return r<0?65536+r:r}function _t(t,e){var r=kt(t,e);return r<0?4294967296+r:r}function kt(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Lt(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function Rt(t,e){var r=[];if(!e.length)return r;for(var n=t.byteLength,i=0;i<n;){var a=_t(t,i),o=a>1?i+a:n;if(St(t.subarray(i+4,i+8))===e[0])if(1===e.length)r.push(t.subarray(i+8,o));else{var s=Rt(t.subarray(i+8,o),e.slice(1));s.length&&Tt.apply(r,s)}i=o}return r}function xt(t){var e=[],r=t[0],n=8,i=_t(t,n);n+=4,n+=0===r?8:16,n+=2;var a=t.length+0,o=At(t,n);n+=2;for(var s=0;s<o;s++){var u=n,l=_t(t,u);u+=4;var c=2147483647&l;if(1==(2147483648&l)>>>31)return C.warn("SIDX has hierarchical references (not supported)"),null;var f=_t(t,u);u+=4,e.push({referenceSize:c,subsegmentDuration:f,info:{duration:f/i,start:a,end:a+c-1}}),a+=c,n=u+=4}return{earliestPresentationTime:0,timescale:i,version:r,referencesCount:o,references:e}}function Ct(t){for(var e=[],r=Rt(t,["moov","trak"]),n=0;n<r.length;n++){var i=r[n],a=Rt(i,["tkhd"])[0];if(a){var o=a[0],s=0===o?12:20,u=_t(a,s),l=Rt(i,["mdia","mdhd"])[0];if(l){var c=_t(l,s=0===(o=l[0])?12:20),f=Rt(i,["mdia","hdlr"])[0];if(f){var h=St(f.subarray(8,12)),d={soun:N,vide:U}[h];if(d){var p=Rt(i,["mdia","minf","stbl","stsd"])[0],g=void 0;p&&(g=St(p.subarray(12,16))),e[u]={timescale:c,type:d},e[d]={timescale:c,id:u,codec:g}}}}}}return Rt(t,["moov","mvex","trex"]).forEach((function(t){var r=_t(t,4),n=e[r];n&&(n.default={duration:_t(t,12),flags:_t(t,20)})})),e}function It(t){var e=Rt(t,["schm"])[0];if(e){var r=St(e.subarray(4,8));if("cbcs"===r||"cenc"===r)return Rt(t,["schi","tenc"])[0]}return C.error("[eme] missing 'schm' box"),null}function Dt(t){var e=_t(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var n=0,i=_t(t,4),a=0;a<i;a++)256&e&&(n+=_t(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return n}function Pt(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Ot(t,e){var r=[],n=e.samples,i=e.timescale,a=e.id,o=!1;return Rt(n,["moof"]).map((function(s){var u=s.byteOffset-8;Rt(s,["traf"]).map((function(s){var l=Rt(s,["tfdt"]).map((function(t){var e=t[0],r=_t(t,4);return 1===e&&(r*=Math.pow(2,32),r+=_t(t,8)),r/i}))[0];return void 0!==l&&(t=l),Rt(s,["tfhd"]).map((function(l){var c=_t(l,4),f=16777215&_t(l,0),h=0,d=0!=(16&f),p=0,g=0!=(32&f),v=8;c===a&&(0!=(1&f)&&(v+=8),0!=(2&f)&&(v+=4),0!=(8&f)&&(h=_t(l,v),v+=4),d&&(p=_t(l,v),v+=4),g&&(v+=4),"video"===e.type&&(o=function(t){if(!t)return!1;var e=t.indexOf("."),r=e<0?t:t.substring(0,e);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(e.codec)),Rt(s,["trun"]).map((function(a){var s=a[0],l=16777215&_t(a,0),c=0!=(1&l),f=0,d=0!=(4&l),g=0!=(256&l),v=0,m=0!=(512&l),y=0,b=0!=(1024&l),E=0!=(2048&l),T=0,w=_t(a,4),S=8;c&&(f=_t(a,S),S+=4),d&&(S+=4);for(var A=f+u,_=0;_<w;_++){if(g?(v=_t(a,S),S+=4):v=h,m?(y=_t(a,S),S+=4):y=p,b&&(S+=4),E&&(T=0===s?_t(a,S):kt(a,S),S+=4),e.type===U)for(var k=0;k<y;){var L=_t(n,A);Mt(o,n[A+=4])&&Ft(n.subarray(A,A+L),o?2:1,t+T/i,r),A+=L,k+=L+4}t+=v/i}})))}))}))})),r}function Mt(t,e){if(t){var r=e>>1&63;return 39===r||40===r}return 6==(31&e)}function Ft(t,e,r,n){var i=Nt(t),a=0;a+=e;for(var o=0,s=0,u=!1,l=0;a<i.length;){o=0;do{if(a>=i.length)break;o+=l=i[a++]}while(255===l);s=0;do{if(a>=i.length)break;s+=l=i[a++]}while(255===l);var c=i.length-a;if(!u&&4===o&&a<i.length){if(u=!0,181===i[a++]){var f=At(i,a);if(a+=2,49===f){var h=_t(i,a);if(a+=4,1195456820===h){var d=i[a++];if(3===d){var p=i[a++],g=64&p,v=g?2+3*(31&p):0,m=new Uint8Array(v);if(g){m[0]=p;for(var y=1;y<v;y++)m[y]=i[a++]}n.push({type:d,payloadType:o,pts:r,bytes:m})}}}}}else if(5===o&&s<c){if(u=!0,s>16){for(var b=[],E=0;E<16;E++){var T=i[a++].toString(16);b.push(1==T.length?"0"+T:T),3!==E&&5!==E&&7!==E&&9!==E||b.push("-")}for(var w=s-16,S=new Uint8Array(w),A=0;A<w;A++)S[A]=i[a++];n.push({payloadType:o,pts:r,uuid:b.join(""),userData:mt(S),userDataBytes:S})}}else if(s<c)a+=s;else if(s>c)break}}function Nt(t){for(var e=t.byteLength,r=[],n=1;n<e-2;)0===t[n]&&0===t[n+1]&&3===t[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return t;var i=e-r.length,a=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=t[o];return a}var Ut={},Bt=function(){function t(t,e,r,n,i){void 0===n&&(n=[1]),void 0===i&&(i=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=r,this.keyFormatVersions=n,this.iv=i,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}t.clearKeyUriToKeyIdMap=function(){Ut={}};var e=t.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Y:case $:case X:case W:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||C.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var r=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}(e);return new t(this.method,this.uri,"identity",this.keyFormatVersions,r)}var n=function(t){var e,r,n=t.split(":"),i=null;if("data"===n[0]&&2===n.length){var a=n[1].split(";"),o=a[a.length-1].split(",");if(2===o.length){var s="base64"===o[0],u=o[1];s?(a.splice(-1,1),i=V(u)):(e=q(u).subarray(0,16),(r=new Uint8Array(16)).set(e,16-e.length),i=r)}}return i}(this.uri);if(n)switch(this.keyFormat){case $:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case X:var i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(t,e,r){if(16!==t.byteLength)throw new RangeError("Invalid system id");var n,i,a;n=0,i=new Uint8Array,n>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;var u=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(u.buffer).setUint32(0,r.byteLength,!1),function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var i=r.length,a=8,o=i;o--;)a+=r[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(t,4),o=0,a=8;o<i;o++)s.set(r[o],a),a+=r[o].byteLength;return s}([112,115,115,104],new Uint8Array([n,0,0,0]),t,a,i,u,r||new Uint8Array)}(i,null,n);var a=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),o=String.fromCharCode.apply(null,Array.from(a)),s=o.substring(o.indexOf("<"),o.length),u=(new DOMParser).parseFromString(s,"text/xml").getElementsByTagName("KID")[0];if(u){var l=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(l){var c=V(l).subarray(0,16);!function(t){var e=function(t,e,r){var n=t[e];t[e]=t[r],t[r]=n};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}(c),this.keyId=c}}break;default:var f=n.subarray(0,16);if(16!==f.length){var h=new Uint8Array(16);h.set(f,16-f.length),f=h}this.keyId=f}if(!this.keyId||16!==this.keyId.byteLength){var d=Ut[this.uri];if(!d){var p=Object.keys(Ut).length%Number.MAX_SAFE_INTEGER;d=new Uint8Array(16),new DataView(d.buffer,12,4).setUint32(0,p),Ut[this.uri]=d}this.keyId=d}return this},t}(),jt=/\{\$([a-zA-Z0-9-_]+)\}/g;function Gt(t){return jt.test(t)}function Ht(t,e,r){if(null!==t.variableList||t.hasVariableRefs)for(var n=r.length;n--;){var i=r[n],a=e[i];a&&(e[i]=Kt(t,a))}}function Kt(t,e){if(null!==t.variableList||t.hasVariableRefs){var r=t.variableList;return e.replace(jt,(function(e){var n=e.substring(2,e.length-1),i=null==r?void 0:r[n];return void 0===i?(t.playlistParsingError||(t.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+n+'"')),e):i}))}return e}function Vt(t,e,r){var n,i,a=t.variableList;if(a||(t.variableList=a={}),"QUERYPARAM"in e){n=e.QUERYPARAM;try{var o=new self.URL(r).searchParams;if(!o.has(n))throw new Error('"'+n+'" does not match any query parameter in URI: "'+r+'"');i=o.get(n)}catch(e){t.playlistParsingError||(t.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+e.message))}}else n=e.NAME,i=e.VALUE;n in a?t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+n+'"')):a[n]=i||""}function qt(t,e,r){var n=e.IMPORT;if(r&&n in r){var i=t.variableList;i||(t.variableList=i={}),i[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+n+'"'))}function zt(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var Wt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Yt=zt();function Xt(t,e){var r;return null!=(r=null==Yt?void 0:Yt.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"'))&&r}var $t=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Qt=/#EXT-X-MEDIA:(.*)/g,Zt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Jt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),te=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),ee=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.id===e)return n}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return(r+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).slice(-4)}return t},t.resolve=function(t,e){return E.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.isMediaPlaylist=function(t){return Zt.test(t)},t.parseMasterPlaylist=function(e,r){var n,i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Gt(e)},a=[];for($t.lastIndex=0;null!=(n=$t.exec(e));)if(n[1]){var o,s=new P(n[1]);Ht(i,s,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var u=Kt(i,n[2]),l={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:t.resolve(u,r)},c=s.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),ie((s.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),null!=(o=l.unknownCodecs)&&o.length||a.push(l),i.levels.push(l)}else if(n[3]){var f=n[3],h=n[4];switch(f){case"SESSION-DATA":var d=new P(h);Ht(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);var p=d["DATA-ID"];p&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[p]=d);break;case"SESSION-KEY":var g=re(h,r,i);g.encrypted&&g.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(g)):C.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+h+'"');break;case"DEFINE":var v=new P(h);Ht(i,v,["NAME","VALUE","QUERYPARAM"]),Vt(i,v,r);break;case"CONTENT-STEERING":var m=new P(h);Ht(i,m,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:t.resolve(m["SERVER-URI"],r),pathwayId:m["PATHWAY-ID"]||"."};break;case"START":i.startTimeOffset=ne(h)}}var y=a.length>0&&a.length<i.levels.length;return i.levels=y?a:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i},t.parseMasterPlaylistMedia=function(e,r,n){var i,a={},o=n.levels,s={AUDIO:o.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),SUBTITLES:o.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),"CLOSED-CAPTIONS":[]},u=0;for(Qt.lastIndex=0;null!==(i=Qt.exec(e));){var l=new P(i[1]),c=l.TYPE;if(c){var f=s[c],h=a[c]||[];a[c]=h,Ht(n,l,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var d={attrs:l,bitrate:0,id:u++,groupId:l["GROUP-ID"]||"",instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:c,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(null!=f&&f.length){var p=t.findGroup(f,d.groupId)||f[0];ae(d,p,"audioCodec"),ae(d,p,"textCodec")}h.push(d)}}return a},t.parseLevelPlaylist=function(t,e,r,n,i,a){var o,s,l,c=new K(e),f=c.fragments,h=null,d=0,p=0,g=0,v=0,m=null,y=new G(n,e),b=-1,E=!1;for(Jt.lastIndex=0,c.m3u8=t,c.hasVariableRefs=Gt(t);null!==(o=Jt.exec(t));){E&&(E=!1,(y=new G(n,e)).start=g,y.sn=d,y.cc=v,y.level=r,h&&(y.initSegment=h,y.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null));var w=o[1];if(w){y.duration=parseFloat(w);var S=(" "+o[2]).slice(1);y.title=S||null,y.tagList.push(S?["INF",w,S]:["INF",w])}else if(o[3]){if(T(y.duration)){y.start=g,l&&ue(y,l,c),y.sn=d,y.level=r,y.cc=v,y.urlId=i,f.push(y);var A=(" "+o[3]).slice(1);y.relurl=Kt(c,A),oe(y,m),m=y,g+=y.duration,d++,p=0,E=!0}}else if(o[4]){var _=(" "+o[4]).slice(1);m?y.setByteRange(_,m):y.setByteRange(_)}else if(o[5])y.rawProgramDateTime=(" "+o[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===b&&(b=f.length);else{if(!(o=o[0].match(te))){C.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<o.length&&void 0===o[s];s++);var k=(" "+o[s]).slice(1),L=(" "+o[s+1]).slice(1),R=o[s+2]?(" "+o[s+2]).slice(1):"";switch(k){case"PLAYLIST-TYPE":c.type=L.toUpperCase();break;case"MEDIA-SEQUENCE":d=c.startSN=parseInt(L);break;case"SKIP":var x=new P(L);Ht(c,x,["RECENTLY-REMOVED-DATERANGES"]);var I=x.decimalInteger("SKIPPED-SEGMENTS");if(T(I)){c.skippedSegments=I;for(var D=I;D--;)f.unshift(null);d+=I}var O=x.enumeratedString("RECENTLY-REMOVED-DATERANGES");O&&(c.recentlyRemovedDateranges=O.split("\t"));break;case"TARGETDURATION":c.targetduration=Math.max(parseInt(L),1);break;case"VERSION":c.version=parseInt(L);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"#":(L||R)&&y.tagList.push(R?[L,R]:[L]);break;case"DISCONTINUITY":v++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([k]);break;case"BITRATE":y.tagList.push([k,L]);break;case"DATERANGE":var F=new P(L);Ht(c,F,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Ht(c,F,F.clientAttrs);var N=new M(F,c.dateRanges[F.ID]);N.isValid||c.skippedSegments?c.dateRanges[N.id]=N:C.warn('Ignoring invalid DATERANGE tag: "'+L+'"'),y.tagList.push(["EXT-X-DATERANGE",L]);break;case"DEFINE":var U=new P(L);Ht(c,U,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in U?qt(c,U,a):Vt(c,U,e);break;case"DISCONTINUITY-SEQUENCE":v=parseInt(L);break;case"KEY":var B=re(L,e,c);if(B.isSupported()){if("NONE"===B.method){l=void 0;break}l||(l={}),l[B.keyFormat]&&(l=u({},l)),l[B.keyFormat]=B}else C.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+L+'"');break;case"START":c.startTimeOffset=ne(L);break;case"MAP":var j=new P(L);if(Ht(c,j,["BYTERANGE","URI"]),y.duration){var V=new G(n,e);se(V,j,r,l),h=V,y.initSegment=h,h.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=h.rawProgramDateTime)}else se(y,j,r,l),h=y,E=!0;break;case"SERVER-CONTROL":var q=new P(L);c.canBlockReload=q.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=q.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&q.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=q.optionalFloat("PART-HOLD-BACK",0),c.holdBack=q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var z=new P(L);c.partTarget=z.decimalFloatingPoint("PART-TARGET");break;case"PART":var W=c.partList;W||(W=c.partList=[]);var Y=p>0?W[W.length-1]:void 0,X=p++,$=new P(L);Ht(c,$,["BYTERANGE","URI"]);var Q=new H($,y,e,X,Y);W.push(Q),y.duration+=Q.duration;break;case"PRELOAD-HINT":var Z=new P(L);Ht(c,Z,["URI"]),c.preloadHint=Z;break;case"RENDITION-REPORT":var J=new P(L);Ht(c,J,["URI"]),c.renditionReports=c.renditionReports||[],c.renditionReports.push(J);break;default:C.warn("line parsed but not handled: "+o)}}}m&&!m.relurl?(f.pop(),g-=m.duration,c.partList&&(c.fragmentHint=m)):c.partList&&(oe(y,m),y.cc=v,c.fragmentHint=y,l&&ue(y,l,c));var tt=f.length,et=f[0],rt=f[tt-1];if((g+=c.skippedSegments*c.targetduration)>0&&tt&&rt){c.averagetargetduration=g/tt;var nt=rt.sn;c.endSN="initSegment"!==nt?nt:0,c.live||(rt.endList=!0),et&&(c.startCC=et.cc)}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,c.endCC=v,b>0&&function(t,e){for(var r=t[e],n=e;n--;){var i=t[n];if(!i)return;i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(f,b),c},t}();function re(t,e,r){var n,i,a=new P(t);Ht(r,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var o=null!=(n=a.METHOD)?n:"",s=a.URI,u=a.hexadecimalInteger("IV"),l=a.KEYFORMATVERSIONS,c=null!=(i=a.KEYFORMAT)?i:"identity";s&&a.IV&&!u&&C.error("Invalid IV: "+a.IV);var f=s?ee.resolve(s,e):"",h=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Bt(o,f,c,h,u)}function ne(t){var e=new P(t).decimalFloatingPoint("TIME-OFFSET");return T(e)?e:null}function ie(t,e){["video","audio","text"].forEach((function(r){var n=t.filter((function(t){return function(t,e){var r=Wt[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(n.length){var i=n.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter((function(t){return-1===n.indexOf(t)}))}})),e.unknownCodecs=t}function ae(t,e,r){var n=e[r];n&&(t[r]=n)}function oe(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),T(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function se(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function ue(t,e,r){t.levelkeys=e;var n=r.encryptedFragments;n.length&&n[n.length-1].levelkeys===e||!Object.keys(e).some((function(t){return e[t].isCommonEncryption}))||n.push(t)}var le="manifest",ce="level",fe="audioTrack",he="subtitleTrack",de="main",pe="audio",ge="subtitle";function ve(t){switch(t.type){case fe:return pe;case he:return ge;default:return de}}function me(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var ye=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}var r=t.prototype;return r.startLoad=function(t){},r.stopLoad=function(){this.destroyInternalLoaders()},r.registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},r.unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},r.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,n=e.loader,i=new(r||n)(e);return this.loaders[t.type]=i,i},r.getInternalLoader=function(t){return this.loaders[t.type]},r.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},r.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},r.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},r.onManifestLoading=function(t,e){var r=e.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:le,url:r,deliveryDirectives:null})},r.onLevelLoading=function(t,e){var r=e.id,n=e.level,i=e.url,a=e.deliveryDirectives;this.load({id:r,level:n,responseType:"text",type:ce,url:i,deliveryDirectives:a})},r.onAudioTrackLoading=function(t,e){var r=e.id,n=e.groupId,i=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:n,level:null,responseType:"text",type:fe,url:i,deliveryDirectives:a})},r.onSubtitleTrackLoading=function(t,e){var r=e.id,n=e.groupId,i=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:n,level:null,responseType:"text",type:he,url:i,deliveryDirectives:a})},r.load=function(t){var e,r,n,i=this,a=this.hls.config,o=this.getInternalLoader(t);if(o){var s=o.context;if(s&&s.url===t.url)return void C.trace("[playlist-loader]: playlist request ongoing");C.log("[playlist-loader]: aborting previous loader for type: "+t.type),o.abort()}if(r=t.type===le?a.manifestLoadPolicy.default:u({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),o=this.createInternalLoader(t),null!=(e=t.deliveryDirectives)&&e.part&&(t.type===ce&&null!==t.level?n=this.hls.levels[t.level].details:t.type===fe&&null!==t.id?n=this.hls.audioTracks[t.id].details:t.type===he&&null!==t.id&&(n=this.hls.subtitleTracks[t.id].details),n)){var l=n.partTarget,c=n.targetduration;if(l&&c){var f=1e3*Math.max(3*l,.8*c);r=u({},r,{maxTimeToFirstByteMs:Math.min(f,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,r.maxTimeToFirstByteMs)})}}var h=r.errorRetry||r.timeoutRetry||{},d={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:h.maxNumRetry||0,retryDelay:h.retryDelayMs||0,maxRetryDelay:h.maxRetryDelayMs||0},p={onSuccess:function(t,e,r,n){var a=i.getInternalLoader(r);i.resetInternalLoader(r.type);var o=t.data;0===o.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),ee.isMediaPlaylist(o)?i.handleTrackOrLevelPlaylist(t,e,r,n||null,a):i.handleMasterPlaylist(t,e,r,n)):i.handleManifestParsingError(t,r,new Error("no EXTM3U delimiter"),n||null,e)},onError:function(t,e,r,n){i.handleNetworkError(e,r,!1,t,n)},onTimeout:function(t,e,r){i.handleNetworkError(e,r,!0,void 0,t)}};o.load(t,d,p)},r.handleMasterPlaylist=function(t,e,r,n){var i=this.hls,a=t.data,o=me(t,r),s=ee.parseMasterPlaylist(a,o);if(s.playlistParsingError)this.handleManifestParsingError(t,r,s.playlistParsingError,n,e);else{var u=s.contentSteering,l=s.levels,c=s.sessionData,f=s.sessionKeys,h=s.startTimeOffset,d=s.variableList;this.variableList=d;var p=ee.parseMasterPlaylistMedia(a,o,s),g=p.AUDIO,v=void 0===g?[]:g,m=p.SUBTITLES,y=p["CLOSED-CAPTIONS"];v.length&&(v.some((function(t){return!t.url}))||!l[0].audioCodec||l[0].attrs.AUDIO||(C.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new P({}),bitrate:0,url:""}))),i.trigger(w.MANIFEST_LOADED,{levels:l,audioTracks:v,subtitles:m,captions:y,contentSteering:u,url:o,stats:e,networkDetails:n,sessionData:c,sessionKeys:f,startTimeOffset:h,variableList:d})}},r.handleTrackOrLevelPlaylist=function(t,e,r,n,i){var a=this.hls,o=r.id,s=r.level,u=r.type,l=me(t,r),c=T(o)?o:0,f=T(s)?s:c,h=ve(r),d=ee.parseLevelPlaylist(t.data,l,f,h,c,this.variableList);if(u===le){var p={attrs:new P({}),bitrate:0,details:d,name:"",url:l};a.trigger(w.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:l,stats:e,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),r.levelDetails=d,this.handlePlaylistLoaded(d,t,e,r,n,i)},r.handleManifestParsingError=function(t,e,r,n,i){this.hls.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:A.MANIFEST_PARSING_ERROR,fatal:e.type===le,url:t.url,err:r,error:r,reason:r.message,response:t,context:e,networkDetails:n,stats:i})},r.handleNetworkError=function(t,r,n,i,a){void 0===n&&(n=!1);var o="A network "+(n?"timeout":"error"+(i?" (status "+i.code+")":""))+" occurred while loading "+t.type;t.type===ce?o+=": "+t.level+" id: "+t.id:t.type!==fe&&t.type!==he||(o+=" id: "+t.id+' group-id: "'+t.groupId+'"');var s=new Error(o);C.warn("[playlist-loader]: "+o);var u=A.UNKNOWN,l=!1,c=this.getInternalLoader(t);switch(t.type){case le:u=n?A.MANIFEST_LOAD_TIMEOUT:A.MANIFEST_LOAD_ERROR,l=!0;break;case ce:u=n?A.LEVEL_LOAD_TIMEOUT:A.LEVEL_LOAD_ERROR,l=!1;break;case fe:u=n?A.AUDIO_TRACK_LOAD_TIMEOUT:A.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case he:u=n?A.SUBTITLE_TRACK_LOAD_TIMEOUT:A.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(t.type);var f={type:S.NETWORK_ERROR,details:u,fatal:l,url:t.url,loader:c,context:t,error:s,networkDetails:r,stats:a};if(i){var h=(null==r?void 0:r.url)||t.url;f.response=e({url:h,data:void 0},i)}this.hls.trigger(w.ERROR,f)},r.handlePlaylistLoaded=function(t,e,r,n,i,a){var o=this.hls,s=n.type,u=n.level,l=n.id,c=n.groupId,f=n.deliveryDirectives,h=me(e,n),d=ve(n),p="number"==typeof n.level&&d===de?u:void 0;if(t.fragments.length){t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));var g=t.playlistParsingError;if(g)o.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:A.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:g,reason:g.message,response:e,context:n,level:p,parent:d,networkDetails:i,stats:r});else switch(t.live&&a&&(a.getCacheAge&&(t.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),s){case le:case ce:o.trigger(w.LEVEL_LOADED,{details:t,level:p||0,id:l||0,stats:r,networkDetails:i,deliveryDirectives:f});break;case fe:o.trigger(w.AUDIO_TRACK_LOADED,{details:t,id:l||0,groupId:c||"",stats:r,networkDetails:i,deliveryDirectives:f});break;case he:o.trigger(w.SUBTITLE_TRACK_LOADED,{details:t,id:l||0,groupId:c||"",stats:r,networkDetails:i,deliveryDirectives:f})}}else{var v=new Error("No Segments found in Playlist");o.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:A.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:e,context:n,level:p,parent:d,networkDetails:i,stats:r})}},t}();function be(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function Ee(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){C.debug("[texttrack-utils]: "+r);var n=new self.TextTrackCue(e.startTime,e.endTime,e.text);n.id=e.id,t.addCue(n)}"disabled"===r&&(t.mode=r)}function Te(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function we(t,e,r,n){var i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var a=function(t,e,r){var n=[],i=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var n=0,i=r;n<=i;){var a=Math.floor((i+n)/2);if(e<t[a].startTime)i=a-1;else{if(!(e>t[a].startTime&&n<r))return a;n=a+1}}return t[n].startTime-e<e-t[i].startTime?n:i}(t,e);if(i>-1)for(var a=i,o=t.length;a<o;a++){var s=t[a];if(s.startTime>=e&&s.endTime<=r)n.push(s);else if(s.startTime>r)return n}return n}(t.cues,e,r),o=0;o<a.length;o++)n&&!n(a[o])||t.removeCue(a[o]);"disabled"===i&&(t.mode=i)}var Se="org.id3",Ae="https://aomedia.org/emsg/ID3";function _e(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var ke=function(){var t=_e();try{new t(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Le(t,e){return t.getTime()/1e3-e}var Re=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},e._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},e._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(Te(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},e.onManifestLoading=function(){this.dateRangeCuesAppended={}},e.createTrack=function(t){var e=this.getID3Track(t.textTracks);return e.mode="hidden",e},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return be(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=this.hls.config,n=r.enableEmsgMetadataCues,i=r.enableID3MetadataCues;if(n||i){var a=e.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=_e(),s=0;s<a.length;s++){var u=a[s].type;if((u!==Ae||n)&&i){var l=ft(a[s].data);if(l){var c=a[s].pts,f=c+a[s].duration;f>ke&&(f=ke),f-c<=0&&(f=c+.25);for(var h=0;h<l.length;h++){var d=l[h];if(!lt(d)){this.updateId3CueEnds(c);var p=new o(c,f,"");p.value=d,u&&(p.type=u),this.id3Track.addCue(p)}}}}}}}},e.updateId3CueEnds=function(t){var e,r=null==(e=this.id3Track)?void 0:e.cues;if(r)for(var n=r.length;n--;){var i=r[n];i.startTime<t&&i.endTime===ke&&(i.endTime=t)}},e.onBufferFlushing=function(t,e){var r=e.startOffset,n=e.endOffset,i=e.type,a=this.id3Track,o=this.hls;if(o){var s=o.config,u=s.enableEmsgMetadataCues,l=s.enableID3MetadataCues;a&&(u||l)&&we(a,r,n,"audio"===i?function(t){return t.type===Se&&l}:"video"===i?function(t){return t.type===Ae&&u}:function(t){return t.type===Se&&l||t.type===Ae&&u})}},e.onLevelUpdated=function(t,e){var r=this,n=e.details;if(this.media&&n.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var i=this.dateRangeCuesAppended,a=this.id3Track,o=n.dateRanges,s=Object.keys(o);if(a)for(var u=Object.keys(i).filter((function(t){return!s.includes(t)})),l=function(){var t=u[c];Object.keys(i[t].cues).forEach((function(e){a.removeCue(i[t].cues[e])})),delete i[t]},c=u.length;c--;)l();var f=n.fragments[n.fragments.length-1];if(0!==s.length&&T(null==f?void 0:f.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var h=f.programDateTime/1e3-f.start,d=_e(),p=function(){var t=s[g],e=o[t],n=i[t],a=(null==n?void 0:n.cues)||{},u=(null==n?void 0:n.durationKnown)||!1,l=Le(e.startDate,h),c=ke,f=e.endDate;if(f)c=Le(f,h),u=!0;else if(e.endOnNext&&!u){var p=s.reduce((function(t,r){var n=o[r];return n.class===e.class&&n.id!==r&&n.startDate>e.startDate&&t.push(n),t}),[]).sort((function(t,e){return t.startDate.getTime()-e.startDate.getTime()}))[0];p&&(c=Le(p.startDate,h),u=!0)}for(var v,m,y=Object.keys(e.attr),b=0;b<y.length;b++){var E=y[b];if("ID"!==(m=E)&&"CLASS"!==m&&"START-DATE"!==m&&"DURATION"!==m&&"END-DATE"!==m&&"END-ON-NEXT"!==m){var T=a[E];if(T)u&&!n.durationKnown&&(T.endTime=c);else{var w=e.attr[E];T=new d(l,c,""),O(E)&&(v=w,w=Uint8Array.from(v.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),T.value={key:E,data:w},T.type="com.apple.quicktime.HLS",T.id=t,r.id3Track.addCue(T),a[E]=T}}}i[t]={cues:a,dateRange:e,durationKnown:u}},g=0;g<s.length;g++)p()}}},t}(),xe=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},e.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(w.ERROR,this.onError,this)},e.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(w.ERROR,this.onError,this)},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},e.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},e.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},e.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},e.onError=function(t,e){var r;e.details===A.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&C.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},e.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var n=this.config,i=n.lowLatencyMode,a=n.maxLiveSyncPlaybackRate;if(i&&1!==a){var o=this.targetLatency;if(null!==o){var s=r-o,u=s<Math.min(this.maxLatency,o+e.targetduration);if(e.live&&u&&s>.05&&this.forwardBufferLength>1){var l=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;t.playbackRate=Math.min(l,Math.max(1,c))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},e.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},e.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},n(t,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,n=t.targetduration,i=this.config,a=i.liveSyncDuration,o=i.liveSyncDurationCount,s=i.lowLatencyMode,u=this.hls.userConfig,l=s&&r||e;(u.liveSyncDuration||u.liveSyncDurationCount||0===l)&&(l=void 0!==a?a:o*n);var c=n;return l+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var n=r.edge,i=t-e-this.edgeStalled,a=n-r.totalduration,o=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,i),o)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return(r?t.buffered.end(r-1):e.edge)-this.currentTime}}]),t}(),Ce=["NONE","TYPE-0","TYPE-1",null],Ie=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},t}(),De=function(){function t(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}return t.prototype.addFallback=function(t){this.url.push(t.url),this._attrs.push(t.attrs)},n(t,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var t;return null==(t=this.audioGroupIds)?void 0:t[this.urlId]}},{key:"textGroupId",get:function(){var t;return null==(t=this.textGroupIds)?void 0:t[this.urlId]}}]),t}();function Pe(t,e){var r=e.startPTS;if(T(r)){var n,i=0;e.sn>t.sn?(i=r-t.start,n=t):(i=t.start-r,n=e),n.duration!==i&&(n.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Oe(t,e,r,n,i,a){n-r<=0&&(C.warn("Fragment should have a positive duration",e),n=r+e.duration,a=i+e.duration);var o=r,s=n,u=e.startPTS,l=e.endPTS;if(T(u)){var c=Math.abs(u-r);T(e.deltaPTS)?e.deltaPTS=Math.max(c,e.deltaPTS):e.deltaPTS=c,o=Math.max(r,u),r=Math.min(r,u),i=Math.min(i,e.startDTS),s=Math.min(n,l),n=Math.max(n,l),a=Math.max(a,e.endDTS)}var f=r-e.start;0!==e.start&&(e.start=r),e.duration=n-e.start,e.startPTS=r,e.maxStartPTS=o,e.startDTS=i,e.endPTS=n,e.minEndPTS=s,e.endDTS=a;var h,d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;var p=d-t.startSN,g=t.fragments;for(g[p]=e,h=p;h>0;h--)Pe(g[h],g[h-1]);for(h=p;h<g.length-1;h++)Pe(g[h],g[h+1]);return t.fragmentHint&&Pe(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function Me(t,e){var r=e.startSN+e.skippedSegments-t.startSN,n=t.fragments;r<0||r>=n.length||Fe(e,n[r].start)}function Fe(t,e){if(e){for(var r=t.fragments,n=t.skippedSegments;n<r.length;n++)r[n].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Ne(t,e,r){var n;return null!=t&&t.details?Ue(null==(n=t.details)?void 0:n.partList,e,r):null}function Ue(t,e,r){if(t)for(var n=t.length;n--;){var i=t[n];if(i.index===r&&i.fragment.sn===e)return i}return null}function Be(t){switch(t.details){case A.FRAG_LOAD_TIMEOUT:case A.KEY_LOAD_TIMEOUT:case A.LEVEL_LOAD_TIMEOUT:case A.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function je(t,e){var r=Be(e);return t.default[(r?"timeout":"error")+"Retry"]}function Ge(t,e){var r="linear"===t.backoff?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function He(t){return e(e({},t),{errorRetry:null,timeoutRetry:null})}function Ke(t,e,r,n){return!!t&&e<t.maxNumRetry&&(function(t){return 0===t&&!1===navigator.onLine||!!t&&(t<400||t>499)}(n)||!!r)}var Ve=function(t,e){for(var r=0,n=t.length-1,i=null,a=null;r<=n;){var o=e(a=t[i=(r+n)/2|0]);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null};function qe(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;if(t?i=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(i=e[0]),i&&0===ze(r,n,i))return i;var a=Ve(e,ze.bind(null,r,n));return!a||a===t&&i?i:a}function ze(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),r.start<=t&&r.start+r.duration>t)return 0;var n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function We(t,e,r){var n=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>t}var Ye,Xe=function(){function t(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=C.log.bind(C,"[info]:"),this.warn=C.warn.bind(C,"[warning]:"),this.error=C.error.bind(C,"[error]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(w.ERROR,this.onError,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(w.ERROR,this.onError,this),t.off(w.ERROR,this.onErrorOut,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this))},e.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},e.startLoad=function(t){this.playlistError=0},e.stopLoad=function(){},e.getVariantLevelIndex=function(t){return(null==t?void 0:t.type)===de?t.level:this.hls.loadLevel},e.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},e.onLevelUpdated=function(){this.playlistError=0},e.onError=function(t,e){var r;if(!e.fatal){var n=this.hls,i=e.context;switch(e.details){case A.FRAG_LOAD_ERROR:case A.FRAG_LOAD_TIMEOUT:case A.KEY_LOAD_ERROR:case A.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case A.FRAG_GAP:case A.FRAG_PARSING_ERROR:case A.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=2);case A.LEVEL_EMPTY_ERROR:case A.LEVEL_PARSING_ERROR:var a,o,s=e.parent===de?e.level:n.loadLevel;return void(e.details===A.LEVEL_EMPTY_ERROR&&null!=(a=e.context)&&null!=(o=a.levelDetails)&&o.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,s):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,s)));case A.LEVEL_LOAD_ERROR:case A.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,i.level)));case A.AUDIO_TRACK_LOAD_ERROR:case A.AUDIO_TRACK_LOAD_TIMEOUT:case A.SUBTITLE_LOAD_ERROR:case A.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){var u=n.levels[n.loadLevel];if(u&&(i.type===fe&&i.groupId===u.audioGroupId||i.type===he&&i.groupId===u.textGroupId))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,n.loadLevel),e.errorAction.action=2,void(e.errorAction.flags=1)}return;case A.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var l=n.levels[n.loadLevel],c=null==l?void 0:l.attrs["HDCP-LEVEL"];return void(c&&(e.errorAction={action:2,flags:2,hdcpLevel:c}));case A.BUFFER_ADD_CODEC_ERROR:case A.REMUX_ALLOC_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(r=e.level)?r:n.loadLevel));case A.INTERNAL_EXCEPTION:case A.BUFFER_APPENDING_ERROR:case A.BUFFER_APPEND_ERROR:case A.BUFFER_FULL_ERROR:case A.LEVEL_SWITCH_ERROR:case A.BUFFER_STALLED_ERROR:case A.BUFFER_SEEK_OVER_HOLE:case A.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:0,flags:0})}if(e.type===S.KEY_SYSTEM_ERROR){var f=this.getVariantLevelIndex(e.frag);return e.levelRetry=!1,void(e.errorAction=this.getLevelSwitchAction(e,f))}}},e.getPlaylistRetryOrSwitchAction=function(t,e){var r,n=je(this.hls.config.playlistLoadPolicy,t),i=this.playlistError++,a=null==(r=t.response)?void 0:r.code;if(Ke(n,i,Be(t),a))return{action:5,flags:0,retryConfig:n,retryCount:i};var o=this.getLevelSwitchAction(t,e);return n&&(o.retryConfig=n,o.retryCount=i),o},e.getFragRetryOrSwitchAction=function(t){var e=this.hls,r=this.getVariantLevelIndex(t.frag),n=e.levels[r],i=e.config,a=i.fragLoadPolicy,o=i.keyLoadPolicy,s=je(t.details.startsWith("key")?o:a,t),u=e.levels.reduce((function(t,e){return t+e.fragmentError}),0);if(n){var l;t.details!==A.FRAG_GAP&&n.fragmentError++;var c=null==(l=t.response)?void 0:l.code;if(Ke(s,u,Be(t),c))return{action:5,flags:0,retryConfig:s,retryCount:u}}var f=this.getLevelSwitchAction(t,r);return s&&(f.retryConfig=s,f.retryCount=u),f},e.getLevelSwitchAction=function(t,e){var r=this.hls;null==e&&(e=r.loadLevel);var n=this.hls.levels[e];if(n&&(n.loadError++,r.autoLevelEnabled)){for(var i,a,o=-1,s=r.levels,u=null==(i=t.frag)?void 0:i.type,l=null!=(a=t.context)?a:{},c=l.type,f=l.groupId,h=s.length;h--;){var d=(h+r.loadLevel)%s.length;if(d!==r.loadLevel&&0===s[d].loadError){var p=s[d];if(t.details===A.FRAG_GAP&&t.frag){var g=s[d].details;if(g){var v=qe(t.frag,g.fragments,t.frag.start);if(null!=v&&v.gap)continue}}else{if(c===fe&&f===p.audioGroupId||c===he&&f===p.textGroupId)continue;if(u===pe&&n.audioGroupId===p.audioGroupId||u===ge&&n.textGroupId===p.textGroupId)continue}o=d;break}}if(o>-1&&r.loadLevel!==o)return t.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:o}}return{action:2,flags:1}},e.onErrorOut=function(t,e){var r;switch(null==(r=e.errorAction)?void 0:r.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===A.FRAG_GAP||(e.fatal=!0)}e.fatal&&this.hls.stopLoad()},e.sendAlternateToPenaltyBox=function(t){var e=this.hls,r=t.errorAction;if(r){var n=r.flags,i=r.hdcpLevel,a=r.nextAutoLevel;switch(n){case 0:this.switchLevel(t,a);break;case 1:r.resolved||(r.resolved=this.redundantFailover(t));break;case 2:i&&(e.maxHdcpLevel=Ce[Ce.indexOf(i)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+e.maxHdcpLevel+'" or lower')}r.resolved||this.switchLevel(t,a)}},e.switchLevel=function(t,e){void 0!==e&&t.errorAction&&(this.warn("switching to level "+e+" after "+t.details),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},e.redundantFailover=function(t){var e=this,r=this.hls,n=this.penalizedRenditions,i=t.parent===de?t.level:r.loadLevel,o=r.levels[i],s=o.url.length,u=t.frag?t.frag.urlId:o.urlId;o.urlId!==u||t.frag&&!o.details||this.penalizeRendition(o,t);for(var l=function(){var a=(u+c)%s,l=n[a];if(!l||function(t,e,r){if(performance.now()-t.lastErrorPerfMs>3e5)return!0;var n=t.details;if(e.details===A.FRAG_GAP&&n&&e.frag){var i=e.frag.start,a=qe(null,n.fragments,i);if(a&&!a.gap)return!0}if(r&&t.errors.length<r.errors.length){var o=t.errors[t.errors.length-1];if(n&&o.frag&&e.frag&&Math.abs(o.frag.start-e.frag.start)>3*n.targetduration)return!0}return!1}(l,t,n[u]))return e.warn("Switching to Redundant Stream "+(a+1)+"/"+s+': "'+o.url[a]+'" after '+t.details),e.playlistError=0,r.levels.forEach((function(t){t.urlId=a})),r.nextLoadLevel=i,{v:!0}},c=1;c<s;c++){var f=l();if("object"===a(f))return f.v}return!1},e.penalizeRendition=function(t,e){var r=this.penalizedRenditions,n=r[t.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};n.lastErrorPerfMs=performance.now(),n.errors.push(e),n.details=t.details,r[t.urlId]=n},t}(),$e=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=C.log.bind(C,e+":"),this.warn=C.warn.bind(C,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r){for(var n=-1,i=0;i<r.length;i++){var a=r[i],o=void 0;try{o=new self.URL(a.URI,e.url).href}catch(t){C.warn("Could not construct new URL for Rendition Report: "+t),o=a.URI||""}if(o===t){n=i;break}o===t.substring(0,o.length)&&(n=i)}if(-1!==n){var s=r[n],u=parseInt(s["LAST-MSN"])||(null==e?void 0:e.lastPartSn),l=parseInt(s["LAST-PART"])||(null==e?void 0:e.lastPartIndex);if(this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);l>=0&&c>e.partTarget&&(l+=1)}return new Ie(u,l>=0?l:void 0,"")}}},e.loadPlaylist=function(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},e.shouldLoadPlaylist=function(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)},e.shouldReloadPlaylist=function(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)},e.playlistLoaded=function(t,e,r){var n=this,i=e.details,a=e.stats,o=self.performance.now(),s=a.loading.first?Math.max(0,o-a.loading.first):0;if(i.advancedDateTime=Date.now()-s,i.live||null!=r&&r.live){if(i.reloaded(r),r&&this.log("live playlist "+t+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),r&&i.fragments.length>0&&function(t,e){for(var r=null,n=t.fragments,i=n.length-1;i>=0;i--){var a=n[i].initSegment;if(a){r=a;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var o,s,l,c,f,h=0;if(function(t,e,r){for(var n=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=i;l<=a;l++){var c=u[o+l],f=s[l];n&&!f&&l<n&&(f=e.fragments[l]=c),c&&f&&r(c,f)}}(t,e,(function(t,n){t.relurl&&(h=t.cc-n.cc),T(t.startPTS)&&T(t.endPTS)&&(n.start=n.startPTS=t.startPTS,n.startDTS=t.startDTS,n.maxStartPTS=t.maxStartPTS,n.endPTS=t.endPTS,n.endDTS=t.endDTS,n.minEndPTS=t.minEndPTS,n.duration=t.endPTS-t.startPTS,n.duration&&(o=n),e.PTSKnown=e.alignedSliding=!0),n.elementaryStreams=t.elementaryStreams,n.loader=t.loader,n.stats=t.stats,n.urlId=t.urlId,t.initSegment&&(n.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null==(e=r)?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed){C.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var d=e.skippedSegments;d--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=(s=t.dateRanges,l=e.dateRanges,c=e.recentlyRemovedDateranges,f=u({},s),c&&c.forEach((function(t){delete f[t]})),Object.keys(l).forEach((function(t){var e=new M(l[t].attr,f[t]);e.isValid?f[t]=e:C.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[t].attr)+'"')})),f));var p=e.fragments;if(h){C.warn("discontinuity sliding from playlist, take drift into account");for(var g=0;g<p.length;g++)p[g].cc+=h}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var n=0,i=0,a=t.length;i<=a;i++){var o=t[i],s=e[i+n];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?(u=o,(l=s).elementaryStreams=u.elementaryStreams,l.stats=u.stats):n--}var u,l}(t.partList,e.partList),o?Oe(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):Me(t,e),p.length&&(e.totalduration=e.edge-p[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var v=e.advancedDateTime;if(e.advanced&&v){var m=e.edge;e.driftStart||(e.driftStartTime=v,e.driftStart=m),e.driftEndTime=v,e.driftEnd=m}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}(r,i),!this.canLoad||!i.live)return;var l,c=void 0,f=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var h=this.hls.config.lowLatencyMode,d=i.lastPartSn,p=i.endSN,g=i.lastPartIndex,v=d===p;-1!==g?(c=v?p+1:d,f=v?h?0:g:g+1):c=p+1;var m=i.age,y=m+i.ageHeader,b=Math.min(y-i.partTarget,1.5*i.targetduration);if(b>0){if(r&&b>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+b+" with playlist age: "+i.age),b=0;else{var E=Math.floor(b/i.targetduration);c+=E,void 0!==f&&(f+=Math.round(b%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+b+" skip sn "+E+" to part "+f)}i.tuneInGoal=b}if(l=this.getDeliveryDirectives(i,e.deliveryDirectives,c,f),h||!v)return void this.loadPlaylist(l)}else i.canBlockReload&&(l=this.getDeliveryDirectives(i,e.deliveryDirectives,c,f));var w=this.hls.mainForwardBufferInfo,S=w?w.end-w.len:0,A=function(t,e){void 0===e&&(e=1/0);var r=1e3*t.targetduration;if(t.updated){var n=t.fragments;if(n.length&&4*r>e){var i=1e3*n[n.length-1].duration;i<r&&(r=i)}}else r/=2;return Math.round(r)}(i,1e3*(i.edge-S));i.updated&&o>this.requestScheduled+A&&(this.requestScheduled=a.loading.start),void 0!==c&&i.canBlockReload?this.requestScheduled=a.loading.first+A-(1e3*i.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+A<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=A);var _=this.requestScheduled-o;_=Math.max(0,_),this.log("reload live playlist "+t+" in "+Math.round(_)+" ms"),this.timer=self.setTimeout((function(){return n.loadPlaylist(l)}),_)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,n){var i=function(t,e){var r=t.canSkipUntil,n=t.canSkipDateRanges,i=t.endSN;return r&&(void 0!==e?e-i:0)<r?n?"v2":"YES":""}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,n=e.part,i=""),new Ie(r,n,i)},e.checkRetry=function(t){var e=this,r=t.details,n=Be(t),i=t.errorAction,a=i||{},o=a.action,s=a.retryCount,u=void 0===s?0:s,l=a.retryConfig,c=!!i&&!!l&&(5===o||!i.resolved&&2===o);if(c){var f;if(this.requestScheduled=-1,u>=l.maxNumRetry)return!1;if(n&&null!=(f=t.context)&&f.deliveryDirectives)this.warn("Retrying playlist loading "+(u+1)+"/"+l.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else{var h=Ge(l,u);this.timer=self.setTimeout((function(){return e.loadPlaylist()}),h),this.warn("Retrying playlist loading "+(u+1)+"/"+l.maxNumRetry+' after "'+r+'" in '+h+"ms")}t.levelRetry=!0,i.resolved=!0}return c},t}(),Qe=function(t){function e(e,r){var n;return(n=t.call(this,e,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevel=null,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.steering=void 0,n.onParsedComplete=void 0,n.steering=r,n._registerListeners(),n}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.ERROR,this.onError,this)},r._unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.ERROR,this.onError,this)},r.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),t.prototype.destroy.call(this)},r.startLoad=function(){this._levels.forEach((function(t){t.loadError=0,t.fragmentError=0})),t.prototype.startLoad.call(this)},r.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},r.onManifestLoading=function(t,e){this.resetLevels()},r.onManifestLoaded=function(t,e){var r,n=[],i={};e.levels.forEach((function(t){var e,a=t.attrs;-1!==(null==(e=t.audioCodec)?void 0:e.indexOf("mp4a.40.34"))&&(Ye||(Ye=/chrome|firefox/i.test(navigator.userAgent)),Ye&&(t.audioCodec=void 0));var o=a.AUDIO,s=a.CODECS,u=a["FRAME-RATE"],l=a["PATHWAY-ID"],c=a.RESOLUTION,f=a.SUBTITLES,h=(l||".")+"-"+t.bitrate+"-"+c+"-"+u+"-"+s;(r=i[h])?r.addFallback(t):(r=new De(t),i[h]=r,n.push(r)),Ze(r,"audio",o),Ze(r,"text",f)})),this.filterAndSortMediaOptions(n,e)},r.filterAndSortMediaOptions=function(t,e){var r=this,n=[],i=[],a=!1,o=!1,s=!1,u=t.filter((function(t){var e=t.audioCodec,r=t.videoCodec,n=t.width,i=t.height,u=t.unknownCodecs;return a||(a=!(!n||!i)),o||(o=!!r),s||(s=!!e),!(null!=u&&u.length)&&(!e||Xt(e,"audio"))&&(!r||Xt(r,"video"))}));if((a||o)&&s&&(u=u.filter((function(t){var e=t.videoCodec,r=t.width,n=t.height;return!!e||!(!r||!n)}))),0!==u.length){e.audioTracks&&Je(n=e.audioTracks.filter((function(t){return!t.audioCodec||Xt(t.audioCodec,"audio")}))),e.subtitles&&Je(i=e.subtitles);var l=u.slice(0);u.sort((function(t,e){return t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"]?(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1:t.bitrate!==e.bitrate?t.bitrate-e.bitrate:t.attrs["FRAME-RATE"]!==e.attrs["FRAME-RATE"]?t.attrs.decimalFloatingPoint("FRAME-RATE")-e.attrs.decimalFloatingPoint("FRAME-RATE"):t.attrs.SCORE!==e.attrs.SCORE?t.attrs.decimalFloatingPoint("SCORE")-e.attrs.decimalFloatingPoint("SCORE"):a&&t.height!==e.height?t.height-e.height:0}));var c=l[0];if(this.steering&&(u=this.steering.filterParsedLevels(u)).length!==l.length)for(var f=0;f<l.length;f++)if(l[f].pathwayId===u[0].pathwayId){c=l[f];break}this._levels=u;for(var h=0;h<u.length;h++)if(u[h]===c){this._firstLevel=h,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+c.bitrate);break}var d=s&&!o,p={levels:u,audioTracks:n,subtitleTracks:i,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:!d&&n.some((function(t){return!!t.url}))};this.hls.trigger(w.MANIFEST_PARSED,p),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){if(r.hls){var t=new Error("no level with compatible codecs found in manifest");r.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message})}}))},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===ce&&e.context.level===this.level&&this.checkRetry(e)},r.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===de){var n=this._levels[r.level];void 0!==n&&(n.loadError=0)}},r.onLevelLoaded=function(t,e){var r,n,i=e.level,a=e.details,o=this._levels[i];if(!o)return this.warn("Invalid level index "+i),void(null!=(n=e.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(i,e,o.details)):null!=(r=e.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0)},r.onAudioTrackSwitched=function(t,e){var r=this.currentLevel;if(r){var n=this.hls.audioTracks[e.id].groupId;if(r.audioGroupIds&&r.audioGroupId!==n){for(var i=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===n){i=a;break}-1!==i&&i!==r.urlId&&(r.urlId=i,this.canLoad&&this.startLoad())}}},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){var i=n.urlId,a=n.uri;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}var o=n.attrs["PATHWAY-ID"];this.log("Loading level index "+r+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(o?" Pathway "+o:"")+" URI "+(i+1)+"/"+n.url.length+" "+a),this.clearTimer(),this.hls.trigger(w.LEVEL_LOADING,{url:a,level:r,id:i,deliveryDirectives:e||null})}},r.removeLevel=function(t,e){var r=this,n=function(t,r){return r!==e},i=this._levels.filter((function(i,a){return a!==t||(i.url.length>1&&void 0!==e?(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0):(r.steering&&r.steering.removeLevel(i),!1))}));this.hls.trigger(w.LEVELS_UPDATED,{levels:i})},r.onLevelsUpdated=function(t,e){var r=e.levels;r.forEach((function(t,e){var r=t.details;null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e}))})),this._levels=r},n(e,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;if(0!==e.length){if(t<0||t>=e.length){var r=new Error("invalid level idx"),n=t<0;if(this.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:A.LEVEL_SWITCH_ERROR,level:t,fatal:n,error:r,reason:r.message}),n)return;t=Math.min(t,e.length-1)}var i=this.currentLevelIndex,a=this.currentLevel,o=a?a.attrs["PATHWAY-ID"]:void 0,s=e[t],l=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=s,i!==t||!s.details||!a||o!==l){this.log("Switching to level "+t+(l?" with Pathway "+l:"")+" from level "+i+(o?" with Pathway "+o:""));var c=u({},s,{level:t,maxBitrate:s.maxBitrate,attrs:s.attrs,uri:s.uri,urlId:s.urlId});delete c._attrs,delete c._urlId,this.hls.trigger(w.LEVEL_SWITCHING,c);var f=s.details;if(!f||f.live){var h=this.switchParams(s.uri,null==a?void 0:a.details);this.loadPlaylist(h)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}($e);function Ze(t,e,r){r&&("audio"===e?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=r):"text"===e&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=r))}function Je(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}var tr="NOT_LOADED",er="APPENDING",rr="PARTIAL",nr="OK",ir=function(){function t(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(w.BUFFER_APPENDED,this.onBufferAppended,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(w.BUFFER_APPENDED,this.onBufferAppended,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){var r=this.activePartLists[e];if(r)for(var n=r.length;n--;){var i=r[n];if(!i)break;var a=i.end;if(i.start<=t&&null!==a&&t<=a)return i}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,n=Object.keys(r),i=n.length;i--;){var a=r[n[i]];if((null==a?void 0:a.body.type)===e&&a.buffered){var o=a.body;if(o.start<=t&&t<=o.end)return o}}return null},e.detectEvictedFragments=function(t,e,r,n){var i=this;this.timeRanges&&(this.timeRanges[t]=e);var a=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach((function(n){var o=i.fragments[n];if(o&&!(a>=o.body.sn))if(o.buffered||o.loaded){var s=o.range[t];s&&s.time.some((function(t){var r=!i.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&i.removeFragment(o.body),r}))}else o.body.type===r&&i.removeFragment(o.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,n=t.frag,i=t.part;if(r&&"initSegment"!==n.sn){var a=or(n),o=this.fragments[a];if(o){var s=!n.relurl;Object.keys(r).forEach((function(t){var a=n.elementaryStreams[t];if(a){var u=r[t],l=s||!0===a.partial;o.range[t]=e.getBufferedTimes(n,i,l,u)}})),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,o.body.endList&&(this.endListFragments[o.body.type]=o),ar(o)||this.removeParts(n.sn-1,n.type)):this.removeFragment(o.body)}}},e.removeParts=function(t,e){var r=this.activePartLists[e];r&&(this.activePartLists[e]=r.filter((function(e){return e.fragment.sn>=t})))},e.fragBuffered=function(t,e){var r=or(t),n=this.fragments[r];!n&&e&&(n=this.fragments[r]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)},e.getBufferedTimes=function(t,e,r,n){for(var i={time:[],partial:r},a=t.start,o=t.end,s=t.minEndPTS||o,u=t.maxStartPTS||a,l=0;l<n.length;l++){var c=n.start(l)-this.bufferPadding,f=n.end(l)+this.bufferPadding;if(u>=c&&s<=f){i.time.push({startPTS:Math.max(a,n.start(l)),endPTS:Math.min(o,n.end(l))});break}if(a<f&&o>c)i.partial=!0,i.time.push({startPTS:Math.max(a,n.start(l)),endPTS:Math.min(o,n.end(l))});else if(o<=c)break}return i},e.getPartialFragment=function(t){var e,r,n,i=null,a=0,o=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach((function(u){var l=s[u];l&&ar(l)&&(r=l.body.start-o,n=l.body.end+o,t>=r&&t<=n&&(e=Math.min(t-r,n-t),a<=e&&(i=l.body,a=e)))})),i},e.isEndListAppended=function(t){var e=this.endListFragments[t];return void 0!==e&&(e.buffered||ar(e))},e.getState=function(t){var e=or(t),r=this.fragments[e];return r?r.buffered?ar(r)?rr:nr:er:tr},e.isTimeBuffered=function(t,e,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,t>=n&&e<=i)return!0;if(e<=n)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,n=e.part;if("initSegment"!==r.sn&&!r.bitrateTest){var i=n?null:e,a=or(r);this.fragments[a]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,n=e.frag,i=e.part,a=e.timeRanges;if("initSegment"!==n.sn){var o=n.type;if(i){var s=this.activePartLists[o];s||(this.activePartLists[o]=s=[]),s.push(i)}this.timeRanges=a,Object.keys(a).forEach((function(t){var e=a[t];r.detectEvictedFragments(t,e,o,i)}))}},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=or(t);return!!this.fragments[e]},e.hasParts=function(t){var e;return!(null==(e=this.activePartLists[t])||!e.length)},e.removeFragmentsInRange=function(t,e,r,n,i){var a=this;n&&!this.hasGaps||Object.keys(this.fragments).forEach((function(o){var s=a.fragments[o];if(s){var u=s.body;u.type!==r||n&&!u.gap||u.start<e&&u.end>t&&(s.buffered||i)&&a.removeFragment(u)}}))},e.removeFragment=function(t){var e=or(t);t.stats.loaded=0,t.clearElementaryStreamInfo();var r=this.activePartLists[t.type];if(r){var n=t.sn;this.activePartLists[t.type]=r.filter((function(t){return t.fragment.sn!==n}))}delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},t}();function ar(t){var e,r,n;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(r=t.range.audio)?void 0:r.partial)||(null==(n=t.range.audiovideo)?void 0:n.partial))}function or(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var sr=Math.pow(2,17),ur=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var r=t.prototype;return r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r.abort=function(){this.loader&&this.loader.abort()},r.load=function(t,r){var n=this,i=t.url;if(!i)return Promise.reject(new fr({type:S.NETWORK_ERROR,details:A.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(u,l){if(n.loader&&n.loader.destroy(),t.gap)l(cr(t));else{var c=n.loader=t.loader=o?new o(a):new s(a),f=lr(t),h=He(a.fragLoadPolicy.default),d={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:sr};t.stats=c.stats,c.load(f,d,{onSuccess:function(e,r,i,a){n.resetLoader(t,c);var o=e.data;i.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(o.slice(0,16)),o=o.slice(16)),u({frag:t,part:null,payload:o,networkDetails:a})},onError:function(r,a,o,s){n.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e({url:i,data:void 0},r),error:new Error("HTTP Error "+r.code+" "+r.text),networkDetails:o,stats:s}))},onAbort:function(e,r,i){n.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:i,stats:e}))},onTimeout:function(e,r,i){n.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error("Timeout after "+d.timeout+"ms"),networkDetails:i,stats:e}))},onProgress:function(e,n,i,a){r&&r({frag:t,part:null,payload:i,networkDetails:a})}})}}))},r.loadPart=function(t,r,n){var i=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(u,l){if(i.loader&&i.loader.destroy(),t.gap||r.gap)l(cr(t,r));else{var c=i.loader=t.loader=o?new o(a):new s(a),f=lr(t,r),h=He(a.fragLoadPolicy.default),d={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:sr};r.stats=c.stats,c.load(f,d,{onSuccess:function(e,a,o,s){i.resetLoader(t,c),i.updateStatsFromPart(t,r);var l={frag:t,part:r,payload:e.data,networkDetails:s};n(l),u(l)},onError:function(n,a,o,s){i.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:r,response:e({url:f.url,data:void 0},n),error:new Error("HTTP Error "+n.code+" "+n.text),networkDetails:o,stats:s}))},onAbort:function(e,n,a){t.stats.aborted=r.stats.aborted,i.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.INTERNAL_ABORTED,fatal:!1,frag:t,part:r,error:new Error("Aborted"),networkDetails:a,stats:e}))},onTimeout:function(e,n,a){i.resetLoader(t,c),l(new fr({type:S.NETWORK_ERROR,details:A.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:r,error:new Error("Timeout after "+d.timeout+"ms"),networkDetails:a,stats:e}))}})}}))},r.updateStatsFromPart=function(t,e){var r=t.stats,n=e.stats,i=n.total;if(r.loaded+=n.loaded,i){var a=Math.round(t.duration/e.duration),o=Math.min(Math.round(r.loaded/i),a),s=(a-o)*Math.round(r.loaded/o);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);var u=r.loading,l=n.loading;u.start?u.first+=l.first-l.start:(u.start=l.start,u.first=l.first),u.end=l.end},r.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function lr(t,e){void 0===e&&(e=null);var r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if(T(i)&&T(a)){var o,s=i,u=a;if("initSegment"===t.sn&&"AES-128"===(null==(o=t.decryptdata)?void 0:o.method)){var l=a-i;l%16&&(u=a+(16-l%16)),0!==i&&(n.resetIV=!0,s=i-16)}n.rangeStart=s,n.rangeEnd=u}return n}function cr(t,e){var r=new Error("GAP "+(t.gap?"tag":"attribute")+" found"),n={type:S.MEDIA_ERROR,details:A.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new fr(n)}var fr=function(t){function e(e){var r;return(r=t.call(this,e.error.message)||this).data=void 0,r.data=e,r}return l(e,t),e}(p(Error)),hr=function(){function t(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}var r=t.prototype;return r.abort=function(t){for(var e in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[e].loader;if(r){if(t&&t!==r.context.frag.type)return;r.abort()}}},r.detach=function(){for(var t in this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}},r.destroy=function(){for(var t in this.detach(),this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}},r.createKeyLoadError=function(t,e,r,n,i){return void 0===e&&(e=A.KEY_LOAD_ERROR),new fr({type:S.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:i,error:r,networkDetails:n})},r.loadClear=function(t,e){var r=this;if(this.emeController&&this.config.emeEnabled)for(var n=t.sn,i=t.cc,a=function(){var t=e[o];if(i<=t.cc&&("initSegment"===n||"initSegment"===t.sn||n<t.sn))return r.emeController.selectKeySystemFormat(t).then((function(e){t.setKeyFormat(e)})),"break"},o=0;o<e.length&&"break"!==a();o++);},r.load=function(t){var e=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((function(r){return e.loadInternal(t,r)})):this.loadInternal(t)},r.loadInternal=function(t,e){var r,n;e&&t.setKeyFormat(e);var i=t.decryptdata;if(!i){var a=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,A.KEY_LOAD_ERROR,a))}var o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(t,A.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+o+'"')));var s,u=this.keyUriToKeyInfo[o];if(null!=(r=u)&&r.decryptdata.key)return i.key=u.decryptdata.key,Promise.resolve({frag:t,keyInfo:u});if(null!=(n=u)&&n.keyLoadPromise)switch(null==(s=u.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then((function(e){return i.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:u}}))}switch(u=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(u,t):this.loadKeyEME(u,t);case"AES-128":return this.loadKeyHTTP(u,t);default:return Promise.reject(this.createKeyLoadError(t,A.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+i.method+'"')))}},r.loadKeyEME=function(t,e){var r={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var n=this.emeController.loadKey(r);if(n)return(t.keyLoadPromise=n.then((function(e){return t.mediaKeySessionContext=e,r}))).catch((function(e){throw t.keyLoadPromise=null,e}))}return Promise.resolve(r)},r.loadKeyHTTP=function(t,r){var n=this,i=this.config,a=new(0,i.loader)(i);return r.keyLoader=t.loader=a,t.keyLoadPromise=new Promise((function(o,s){var u={keyInfo:t,frag:r,responseType:"arraybuffer",url:t.decryptdata.uri},l=i.keyLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:function(t,e,r,i){var a=r.frag,u=r.keyInfo,l=r.url;if(!a.decryptdata||u!==n.keyUriToKeyInfo[l])return s(n.createKeyLoadError(a,A.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));u.decryptdata.key=a.decryptdata.key=new Uint8Array(t.data),a.keyLoader=null,u.loader=null,o({frag:a,keyInfo:u})},onError:function(t,i,a,o){n.resetLoader(i),s(n.createKeyLoadError(r,A.KEY_LOAD_ERROR,new Error("HTTP Error "+t.code+" loading key "+t.text),a,e({url:u.url,data:void 0},t)))},onTimeout:function(t,e,i){n.resetLoader(e),s(n.createKeyLoadError(r,A.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:function(t,e,i){n.resetLoader(e),s(n.createKeyLoadError(r,A.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};a.load(u,c,f)}))},r.resetLoader=function(t){var e=t.frag,r=t.keyInfo,n=t.url,i=r.loader;e.keyLoader===i&&(e.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[n],i&&i.destroy()},t}(),dr=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),pr={length:0,start:function(){return 0},end:function(){return 0}},gr=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var n=t.getBuffered(e),i=0;i<n.length;i++)if(r>=n.start(i)&&r<=n.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,n){try{if(e){var i,a=t.getBuffered(e),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,r,n)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var n=[];if(r)for(var i=0;i<t.length;i++){var a=n.length;if(a){var o=n[a-1].end;t[i].start-o<r?t[i].end>o&&(n[a-1].end=t[i].end):n.push(t[i])}else n.push(t[i])}else n=t;for(var s,u=0,l=e,c=e,f=0;f<n.length;f++){var h=n[f].start,d=n[f].end;if(e+r>=h&&e<d)l=h,u=(c=d)-e;else if(e+r<h){s=h;break}}return{len:u,start:l||0,end:c||0,nextStart:s}},t.getBuffered=function(t){try{return t.buffered}catch(t){return C.log("failed to get media.buffered",t),pr}},t}(),vr=function(t,e,r,n,i,a){void 0===n&&(n=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=n,this.part=i,this.partial=a};function mr(t,e){for(var r=null,n=0,i=t.length;n<i;n++){var a=t[n];if(a&&a.cc===e){r=a;break}}return r}function yr(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function br(t,e){for(var r=e.fragments,n=0,i=r.length;n<i;n++)yr(r[n],t);e.fragmentHint&&yr(e.fragmentHint,t),e.alignedSliding=!0}function Er(t,e){if(t.hasProgramDateTime&&e.hasProgramDateTime){var r=t.fragments,n=e.fragments;if(r.length&&n.length){var i=n[Math.round(n.length/2)-1],a=mr(r,i.cc)||r[Math.round(r.length/2)-1],o=i.programDateTime,s=a.programDateTime;null!==o&&null!==s&&br((s-o)/1e3-(a.start-i.start),t)}}}var Tr=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),wr=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),Sr=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],h=new Uint32Array(256),d=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[d]=v,e[v]=d;var m=h[d],y=h[m],b=h[y],E=257*h[v]^16843008*v;n[d]=E<<24|E>>>8,i[d]=E<<16|E>>>16,a[d]=E<<8|E>>>24,o[d]=E,E=16843009*b^65537*y^257*m^16843008*d,u[v]=E<<24|E>>>8,l[v]=E<<16|E>>>16,c[v]=E<<8|E>>>24,f[v]=E,d?(d=m^h[h[h[b^m]]],p^=h[h[p]]):d=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),f=this.invKeySchedule=new Uint32Array(l),h=this.sBox,d=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=e[a]:(u=s,a%i==0?(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=d[a/i|0]<<24):i>6&&a%i==4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],f[o]=o<4||a<=4?u:g[h[u>>>24]]^v[h[u>>>16&255]]^m[h[u>>>8&255]]^y[h[255&u]],f[o]=f[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var n,i,a,o,s,u,l,c,f,h,d,p,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,T=E[0],w=E[1],S=E[2],A=E[3],_=this.uint8ArrayToUint32Array_(r),k=_[0],L=_[1],R=_[2],x=_[3],C=new Int32Array(t),I=new Int32Array(C.length),D=this.networkToHostOrderSwap;e<C.length;){for(f=D(C[e]),h=D(C[e+1]),d=D(C[e+2]),p=D(C[e+3]),s=f^y[0],u=p^y[1],l=d^y[2],c=h^y[3],g=4,v=1;v<m;v++)n=T[s>>>24]^w[u>>16&255]^S[l>>8&255]^A[255&c]^y[g],i=T[u>>>24]^w[l>>16&255]^S[c>>8&255]^A[255&s]^y[g+1],a=T[l>>>24]^w[c>>16&255]^S[s>>8&255]^A[255&u]^y[g+2],o=T[c>>>24]^w[s>>16&255]^S[u>>8&255]^A[255&l]^y[g+3],s=n,u=i,l=a,c=o,g+=4;n=b[s>>>24]<<24^b[u>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^y[g],i=b[u>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&s]^y[g+1],a=b[l>>>24]<<24^b[c>>16&255]<<16^b[s>>8&255]<<8^b[255&u]^y[g+2],o=b[c>>>24]<<24^b[s>>16&255]<<16^b[u>>8&255]<<8^b[255&l]^y[g+3],I[e]=D(n^k),I[e+1]=D(o^L),I[e+2]=D(a^R),I[e+3]=D(i^x),k=f,L=h,R=d,x=p,e+=4}return I.buffer},t}(),Ar=function(){function t(t,e){var r=(void 0===e?{}:e).removePKCS7Padding,n=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=n,n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}null===this.subtle&&(this.useSoftware=!0)}var e=t.prototype;return e.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},e.isSync=function(){return this.useSoftware},e.flush=function(){var t=this.currentResult,e=this.remainderData;if(!t||e)return this.reset(),null;var r,n,i,a=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(i=(n=(r=a).byteLength)&&new DataView(r.buffer).getUint8(n-1))?rt(r,0,n-i):r:a},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r){var n=this;return this.useSoftware?new Promise((function(i,a){n.softwareDecrypt(new Uint8Array(t),e,r);var o=n.flush();o?i(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,r)},e.softwareDecrypt=function(t,e,r){var n=this.currentIV,i=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(t=Pt(a,t),this.remainderData=null);var o=this.getValidChunk(t);if(!o.length)return null;n&&(r=n);var s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new Sr),s.expandKey(e);var u=i;return this.currentResult=s.decrypt(o.buffer,0,r),this.currentIV=rt(o,-16).buffer,u||null},e.webCryptoDecrypt=function(t,e,r){var n=this,i=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new wr(i,e)),this.fastAesKey.expandKey().then((function(e){return i?(n.logOnce("WebCrypto AES decrypt"),new Tr(i,new Uint8Array(r)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return C.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+i.name+": "+i.message),n.onWebCryptoError(t,e,r)}))},e.onWebCryptoError=function(t,e,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,r);var n=this.flush();if(n)return n.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=rt(t,0,r),this.remainderData=rt(t,r)),e},e.logOnce=function(t){this.logEnabled&&(C.log("[decrypter]: "+t),this.logEnabled=!1)},t}(),_r="STOPPED",kr="IDLE",Lr="KEY_LOADING",Rr="FRAG_LOADING",xr="FRAG_LOADING_WAITING_RETRY",Cr="WAITING_TRACK",Ir="PARSING",Dr="PARSED",Pr="ENDED",Or="ERROR",Mr="WAITING_INIT_PTS",Fr="WAITING_LEVEL",Nr=function(t){function e(e,r,n,i,a){var o;return(o=t.call(this)||this).hls=void 0,o.fragPrevious=null,o.fragCurrent=null,o.fragmentTracker=void 0,o.transmuxer=null,o._state=_r,o.playlistType=void 0,o.media=null,o.mediaBuffer=null,o.config=void 0,o.bitrateTest=!1,o.lastCurrentTime=0,o.nextLoadPosition=0,o.startPosition=0,o.startTimeOffset=null,o.loadedmetadata=!1,o.retryDate=0,o.levels=null,o.fragmentLoader=void 0,o.keyLoader=void 0,o.levelLastLoaded=null,o.startFragRequested=!1,o.decrypter=void 0,o.initPTS=[],o.onvseeking=null,o.onvended=null,o.logPrefix="",o.log=void 0,o.warn=void 0,o.playlistType=a,o.logPrefix=i,o.log=C.log.bind(C,i+":"),o.warn=C.warn.bind(C,i+":"),o.hls=e,o.fragmentLoader=new ur(e.config),o.keyLoader=n,o.fragmentTracker=r,o.config=e.config,o.decrypter=new Ar(e.config),e.on(w.MANIFEST_LOADED,o.onManifestLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o)),o}l(e,t);var r=e.prototype;return r.doTick=function(){this.onTickEnd()},r.onTickEnd=function(){},r.startLoad=function(t){},r.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=_r},r._streamEnded=function(t,e){if(e.live||t.nextStart||!t.end||!this.media)return!1;var r=e.partList;if(null!=r&&r.length){var n=r[r.length-1];return gr.isBuffered(this.media,n.start+n.duration/2)}var i=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)},r.getLevelDetails=function(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levels[this.levelLastLoaded])?void 0:t.details},r.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.state===_r&&this.startLoad(n.startPosition)},r.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,n=this.mediaBuffer,i=this.state,a=r?r.currentTime:0,o=gr.bufferInfo(n||r,a,t.maxBufferHole);if(this.log("media seeking to "+(T(a)?a.toFixed(3):a)+", state: "+i),this.state===Pr)this.resetLoadingState();else if(e){var s=t.maxFragLookUpTolerance,u=e.start-s,l=e.start+e.duration+s;if(!o.len||l<o.start||u>o.end){var c=a>l;(a<u||c)&&(c&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onManifestLoaded=function(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]},r.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=_r,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},r._loadFragForPlayback=function(t,e,r){var n=this;this._doFragLoad(t,e,r,(function(e){if(n.fragContextChanged(t))return n.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void n.fragmentTracker.removeFragment(t);t.stats.chunkCount++,n._handleFragmentLoadProgress(e)})).then((function(e){if(e){var r=n.state;n.fragContextChanged(t)?(r===Rr||!n.fragCurrent&&r===Ir)&&(n.fragmentTracker.removeFragment(t),n.state=kr):("payload"in e&&(n.log("Loaded fragment "+t.sn+" of level "+t.level),n.hls.trigger(w.FRAG_LOADED,e)),n._handleFragmentLoadComplete(e))}})).catch((function(e){n.state!==_r&&n.state!==Or&&(n.warn(e),n.resetFragmentLoading(t))}))},r.clearTrackerIfNeeded=function(t){var e,r=this.fragmentTracker;if(r.getState(t)===er){var n=t.type,i=this.getFwdBufferInfo(this.mediaBuffer,n),a=Math.max(t.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&r.removeFragment(t)}else 0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)?r.removeAllFragments():r.hasParts(t.type)&&(r.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),r.getState(t)===rr&&r.removeFragment(t))},r.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var n={startOffset:t,endOffset:e,type:r};this.hls.trigger(w.BUFFER_FLUSHING,n)}},r._loadInitSegment=function(t,e){var r=this;this._doFragLoad(t,e).then((function(e){if(!e||r.fragContextChanged(t)||!r.levels)throw new Error("init load aborted");return e})).then((function(e){var n=r.hls,i=e.payload,a=t.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return r.decrypter.decrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).catch((function(e){throw n.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((function(r){var i=self.performance.now();return n.trigger(w.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:o,tdecrypt:i}}),e.payload=r,e}))}return e})).then((function(n){var i=r.fragCurrent,a=r.hls;if(!r.levels)throw new Error("init load aborted, missing levels");var o=t.stats;r.state=kr,e.fragmentError=0,t.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===i&&a.trigger(w.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:t.type}),r.tick()})).catch((function(e){r.state!==_r&&r.state!==Or&&(r.warn(e),r.resetFragmentLoading(t))}))},r.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},r.fragBufferedComplete=function(t,e){var r,n,i,a,o=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+(this.playlistType===de?"level":"track")+" "+t.level+" (frag:["+(null!=(r=t.startPTS)?r:NaN).toFixed(3)+"-"+(null!=(n=t.endPTS)?n:NaN).toFixed(3)+"] > buffer:"+(o?function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+"-"+t.end(n).toFixed(3)+"]";return e}(gr.getBuffered(o)):"(detached)")+")"),this.state=kr,o&&(!this.loadedmetadata&&t.type==de&&o.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},r.seekToStartPos=function(){},r._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,n=t.part,i=t.partsLoaded,a=!i||0===i.length||i.some((function(t){return!t})),o=new vr(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!a);e.flush(o)}},r._handleFragmentLoadProgress=function(t){},r._doFragLoad=function(t,e,r,n){var i,a=this;void 0===r&&(r=null);var o=null==e?void 0:e.details;if(!this.levels||!o)throw new Error("frag load aborted, missing level"+(o?"":" detail")+"s");var s=null;if(!t.encrypted||null!=(i=t.decryptdata)&&i.key?!t.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(t,o.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+o.startSN+"-"+o.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Lr,this.fragCurrent=t,s=this.keyLoader.load(t).then((function(t){if(!a.fragContextChanged(t.frag))return a.hls.trigger(w.KEY_LOADED,t),a.state===Lr&&(a.state=kr),t})),this.hls.trigger(w.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(t.start,r||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var u=o.partList;if(u&&n){r>t.end&&o.fragmentHint&&(t=o.fragmentHint);var l=this.getNextPart(u,t,r);if(l>-1){var c,f=u[l];return this.log("Loading part sn: "+t.sn+" p: "+f.index+" cc: "+t.cc+" of playlist ["+o.startSN+"-"+o.endSN+"] parts [0-"+l+"-"+(u.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=f.start+f.duration,this.state=Rr,c=s?s.then((function(r){return!r||a.fragContextChanged(r.frag)?null:a.doFragPartsLoad(t,f,e,n)})).catch((function(t){return a.handleFragLoadError(t)})):this.doFragPartsLoad(t,f,e,n).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(w.FRAG_LOADING,{frag:t,part:f,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!t.url||this.loadedEndOfParts(u,r))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(o?"of ["+o.startSN+"-"+o.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),T(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Rr;var h,d=this.config.progressive;return h=d&&s?s.then((function(e){return!e||a.fragContextChanged(null==e?void 0:e.frag)?null:a.fragmentLoader.load(t,n)})).catch((function(t){return a.handleFragLoadError(t)})):Promise.all([this.fragmentLoader.load(t,d?n:void 0),s]).then((function(t){var e=t[0];return!d&&e&&n&&n(e),e})).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(w.FRAG_LOADING,{frag:t,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h},r.doFragPartsLoad=function(t,e,r,n){var i=this;return new Promise((function(a,o){var s,u=[],l=null==(s=r.details)?void 0:s.partList;!function e(s){i.fragmentLoader.loadPart(t,s,n).then((function(n){u[s.index]=n;var o=n.part;i.hls.trigger(w.FRAG_LOADED,n);var c=Ne(r,t.sn,s.index+1)||Ue(l,t.sn,s.index+1);if(!c)return a({frag:t,part:o,partsLoaded:u});e(c)})).catch(o)}(e)}))},r.handleFragLoadError=function(t){if("data"in t){var e=t.data;t.data&&e.details===A.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(w.ERROR,e)}else this.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:A.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null},r._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Ir){var r=e.frag,n=e.part,i=e.level,a=self.performance.now();r.stats.parsing.end=a,n&&(n.stats.parsing.end=a),this.updateLevelTiming(r,n,i,t.partial)}else this.fragCurrent||this.state===_r||this.state===Or||(this.state=kr)},r.getCurrentContext=function(t){var e=this.levels,r=this.fragCurrent,n=t.level,i=t.sn,a=t.part;if(null==e||!e[n])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+n+". The current chunk will not be buffered."),null;var o=e[n],s=a>-1?Ne(o,i,a):null,u=s?s.fragment:function(t,e,r){if(null==t||!t.details)return null;var n=t.details,i=n.fragments[e-n.startSN];return i||((i=n.fragmentHint)&&i.sn===e?i:e<n.startSN&&r&&r.sn===e?r:null)}(o,i,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:s,level:o}):null},r.bufferFragmentData=function(t,e,r,n){var i;if(t&&this.state===Ir){var a=t.data1,o=t.data2,s=a;if(a&&o&&(s=Pt(a,o)),null!=(i=s)&&i.length){var u={type:t.type,frag:e,part:r,chunkMeta:n,parent:e.type,data:s};this.hls.trigger(w.BUFFER_APPENDING,u),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},r.flushBufferGap=function(t){var e=this.media;if(e)if(gr.isBuffered(e,e.currentTime)){var r=e.currentTime,n=gr.bufferInfo(e,r,0),i=t.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),o=Math.max(Math.min(t.start-a,n.end-a),r+a);t.start-o>a&&this.flushMainBuffer(o,t.start)}else this.flushMainBuffer(0,t.start)},r.getFwdBufferInfo=function(t,e){var r=this.getLoadPosition();return T(r)?this.getFwdBufferInfoAtPos(t,r,e):null},r.getFwdBufferInfoAtPos=function(t,e,r){var n=this.config.maxBufferHole,i=gr.bufferInfo(t,e,n);if(0===i.len&&void 0!==i.nextStart){var a=this.fragmentTracker.getBufferedFrag(e,r);if(a&&i.nextStart<a.end)return gr.bufferInfo(t,e,Math.max(i.nextStart,n))}return i},r.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},r.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.getAppendedFrag=function(t,e){var r=this.fragmentTracker.getAppendedFrag(t,de);return r&&"fragment"in r?r.fragment:r},r.getNextFragment=function(t,e){var r=e.fragments,n=r.length;if(!n)return null;var i,a=this.config,o=r[0].start;if(e.live){var s=a.initialLiveManifestSize;if(n<s)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+s+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(i=this.getInitialLiveFragment(e,r),this.startPosition=i?this.hls.liveSyncPosition||i.start:t)}else t<=o&&(i=r[0]);if(!i){var u=a.lowLatencyMode?e.partEnd:e.fragmentEnd;i=this.getFragmentAtPosition(t,u,e)}return this.mapToInitFragWhenRequired(i)},r.isLoopLoading=function(t,e){var r=this.fragmentTracker.getState(t);return(r===nr||r===rr&&!!t.gap)&&this.nextLoadPosition>e},r.getNextFragmentLoopLoading=function(t,e,r,n,i){var a=t.gap,o=this.getNextFragment(this.nextLoadPosition,e);if(null===o)return o;if(t=o,a&&t&&!t.gap&&r.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,n);if(null!==s&&r.len+s.len>=i)return this.log('buffer full after gaps in "'+n+'" playlist starting at sn: '+t.sn),null}return t},r.mapToInitFragWhenRequired=function(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment},r.getNextPart=function(t,e,r){for(var n=-1,i=!1,a=!0,o=0,s=t.length;o<s;o++){var u=t[o];if(a=a&&!u.independent,n>-1&&r<u.start)break;var l=u.loaded;l?n=-1:(i||u.independent||a)&&u.fragment===e&&(n=o),i=l}return n},r.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},r.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,n=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),n=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!T(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n<t.length;++n){var i=t[n];if(We(e,r,i))return i}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var i=r.sn+1;if(i>=t.startSN&&i<=t.endSN){var a=e[i-t.startSN];r.cc===a.cc&&(n=a,this.log("Live playlist, switching playlist, load frag with next SN: "+n.sn))}n||(n=function(t,e){return Ve(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc),n&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn))}}else{var o=this.hls.liveSyncPosition;null!==o&&(n=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return n},r.getFragmentAtPosition=function(t,e,r){var n,i=this.config,a=this.fragPrevious,o=r.fragments,s=r.endSN,u=r.fragmentHint,l=i.maxFragLookUpTolerance,c=r.partList,f=!!(i.lowLatencyMode&&null!=c&&c.length&&u);if(f&&u&&!this.bitrateTest&&(o=o.concat(u),s=u.sn),n=t<e?qe(a,o,t,t>e-l?0:l):o[o.length-1]){var h=n.sn-r.startSN,d=this.fragmentTracker.getState(n);if((d===nr||d===rr&&n.gap)&&(a=n),a&&n.sn===a.sn&&(!f||c[0].fragment.sn>n.sn)&&a&&n.level===a.level){var p=o[h+1];n=n.sn<s&&this.fragmentTracker.getState(p)!==nr?p:null}}return n},r.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var n=this.hls.liveSyncPosition,i=r.currentTime,a=t.fragments[0].start,o=t.edge,s=i>=a-e.maxFragLookUpTolerance&&i<=o;if(null!==n&&r.duration>n&&(i<n||!s)){var u=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!s&&r.readyState<4||i<o-u)&&(this.loadedmetadata||(this.nextLoadPosition=n),r.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+n.toFixed(3)),r.currentTime=n))}}},r.alignPlaylists=function(t,e){var r=this.levels,n=this.levelLastLoaded,i=this.fragPrevious,a=null!==n?r[n]:null,o=t.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var s=t.fragments[0].start,u=!e,l=t.alignedSliding&&T(s);if(u||!l&&!s){!function(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var n=function(t,e,r){var n=t.fragments,i=e.fragments;if(i.length&&n.length){var a=mr(n,i[0].cc);if(a&&(!a||a.startPTS))return a;C.log("No frag in previous level to align on")}else C.log("No fragments to align")}(r.details,e);n&&T(n.start)&&(C.log("Adjusting PTS using last level due to CC increase within current level "+e.url),br(n.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,n=t.fragments[0].programDateTime,i=(n-r)/1e3+e.fragments[0].start;i&&T(i)&&(C.log("Adjusting PTS using programDateTime delta "+(n-r)+"ms, sliding:"+i.toFixed(3)+" "+t.url+" "),br(i,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||Me(e.details,r))}(i,a,t);var c=t.fragments[0].start;return this.log("Live playlist sliding: "+c.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+o),c}return s},r.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},r.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var n=null!==this.startTimeOffset,i=n?this.startTimeOffset:t.startTimeOffset;null!==i&&T(i)?(r=e+i,i<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+i+" found in "+(n?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},r.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},r.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},r.resetFragmentLoading=function(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===xr)||(this.state=kr)},r.onFragmentOrKeyLoadError=function(t,e){if(e.chunkMeta&&!e.frag){var r=this.getCurrentContext(e.chunkMeta);r&&(e.frag=r.frag)}var n=e.frag;if(n&&n.type===t&&this.levels)if(this.fragContextChanged(n)){var i;this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(i=this.fragCurrent)?void 0:i.url))}else{var a=e.details===A.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);var o=e.errorAction,s=o||{},u=s.action,l=s.retryCount,c=void 0===l?0:l,f=s.retryConfig;if(o&&5===u&&f){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var h=Ge(f,c);this.warn("Fragment "+n.sn+" of "+t+" "+n.level+" errored with "+e.details+", retrying loading "+(c+1)+"/"+f.maxNumRetry+" in "+h+"ms"),o.resolved=!0,this.retryDate=self.performance.now()+h,this.state=xr}else f&&o?(this.resetFragmentErrors(t),c<f.maxNumRetry?a||(o.resolved=!0):C.warn(e.details+" reached or exceeded max retry ("+c+")")):this.state=Or;this.tickImmediate()}},r.reduceLengthAndFlushBuffer=function(t){if(this.state===Ir||this.state===Dr){var e=t.parent,r=this.getFwdBufferInfo(this.mediaBuffer,e),n=r&&r.len>.5;n&&this.reduceMaxBufferLength(r.len);var i=!n;return i&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+e+" buffer"),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),i}return!1},r.resetFragmentErrors=function(t){t===pe&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==_r&&(this.state=kr)},r.afterBufferFlushed=function(t,e,r){if(t){var n=gr.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,n,r),this.state===Pr&&this.resetLoadingState()}},r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=kr},r.resetStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},r.resetWhenMissingContext=function(t){this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(t.level),this.resetLoadingState()},r.removeUnbufferedFrags=function(t){void 0===t&&(t=0),this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)},r.updateLevelTiming=function(t,e,r,n){var i,a=this,o=r.details;if(o){if(Object.keys(t.elementaryStreams).reduce((function(e,i){var s=t.elementaryStreams[i];if(s){var u=s.endPTS-s.startPTS;if(u<=0)return a.warn("Could not parse fragment "+t.sn+" "+i+" duration reliably ("+u+")"),e||!1;var l=n?0:Oe(o,t,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return a.hls.trigger(w.LEVEL_PTS_UPDATED,{details:o,level:r,drift:l,type:i,frag:t,start:s.startPTS,end:s.endPTS}),!0}return e}),!1))r.fragmentError=0;else if(null===(null==(i=this.transmuxer)?void 0:i.error)){var s=new Error("Found no media in fragment "+t.sn+" of level "+r.id+" resetting transmuxer to fallback to playlist timing");if(this.warn(s.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,fatal:!1,error:s,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Dr,this.hls.trigger(w.FRAG_PARSED,{frag:t,part:e})}else this.warn("level.details undefined")},r.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},r.recoverWorkerError=function(t){"demuxerWorker"===t.event&&(this.resetTransmuxer(),this.resetLoadingState())},n(e,[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}]),e}(dr);function Ur(){return self.SourceBuffer||self.WebKitSourceBuffer}function Br(t,e){return void 0===t&&(t=""),void 0===e&&(e=9e4),{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}var jr=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(t){this.initPTS=t,this.resetContiguity()},e.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Pt(this.cachedData,t),this.cachedData=null);var r,n=ot(t,0),i=n?n.length:0,a=this._audioTrack,o=this._id3Track,s=n?function(t){for(var e=ft(t),r=0;r<e.length;r++){var n=e[r];if(lt(n))return vt(n)}}(n):void 0,u=t.length;for((null===this.basePTS||0===this.frameIndex&&T(s))&&(this.basePTS=Gr(s,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Se,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(t,i)){var l=this.appendFrame(a,t,i);l?(this.frameIndex++,this.lastPTS=l.sample.pts,r=i+=l.length):i=u}else ut(t,i)?(n=ot(t,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Se,duration:Number.POSITIVE_INFINITY}),r=i+=n.length):i++;if(i===u&&r!==u){var c=rt(t,r);this.cachedData?this.cachedData=Pt(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:Br(),id3Track:o,textTrack:Br()}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:Br(),id3Track:this._id3Track,textTrack:Br()}},e.destroy=function(){},t}(),Gr=function(t,e,r){return T(t)?90*t:9e4*e+(r?9e4*r.baseTime/r.timescale:0)};function Hr(t,e){return 255===t[e]&&240==(246&t[e+1])}function Kr(t,e){return 1&t[e+1]?7:9}function Vr(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function qr(t,e){return e+1<t.length&&Hr(t,e)}function zr(t,e){if(qr(t,e)){var r=Kr(t,e);if(e+r>=t.length)return!1;var n=Vr(t,e);if(n<=r)return!1;var i=e+n;return i===t.length||qr(t,i)}return!1}function Wr(t,e,r,n,i){if(!t.samplerate){var a=function(t,e,r,n){var i,a,o,s,u=navigator.userAgent.toLowerCase(),l=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&e[r+2])>>>6);var f=(60&e[r+2])>>>2;if(!(f>c.length-1))return o=(1&e[r+2])<<2,o|=(192&e[r+3])>>>6,C.log("manifest codec:"+n+", ADTS type:"+i+", samplingIndex:"+f),/firefox/i.test(u)?f>=6?(i=5,s=new Array(4),a=f-3):(i=2,s=new Array(2),a=f):-1!==u.indexOf("android")?(i=2,s=new Array(2),a=f):(i=5,s=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&f>=6?a=f-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(f>=6&&1===o||/vivaldi/i.test(u))||!n&&1===o)&&(i=2,s=new Array(2)),a=f)),s[0]=i<<3,s[0]|=(14&f)>>1,s[1]|=(1&f)<<7,s[1]|=o<<3,5===i&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:c[f],channelCount:o,codec:"mp4a.40."+i,manifestCodec:l};t.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f})}(e,r,n,i);if(!a)return;t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,C.log("parsed codec:"+t.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function Yr(t){return 9216e4/t}function Xr(t,e,r,n,i){var a,o=n+i*Yr(t.samplerate),s=function(t,e){var r=Kr(t,e);if(e+r<=t.length){var n=Vr(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}(e,r);if(s){var u=s.frameLength,l=s.headerLength,c=l+u,f=Math.max(0,r+c-e.length);f?(a=new Uint8Array(c-l)).set(e.subarray(r+l,e.length),0):a=e.subarray(r+l,r+c);var h={unit:a,pts:o};return f||t.samples.push(h),{sample:h,length:c,missing:f}}var d=e.length-r;return(a=new Uint8Array(d)).set(e.subarray(r,e.length),0),{sample:{unit:a,pts:o},length:d,missing:-1}}var $r=function(t){function e(e,r){var n;return(n=t.call(this)||this).observer=void 0,n.config=void 0,n.observer=e,n.config=r,n}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,n,i){t.prototype.resetInitSegment.call(this,e,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(ot(t,0)||[]).length,r=t.length;e<r;e++)if(zr(t,e))return C.log("ADTS sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&Hr(t,e)&&Vr(t,e)<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){Wr(t,this.observer,e,r,t.manifestCodec);var n=Xr(t,e,r,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n},e}(jr),Qr=/\/emsg[-/]ID3/i,Zr=function(){function t(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(t,e,r,n){var i=this.videoTrack=Br("video",1),a=this.audioTrack=Br("audio",1),o=this.txtTrack=Br("text",1);if(this.id3Track=Br("id3",1),this.timeOffset=0,null!=t&&t.byteLength){var s=Ct(t);if(s.video){var u=s.video,l=u.id,c=u.timescale,f=u.codec;i.id=l,i.timescale=o.timescale=c,i.codec=f}if(s.audio){var h=s.audio,d=h.id,p=h.timescale,g=h.codec;a.id=d,a.timescale=p,a.codec=g}o.id=wt.text,i.sampleDuration=0,i.duration=a.duration=n}},e.resetContiguity=function(){this.remainderData=null},t.probe=function(t){return Rt(t=t.length>16384?t.subarray(0,16384):t,["moof"]).length>0},e.demux=function(t,e){this.timeOffset=e;var r=t,n=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Pt(this.remainderData,t));var a=function(t){var e={valid:null,remainder:null},r=Rt(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var n=r[r.length-1];return e.valid=rt(t,0,n.byteOffset-8),e.remainder=rt(t,n.byteOffset-8),e}(r);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=r;var o=this.extractID3Track(n,e);return i.samples=Ot(e,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},e.flush=function(){var t=this.timeOffset,e=this.videoTrack,r=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;var n=this.extractID3Track(e,this.timeOffset);return r.samples=Ot(t,e),{videoTrack:e,audioTrack:Br(),id3Track:n,textTrack:Br()}},e.extractID3Track=function(t,e){var r=this.id3Track;if(t.samples.length){var n=Rt(t.samples,["emsg"]);n&&n.forEach((function(t){var n=function(t){var e=t[0],r="",n="",i=0,a=0,o=0,s=0,u=0,l=0;if(0===e){for(;"\0"!==St(t.subarray(l,l+1));)r+=St(t.subarray(l,l+1)),l+=1;for(r+=St(t.subarray(l,l+1)),l+=1;"\0"!==St(t.subarray(l,l+1));)n+=St(t.subarray(l,l+1)),l+=1;n+=St(t.subarray(l,l+1)),l+=1,i=_t(t,12),a=_t(t,16),s=_t(t,20),u=_t(t,24),l=28}else if(1===e){i=_t(t,l+=4);var c=_t(t,l+=4),f=_t(t,l+=4);for(l+=4,o=Math.pow(2,32)*c+f,Number.isSafeInteger(o)||(o=Number.MAX_SAFE_INTEGER,C.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=_t(t,l),u=_t(t,l+=4),l+=4;"\0"!==St(t.subarray(l,l+1));)r+=St(t.subarray(l,l+1)),l+=1;for(r+=St(t.subarray(l,l+1)),l+=1;"\0"!==St(t.subarray(l,l+1));)n+=St(t.subarray(l,l+1)),l+=1;n+=St(t.subarray(l,l+1)),l+=1}return{schemeIdUri:r,value:n,timeScale:i,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:u,payload:t.subarray(l,t.byteLength)}}(t);if(Qr.test(n.schemeIdUri)){var i=T(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale,a=4294967295===n.eventDuration?Number.POSITIVE_INFINITY:n.eventDuration/n.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var o=n.payload;r.samples.push({data:o,len:o.byteLength,dts:i,pts:i,type:Ae,duration:a})}}))}return r},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}(),Jr=null,tn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],en=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rn=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],nn=[0,1,1,4];function an(t,e,r,n,i){if(!(r+24>e.length)){var a=on(e,r);if(a&&r+a.frameLength<=e.length){var o=n+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(r,r+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function on(t,e){var r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==a){var o=t[e+2]>>1&1,s=t[e+3]>>6,u=1e3*tn[14*(3===r?3-n:3===n?3:4)+i-1],l=en[3*(3===r?0:2===r?1:2)+a],c=3===s?1:2,f=rn[r][n],h=nn[n],d=8*f*h,p=Math.floor(f*u/l+o)*h;if(null===Jr){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Jr=g?parseInt(g[1]):0}return!!Jr&&Jr<=87&&2===n&&u>=224e3&&0===s&&(t[e+3]=128|t[e+3]),{sampleRate:l,channelCount:c,frameLength:p,samplesPerFrame:d}}}function sn(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function un(t,e){return e+1<t.length&&sn(t,e)}function ln(t,e){if(e+1<t.length&&sn(t,e)){var r=on(t,e),n=4;null!=r&&r.frameLength&&(n=r.frameLength);var i=e+n;return i===t.length||un(t,i)}return!1}var cn=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;if(t>32&&C.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,n=0;n<t;n++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,n=0,i=0,a=0,o=0,s=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),d=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(u(5),f(3),s(),d(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=l();if(3===v&&f(1),d(),d(),f(1),c())for(e=3!==v?8:12,r=0;r<e;r++)c()&&p(r<6?16:64)}d();var m=l();if(0===m)l();else if(1===m)for(f(1),h(),h(),t=l(),r=0;r<t;r++)h();d(),f(1);var y=l(),b=l(),E=u(1);0===E&&f(1),f(1),c()&&(n=l(),i=l(),a=l(),o=l());var T=[1,1];if(c()&&c())switch(s()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*n-2*i),height:(2-E)*(b+1)*16-(E?2:4)*(a+o),pixelRatio:T}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),fn=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Ar(e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)},e.decryptAacSample=function(t,e,r){var n=this,i=t[e].unit;if(!(i.length<=16)){var a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(o).then((function(a){var o=new Uint8Array(a);i.set(o,16),n.decrypter.isSync()||n.decryptAacSamples(t,e+1,r)}))}},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32||(this.decryptAacSample(t,e,r),this.decrypter.isSync())))return}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),n=0,i=32;i<t.length-16;i+=160,n+=16)t.set(r.subarray(n,n+16),i);return t},e.decryptAvcSample=function(t,e,r,n,i){var a=this,o=Nt(i.data),s=this.getAvcEncryptedData(o);this.decryptBuffer(s.buffer).then((function(s){i.data=a.getAvcDecryptedUnit(o,s),a.decrypter.isSync()||a.decryptAvcSamples(t,e,r+1,n)}))},e.decryptAvcSamples=function(t,e,r,n){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(t,e,r,n,a),this.decrypter.isSync())))return}}},t}(),hn=188,dn=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return r>0&&C.warn("MPEG2-TS detected but first sync word found @ offset "+r),-1!==r},t.syncOffset=function(t){for(var e=t.length,r=Math.min(940,t.length-hn)+1,n=0;n<r;){for(var i=!1,a=-1,o=0,s=n;s<e;s+=hn){if(71!==t[s]){if(o)return-1;break}if(o++,-1===a&&0!==(a=s)&&(r=Math.min(a+18612,t.length-hn)+1),i||(i=0===gn(t,s)),i&&o>1&&(0===a&&o>2||s+hn>r))return a}n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:wt[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video"),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3"),this._txtTrack=t.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},e.demux=function(e,r,n,i){var a;void 0===n&&(n=!1),void 0===i&&(i=!1),n||(this.sampleAes=null);var o=this._avcTrack,s=this._audioTrack,u=this._id3Track,l=this._txtTrack,c=o.pid,f=o.pesData,h=s.pid,d=u.pid,p=s.pesData,g=u.pesData,v=null,m=this.pmtParsed,y=this._pmtId,b=e.length;if(this.remainderData&&(b=(e=Pt(this.remainderData,e)).length,this.remainderData=null),b<hn&&!i)return this.remainderData=e,{audioTrack:s,videoTrack:o,id3Track:u,textTrack:l};var E=Math.max(0,t.syncOffset(e));(b-=(b-E)%hn)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));for(var T=0,_=E;_<b;_+=hn)if(71===e[_]){var k=!!(64&e[_+1]),L=gn(e,_),R=void 0;if((48&e[_+3])>>4>1){if((R=_+5+e[_+4])===_+hn)continue}else R=_+4;switch(L){case c:k&&(f&&(a=yn(f))&&this.parseAVCPES(o,l,a,!1),f={data:[],size:0}),f&&(f.data.push(e.subarray(R,_+hn)),f.size+=_+hn-R);break;case h:if(k){if(p&&(a=yn(p)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,a);break;case"mp3":this.parseMPEGPES(s,a)}p={data:[],size:0}}p&&(p.data.push(e.subarray(R,_+hn)),p.size+=_+hn-R);break;case d:k&&(g&&(a=yn(g))&&this.parseID3PES(u,a),g={data:[],size:0}),g&&(g.data.push(e.subarray(R,_+hn)),g.size+=_+hn-R);break;case 0:k&&(R+=e[R]+1),y=this._pmtId=vn(e,R);break;case y:k&&(R+=e[R]+1);var x=mn(e,R,this.typeSupported,n);(c=x.avc)>0&&(o.pid=c),(h=x.audio)>0&&(s.pid=h,s.segmentCodec=x.segmentCodec),(d=x.id3)>0&&(u.pid=d),null===v||m||(C.warn("MPEG-TS PMT found at "+_+" after unknown PID '"+v+"'. Backtracking to sync byte @"+E+" to parse all TS packets."),v=null,_=E-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:v=L}}else T++;if(T>0){var I=new Error("Found "+T+" TS packet/s that do not start with 0x47");this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message})}o.pesData=f,s.pesData=p,u.pesData=g;var D={audioTrack:s,videoTrack:o,id3Track:u,textTrack:l};return i&&this.extractRemainingSamples(D),D},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,n=t.videoTrack,i=t.id3Track,a=t.textTrack,o=n.pesData,s=r.pesData,u=i.pesData;if(o&&(e=yn(o))?(this.parseAVCPES(n,a,e,!0),n.pesData=null):n.pesData=o,s&&(e=yn(s))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,e);break;case"mp3":this.parseMPEGPES(r,e)}r.pesData=null}else null!=s&&s.size&&C.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s;u&&(e=yn(u))?(this.parseID3PES(i,e),i.pesData=null):i.pesData=u},e.demuxSampleAes=function(t,e,r){var n=this.demux(t,r,!0,!this.config.progressive),i=this.sampleAes=new fn(this.observer,this.config,e);return this.decrypt(n,i)},e.decrypt=function(t,e){return new Promise((function(r){var n=t.audioTrack,i=t.videoTrack;n.samples&&"aac"===n.segmentCodec?e.decryptAacSamples(n.samples,0,(function(){i.samples?e.decryptAvcSamples(i.samples,0,0,(function(){r(t)})):r(t)})):i.samples&&e.decryptAvcSamples(i.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._duration=0},e.parseAVCPES=function(t,e,r,n){var i,a=this,o=this.parseAVCNALu(t,r.data),s=this.avcSample,u=!1;r.data=null,s&&o.length&&!t.audFound&&(bn(s,t),s=this.avcSample=pn(!1,r.pts,r.dts,"")),o.forEach((function(n){switch(n.type){case 1:i=!0,s||(s=a.avcSample=pn(!0,r.pts,r.dts,"")),s.frame=!0;var o=n.data;if(u&&o.length>4){var l=new cn(o).readSliceType();2!==l&&4!==l&&7!==l&&9!==l||(s.key=!0)}break;case 5:i=!0,s||(s=a.avcSample=pn(!0,r.pts,r.dts,"")),s.key=!0,s.frame=!0;break;case 6:i=!0,Ft(n.data,1,r.pts,e.samples);break;case 7:if(i=!0,u=!0,!t.sps){var c=n.data,f=new cn(c).readSPS();t.width=f.width,t.height=f.height,t.pixelRatio=f.pixelRatio,t.sps=[c],t.duration=a._duration;for(var h=c.subarray(1,4),d="avc1.",p=0;p<3;p++){var g=h[p].toString(16);g.length<2&&(g="0"+g),d+=g}t.codec=d}break;case 8:i=!0,t.pps||(t.pps=[n.data]);break;case 9:i=!1,t.audFound=!0,s&&bn(s,t),s=a.avcSample=pn(!1,r.pts,r.dts,"");break;case 12:i=!0;break;default:i=!1,s&&(s.debug+="unknown NAL "+n.type+" ")}s&&i&&s.units.push(n)})),n&&s&&(bn(s,t),this.avcSample=null)},e.getLastNalUnit=function(t){var e,r,n=this.avcSample;if(n&&0!==n.units.length||(n=t[t.length-1]),null!=(e=n)&&e.units){var i=n.units;r=i[i.length-1]}return r},e.parseAVCNALu=function(t,e){var r,n,i=e.byteLength,a=t.naluState||0,o=a,s=[],u=0,l=-1,c=0;for(-1===a&&(l=0,c=31&e[0],a=0,u=1);u<i;)if(r=e[u++],a)if(1!==a)if(r)if(1===r){if(l>=0){var f={data:e.subarray(l,u-a-1),type:c};s.push(f)}else{var h=this.getLastNalUnit(t.samples);if(h&&(o&&u<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),(n=u-a-1)>0)){var d=new Uint8Array(h.data.byteLength+n);d.set(h.data,0),d.set(e.subarray(0,n),h.data.byteLength),h.data=d,h.state=0}}u<i?(l=u,c=31&e[u],a=0):a=-1}else a=0;else a=3;else a=r?0:2;else a=r?0:1;if(l>=0&&a>=0){var p={data:e.subarray(l,i),type:c,state:a};s.push(p)}if(0===s.length){var g=this.getLastNalUnit(t.samples);if(g){var v=new Uint8Array(g.data.byteLength+e.byteLength);v.set(g.data,0),v.set(e,g.data.byteLength),g.data=v}}return t.naluState=a,s},e.parseAACPES=function(t,e){var r,n,i,a=0,o=this.aacOverFlow,s=e.data;if(o){this.aacOverFlow=null;var u=o.missing,l=o.sample.unit.byteLength;if(-1===u){var c=new Uint8Array(l+s.byteLength);c.set(o.sample.unit,0),c.set(s,l),s=c}else{var f=l-u;o.sample.unit.set(s.subarray(0,u),f),t.samples.push(o.sample),a=o.missing}}for(r=a,n=s.length;r<n-1&&!qr(s,r);r++);if(r!==a){var h,d=r<n-1;h=d?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES";var p=new Error(h);if(C.warn("parsing error: "+h),this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,fatal:!1,levelRetry:d,error:p,reason:h}),!d)return}if(Wr(t,this.observer,s,r,this.audioCodec),void 0!==e.pts)i=e.pts;else{if(!o)return void C.warn("[tsdemuxer]: AAC PES unknown PTS");var g=Yr(t.samplerate);i=o.sample.pts+g}for(var v,m=0;r<n;){if(r+=(v=Xr(t,s,r,i,m)).length,v.missing){this.aacOverFlow=v;break}for(m++;r<n-1&&!qr(s,r);r++);}},e.parseMPEGPES=function(t,e){var r=e.data,n=r.length,i=0,a=0,o=e.pts;if(void 0!==o)for(;a<n;)if(un(r,a)){var s=an(t,r,a,o,i);if(!s)break;a+=s.length,i++}else a++;else C.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t,e){if(void 0!==e.pts){var r=u({},e,{type:this._avcTrack?Ae:Se,duration:Number.POSITIVE_INFINITY});t.samples.push(r)}else C.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function pn(t,e,r,n){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:n,length:0}}function gn(t,e){return((31&t[e+1])<<8)+t[e+2]}function vn(t,e){return(31&t[e+10])<<8|t[e+11]}function mn(t,e,r,n){var i={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var o=gn(t,e);switch(t[e]){case 207:if(!n){C.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=o);break;case 21:-1===i.id3&&(i.id3=o);break;case 219:if(!n){C.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=o);break;case 3:case 4:!0!==r.mpeg&&!0!==r.mp3?C.log("MPEG audio found, not supported in this browser"):-1===i.audio&&(i.audio=o,i.segmentCodec="mp3");break;case 36:C.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return i}function yn(t){var e,r,n,i,a,o=0,s=t.data;if(!t||0===t.size)return null;for(;s[0].length<19&&s.length>1;){var u=new Uint8Array(s[0].length+s[1].length);u.set(s[0]),u.set(s[1],s[0].length),s[0]=u,s.splice(1,1)}if(1===((e=s[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var l=e[7];192&l&&(i=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?i-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(C.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var c=(n=e[8])+9;if(t.size<=c)return null;t.size-=c;for(var f=new Uint8Array(t.size),h=0,d=s.length;h<d;h++){var p=(e=s[h]).byteLength;if(c){if(c>p){c-=p;continue}e=e.subarray(c),p-=c,c=0}f.set(e,o),o+=p}return r&&(r-=n+3),{data:f,pts:i,dts:a,len:r}}return null}function bn(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,n=r.length;if(!n)return void e.dropped++;var i=r[n-1];t.pts=i.pts,t.dts=i.dts}e.samples.push(t)}t.debug.length&&C.log(t.pts+"/"+t.dts+":"+t.debug)}var En=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,n,i){t.prototype.resetInitSegment.call(this,e,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(ot(t,0)||[]).length,r=t.length;e<r;e++)if(ln(t,e))return C.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return sn(t,e)&&4<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){if(null!==this.basePTS)return an(t,e,r,this.basePTS,this.frameIndex)},e}(jr),Tn=function(){function t(){}return t.getSilentFrame=function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),wn=Math.pow(2,32)-1,Sn=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e=8,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=n.length,o=a;a--;)e+=n[a].byteLength;var s=new Uint8Array(e);for(s[0]=e>>24&255,s[1]=e>>16&255,s[2]=e>>8&255,s[3]=255&e,s.set(t,4),a=0,e=8;a<o;a++)s.set(n[a],e),e+=n[a].byteLength;return s},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var n=Math.floor(r/(wn+1)),i=Math.floor(r%(wn+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var n=Math.floor(r/(wn+1)),i=Math.floor(r%(wn+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r,n,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,n,i,a=[],o=[];for(r=0;r<e.sps.length;r++)i=(n=e.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)i=(n=e.pps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],f=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,n=e.duration*e.timescale,i=e.width,a=e.height,o=Math.floor(n/(wn+1)),s=Math.floor(n%(wn+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var n=t.sdtp(e),i=e.id,a=Math.floor(r/(wn+1)),o=Math.floor(r%(wn+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n,i,a,o,s,u,l=e.samples||[],c=l.length,f=12+16*c,h=new Uint8Array(f);for(r+=8+f,h.set(["video"===e.type?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=l[n]).duration,o=i.size,s=i.flags,u=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),n=new Uint8Array(t.FTYP.byteLength+r.byteLength);return n.set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}();function An(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=t*e*r;return n?Math.round(i):i}function _n(t,e){return void 0===e&&(e=!1),An(t,1e3,1/9e4,e)}Sn.types=void 0,Sn.HDLR_TYPES=void 0,Sn.STTS=void 0,Sn.STSC=void 0,Sn.STCO=void 0,Sn.STSZ=void 0,Sn.VMHD=void 0,Sn.SMHD=void 0,Sn.STSD=void 0,Sn.FTYP=void 0,Sn.DINF=void 0;var kn=null,Ln=null,Rn=function(){function t(t,e,r,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===kn){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);kn=i?parseInt(i[1]):0}if(null===Ln){var a=navigator.userAgent.match(/Safari\/(\d+)/i);Ln=a?parseInt(a[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){C.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){C.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){C.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var n=r.pts-t;return n<-4294967296?(e=!0,xn(t,r.pts)):n>0?t:r.pts}),t[0].pts);return e&&C.debug("PTS rollover detected"),r},e.remux=function(t,e,r,n,i,a,o,s){var u,l,c,f,h,d,p=i,g=i,v=t.pid>-1,m=e.pid>-1,y=e.samples.length,b=t.samples.length>0,E=o&&y>0||y>1;if((!v||b)&&(!m||E)||this.ISGenerated||o){this.ISGenerated||(c=this.generateIS(t,e,i,a));var T,w=this.isVideoContiguous,S=-1;if(E&&(S=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(d=!0,S>0){C.warn("[mp4-remuxer]: Dropped "+S+" out of "+y+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(S),e.dropped+=S,T=g+=(e.samples[0].pts-A)/e.inputTimeScale}else-1===S&&(C.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),d=!1);if(this.ISGenerated){if(b&&E){var _=this.getVideoStartPts(e.samples),k=(xn(t.samples[0].pts,_)-_)/e.inputTimeScale;p+=Math.max(0,k),g+=Math.max(0,-k)}if(b){if(t.samplerate||(C.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(t,e,i,a)),l=this.remuxAudio(t,p,this.isAudioContiguous,a,m||E||s===pe?g:void 0),E){var L=l?l.endPTS-l.startPTS:0;e.inputTimeScale||(C.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(t,e,i,a)),u=this.remuxVideo(e,g,w,L)}}else E&&(u=this.remuxVideo(e,g,w,0));u&&(u.firstKeyFrame=S,u.independent=-1!==S,u.firstKeyFramePTS=T)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=Cn(r,i,this._initPTS,this._initDTS)),n.samples.length&&(f=In(n,i,this._initPTS))),{audio:l,video:u,initSegment:c,independent:d,text:f,id3:h}},e.generateIS=function(t,e,r,n){var i,a,o,s=t.samples,u=e.samples,l=this.typeSupported,c={},f=this._initPTS,h=!f||n,d="audio/mp4";if(h&&(i=a=1/0),t.config&&s.length&&(t.timescale=t.samplerate,"mp3"===t.segmentCodec&&(l.mpeg?(d="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),c.audio={id:"audio",container:d,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&l.mpeg?new Uint8Array(0):Sn.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(o=t.inputTimeScale,f&&o===f.timescale?h=!1:i=a=s[0].pts-Math.round(o*r))),e.sps&&e.pps&&u.length&&(e.timescale=e.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:Sn.initSegment([e]),metadata:{width:e.width,height:e.height}},h))if(o=e.inputTimeScale,f&&o===f.timescale)h=!1;else{var p=this.getVideoStartPts(u),g=Math.round(o*r);a=Math.min(a,xn(u[0].dts,p)-g),i=Math.min(i,p-g)}if(Object.keys(c).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:i,timescale:o},this._initDTS={baseTime:a,timescale:o}):i=o=void 0,{tracks:c,initPTS:i,timescale:o}},e.remuxVideo=function(t,e,r,n){var i,a,o=t.inputTimeScale,s=t.samples,l=[],c=s.length,f=this._initPTS,h=this.nextAvcDts,d=8,p=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,m=!1;r&&null!==h||(h=e*o-(s[0].pts-xn(s[0].dts,s[0].pts)));for(var y=f.baseTime*o/f.timescale,b=0;b<c;b++){var E=s[b];E.pts=xn(E.pts-y,h),E.dts=xn(E.dts-y,h),E.dts<s[b>0?b-1:b].dts&&(m=!0)}m&&s.sort((function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n})),i=s[0].dts;var T=s[s.length-1].dts-i,_=T?Math.round(T/(c-1)):p||t.inputTimeScale/30;if(r){var k=i-h,L=k>_,R=k<-1;if((L||R)&&(L?C.warn("AVC: "+_n(k,!0)+" ms ("+k+"dts) hole between fragments detected, filling it"):C.warn("AVC: "+_n(-k,!0)+" ms ("+k+"dts) overlapping between fragments detected"),!R||h>=s[0].pts)){i=h;var x=s[0].pts-k;s[0].dts=i,s[0].pts=x,C.log("Video: First PTS/DTS adjusted: "+_n(x,!0)+"/"+_n(i,!0)+", delta: "+_n(k,!0)+" ms")}}i=Math.max(0,i);for(var I=0,D=0,P=0;P<c;P++){for(var O=s[P],M=O.units,F=M.length,N=0,U=0;U<F;U++)N+=M[U].data.length;D+=N,I+=F,O.length=N,O.dts=Math.max(O.dts,i),g=Math.min(O.pts,g),v=Math.max(O.pts,v)}a=s[c-1].dts;var B,j=D+4*I+8;try{B=new Uint8Array(j)}catch(t){return void this.observer.emit(w.ERROR,w.ERROR,{type:S.MUX_ERROR,details:A.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:j,reason:"fail allocating video mdat "+j})}var G=new DataView(B.buffer);G.setUint32(0,j),B.set(Sn.types.mdat,4);for(var H=!1,K=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY,W=0;W<c;W++){for(var Y=s[W],X=Y.units,$=0,Q=0,Z=X.length;Q<Z;Q++){var J=X[Q],tt=J.data,et=J.data.byteLength;G.setUint32(d,et),d+=4,B.set(tt,d),d+=et,$+=4+et}var rt=void 0;if(W<c-1)p=s[W+1].dts-Y.dts,rt=s[W+1].pts-Y.pts;else{var nt=this.config,it=W>0?Y.dts-s[W-1].dts:_;if(rt=W>0?Y.pts-s[W-1].pts:_,nt.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(nt.maxBufferHole*o),ot=(n?g+n*o:this.nextAudioPts)-Y.pts;ot>at?((p=ot-it)<0?p=it:H=!0,C.log("[mp4-remuxer]: It is approximately "+ot/90+" ms to the next segment; using duration "+p/90+" ms for the last video frame.")):p=it}else p=it}var st=Math.round(Y.pts-Y.dts);K=Math.min(K,p),q=Math.max(q,p),V=Math.min(V,rt),z=Math.max(z,rt),l.push(new Pn(Y.key,p,$,st))}if(l.length)if(kn){if(kn<70){var ut=l[0].flags;ut.dependsOn=2,ut.isNonSync=0}}else if(Ln&&z-V<q-K&&_/q<.025&&0===l[0].cts){C.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var lt=i,ct=0,ft=l.length;ct<ft;ct++){var ht=lt+l[ct].duration,dt=lt+l[ct].cts;if(ct<ft-1){var pt=ht+l[ct+1].cts;l[ct].duration=pt-dt}else l[ct].duration=ct?l[ct-1].duration:_;l[ct].cts=0,lt=ht}}p=H||!p?_:p,this.nextAvcDts=h=a+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;var gt={data1:Sn.moof(t.sequenceNumber++,i,u({},t,{samples:l})),data2:B,startPTS:g/o,endPTS:(v+p)/o,startDTS:i/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:t.dropped};return t.samples=[],t.dropped=0,gt},e.remuxAudio=function(t,e,r,n,i){var a=t.inputTimeScale,o=a/(t.samplerate?t.samplerate:a),s="aac"===t.segmentCodec?1024:1152,l=s*o,c=this._initPTS,f="mp3"===t.segmentCodec&&this.typeSupported.mpeg,h=[],d=void 0!==i,p=t.samples,g=f?0:8,v=this.nextAudioPts||-1,m=e*a,y=c.baseTime*a/c.timescale;if(this.isAudioContiguous=r=r||p.length&&v>0&&(n&&Math.abs(m-v)<9e3||Math.abs(xn(p[0].pts-y,m)-v)<20*l),p.forEach((function(t){t.pts=xn(t.pts-y,m)})),!r||v<0){if(p=p.filter((function(t){return t.pts>=0})),!p.length)return;v=0===i?0:n&&!d?Math.max(0,m):p[0].pts}if("aac"===t.segmentCodec)for(var b=this.config.maxAudioFramesDrift,E=0,T=v;E<p.length;E++){var _=p[E],k=_.pts,L=k-T,R=Math.abs(1e3*L/a);if(L<=-b*l&&d)0===E&&(C.warn("Audio frame @ "+(k/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*L/a)+" ms."),this.nextAudioPts=v=T=k);else if(L>=b*l&&R<1e4&&d){var x=Math.round(L/l);(T=k-x*l)<0&&(x--,T+=l),0===E&&(this.nextAudioPts=v=T),C.warn("[mp4-remuxer]: Injecting "+x+" audio frame @ "+(T/a).toFixed(3)+"s due to "+Math.round(1e3*L/a)+" ms gap.");for(var I=0;I<x;I++){var D=Math.max(T,0),P=Tn.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);P||(C.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=_.unit.subarray()),p.splice(E,0,{unit:P,pts:D}),T+=l,E++}}_.pts=T,T+=l}for(var O,M=null,F=null,N=0,U=p.length;U--;)N+=p[U].unit.byteLength;for(var B=0,j=p.length;B<j;B++){var G=p[B],H=G.unit,K=G.pts;if(null!==F)h[B-1].duration=Math.round((K-F)/o);else{if(r&&"aac"===t.segmentCodec&&(K=v),M=K,!(N>0))return;N+=g;try{O=new Uint8Array(N)}catch(t){return void this.observer.emit(w.ERROR,w.ERROR,{type:S.MUX_ERROR,details:A.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:N,reason:"fail allocating audio mdat "+N})}f||(new DataView(O.buffer).setUint32(0,N),O.set(Sn.types.mdat,4))}O.set(H,g);var V=H.byteLength;g+=V,h.push(new Pn(!0,s,V,0)),F=K}var q=h.length;if(q){var z=h[h.length-1];this.nextAudioPts=v=F+o*z.duration;var W=f?new Uint8Array(0):Sn.moof(t.sequenceNumber++,M/o,u({},t,{samples:h}));t.samples=[];var Y=M/a,X=v/a,$={data1:W,data2:O,startPTS:Y,endPTS:X,startDTS:Y,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:q};return this.isAudioContiguous=!0,$}},e.remuxEmptyAudio=function(t,e,r,n){var i=t.inputTimeScale,a=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,s=this._initDTS,u=9e4*s.baseTime/s.timescale,l=(null!==o?o:n.startDTS*i)+u,c=n.endDTS*i+u,f=1024*a,h=Math.ceil((c-l)/f),d=Tn.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(C.warn("[mp4-remuxer]: remux empty Audio"),d){for(var p=[],g=0;g<h;g++){var v=l+g*f;p.push({unit:d,pts:v,dts:v})}return t.samples=p,this.remuxAudio(t,e,r,!1)}C.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t}();function xn(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function Cn(t,e,r,n){var i=t.samples.length;if(i){for(var a=t.inputTimeScale,o=0;o<i;o++){var s=t.samples[o];s.pts=xn(s.pts-r.baseTime*a/r.timescale,e*a)/a,s.dts=xn(s.dts-n.baseTime*a/n.timescale,e*a)/a}var u=t.samples;return t.samples=[],{samples:u}}}function In(t,e,r){var n=t.samples.length;if(n){for(var i=t.inputTimeScale,a=0;a<n;a++){var o=t.samples[a];o.pts=xn(o.pts-9e4*r.baseTime/r.timescale,e*i)/i}t.samples.sort((function(t,e){return t.pts-e.pts}));var s=t.samples;return t.samples=[],{samples:s}}}var Dn,Pn=function(t,e,r,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=n,this.flags=new On(t)},On=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1},Mn=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndTime=null},e.resetNextTimestamp=function(){this.lastEndTime=null},e.resetInitSegment=function(t,e,r,n){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(function(t,e){if(!t||!e)return t;var r=e.keyId;return r&&e.isCommonEncryption&&Rt(t,["moov","trak"]).forEach((function(t){var e=Rt(t,["mdia","minf","stbl","stsd"])[0].subarray(8),n=Rt(e,["enca"]),i=n.length>0;i||(n=Rt(e,["encv"])),n.forEach((function(t){Rt(i?t.subarray(28):t.subarray(78),["sinf"]).forEach((function(t){var e=It(t);if(e){var n=e.subarray(8,24);n.some((function(t){return 0!==t}))||(C.log("[eme] Patching keyId in 'enc"+(i?"a":"v")+">sinf>>tenc' box: "+bt(n)+" -> "+bt(r)),e.set(r,8))}}))}))})),t}(t,n)),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Ct(t);e||(e=Fn(n.audio,N)),r||(r=Fn(n.video,U));var i={};n.audio&&n.video?i.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:n.audio?i.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:n.video?i.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:C.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i},e.remux=function(t,e,r,n,i,a){var o,s,u=this.initPTS,l=this.lastEndTime,c={audio:void 0,video:void 0,text:n,id3:r,initSegment:void 0};T(l)||(l=this.lastEndTime=i||0);var f=e.samples;if(null==f||!f.length)return c;var h={initPTS:void 0,timescale:1},d=this.initData;if(null!=(o=d)&&o.length||(this.generateInitSegment(f),d=this.initData),null==(s=d)||!s.length)return C.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var p=function(t,e){for(var r=0,n=0,i=0,a=Rt(t,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],u=Rt(s,["tfhd"])[0],l=e[_t(u,4)];if(l){var c=l.default,f=_t(u,0)|(null==c?void 0:c.flags),h=null==c?void 0:c.duration;8&f&&(h=_t(u,2&f?12:8));for(var d=l.timescale||9e4,p=Rt(s,["trun"]),g=0;g<p.length;g++)!(r=Dt(p[g]))&&h&&(r=h*_t(p[g],4)),l.type===U?n+=r/d:l.type===N&&(i+=r/d)}}if(0===n&&0===i){for(var v=0,m=Rt(t,["sidx"]),y=0;y<m.length;y++){var b=xt(m[y]);null!=b&&b.references&&(v+=b.references.reduce((function(t,e){return t+e.info.duration||0}),0))}return v}return n||i}(f,d),g=function(t,e){return Rt(e,["moof","traf"]).reduce((function(e,r){var n=Rt(r,["tfdt"])[0],i=n[0],a=Rt(r,["tfhd"]).reduce((function(e,r){var a=_t(r,4),o=t[a];if(o){var s=_t(n,4);if(1===i){if(s===Et)return C.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;s*=Et+1,s+=_t(n,8)}var u=s/(o.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)}(d,f),v=null===g?i:g;(function(t,e,r,n){if(null===t)return!0;var i=Math.max(n,1),a=e-t.baseTime/t.timescale;return Math.abs(a-r)>i}(u,v,i,p)||h.timescale!==u.timescale&&a)&&(h.initPTS=v-i,u&&1===u.timescale&&C.warn("Adjusting initPTS by "+(h.initPTS-u.baseTime)),this.initPTS=u={baseTime:h.initPTS,timescale:1});var m=t?v-u.baseTime/u.timescale:l,y=m+p;!function(t,e,r){Rt(e,["moof","traf"]).forEach((function(e){Rt(e,["tfhd"]).forEach((function(n){var i=_t(n,4),a=t[i];if(a){var o=a.timescale||9e4;Rt(e,["tfdt"]).forEach((function(t){var e=t[0],n=_t(t,4);if(0===e)n-=r*o,Lt(t,4,n=Math.max(n,0));else{n*=Math.pow(2,32),n+=_t(t,8),n-=r*o,n=Math.max(n,0);var i=Math.floor(n/(Et+1)),a=Math.floor(n%(Et+1));Lt(t,4,i),Lt(t,8,a)}}))}}))}))}(d,f,u.baseTime/u.timescale),p>0?this.lastEndTime=y:(C.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var b=!!d.audio,E=!!d.video,w="";b&&(w+="audio"),E&&(w+="video");var S={data1:f,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:w,hasAudio:b,hasVideo:E,nb:1,dropped:0};return c.audio="audio"===S.type?S:void 0,c.video="audio"!==S.type?S:void 0,c.initSegment=h,c.id3=Cn(r,i,u,u),n.samples.length&&(c.text=In(n,i,u)),c},t}();function Fn(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===U?"avc1.42e01e":"mp4a.40.5"}try{Dn=self.performance.now.bind(self.performance)}catch(t){C.debug("Unable to use Performance API on this environment"),Dn="undefined"!=typeof self&&self.Date.now}var Nn=[{demux:Zr,remux:Mn},{demux:dn,remux:Rn},{demux:$r,remux:Rn},{demux:En,remux:Rn}],Un=function(){function t(t,e,r,n,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=n,this.id=i}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,n){var i=this,a=r.transmuxing;a.executeStart=Dn();var o=new Uint8Array(t),s=this.currentTransmuxState,u=this.transmuxConfig;n&&(this.currentTransmuxState=n);var l=n||s,c=l.contiguous,f=l.discontinuity,h=l.trackSwitch,d=l.accurateTimeOffset,p=l.timeOffset,g=l.initSegmentChange,v=u.audioCodec,m=u.videoCodec,y=u.defaultInitPts,b=u.duration,E=u.initSegmentData,T=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(o,e);if(T&&"AES-128"===T.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(o,T.key.buffer,T.iv.buffer).then((function(t){var e=i.push(t,null,r);return i.decryptionPromise=null,e})),this.decryptionPromise;var k=_.softwareDecrypt(o,T.key.buffer,T.iv.buffer);if(r.part>-1&&(k=_.flush()),!k)return a.executeEnd=Dn(),Bn(r);o=new Uint8Array(k)}var L=this.needsProbing(f,h);if(L){var R=this.configureTransmuxer(o);if(R)return C.warn("[transmuxer] "+R.message),this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,fatal:!1,error:R,reason:R.message}),a.executeEnd=Dn(),Bn(r)}(f||h||g||L)&&this.resetInitSegment(E,v,m,b,e),(f||g||L)&&this.resetInitialTimestamp(y),c||this.resetContiguity();var x=this.transmux(o,T,p,d,r),I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,a.executeEnd=Dn(),x},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=Dn();var n=this.decrypter,i=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then((function(){return e.flush(t)}));var o=[],s=i.timeOffset;if(n){var u=n.flush();u&&o.push(this.push(u,null,t))}var l=this.demuxer,c=this.remuxer;if(!l||!c)return r.executeEnd=Dn(),[Bn(t)];var f=l.flush(s);return jn(f)?f.then((function(r){return e.flushRemux(o,r,t),o})):(this.flushRemux(o,f,t),o)},e.flushRemux=function(t,e,r){var n=e.audioTrack,i=e.videoTrack,a=e.id3Track,o=e.textTrack,s=this.currentTransmuxState,u=s.accurateTimeOffset,l=s.timeOffset;C.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var c=this.remuxer.remux(n,i,a,o,l,u,!0,this.id);t.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=Dn()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,n,i){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(t,e,r,n),o.resetInitSegment(t,e,r,i))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,n,i){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,n,i):this.transmuxUnencrypted(t,r,n,i)},e.transmuxUnencrypted=function(t,e,r,n){var i=this.demuxer.demux(t,e,!1,!this.config.progressive),a=i.audioTrack,o=i.videoTrack,s=i.id3Track,u=i.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,u,e,r,!1,this.id),chunkMeta:n}},e.transmuxSampleAes=function(t,e,r,n,i){var a=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,r,n,!1,a.id),chunkMeta:i}}))},e.configureTransmuxer=function(t){for(var e,r=this.config,n=this.observer,i=this.typeSupported,a=this.vendor,o=0,s=Nn.length;o<s;o++)if(Nn[o].demux.probe(t)){e=Nn[o];break}if(!e)return new Error("Failed to find demuxer by probing fragment data");var u=this.demuxer,l=this.remuxer,c=e.remux,f=e.demux;l&&l instanceof c||(this.remuxer=new c(n,r,i,a)),u&&u instanceof f||(this.demuxer=new f(n,r,i),this.probe=f.probe)},e.needsProbing=function(t,e){return!this.demuxer||!this.remuxer||t||e},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new Ar(this.config)),t},t}(),Bn=function(t){return{remuxResult:{},chunkMeta:t}};function jn(t){return"then"in t&&t.then instanceof Function}var Gn=function(t,e,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i||null},Hn=function(t,e,r,n,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=a},Kn={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,n,a,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,a||t,o),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,i,a,o){var s=r?r+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,a),!0;case 6:return c.fn.call(c.context,e,n,i,a,o),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,n,i){var a=r?r+t:t;if(!this._events[a])return this;if(!e)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==e||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s}(Kn);var Vn=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Kn.exports);function qn(t,e){if(!((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment))return!1;var r,n=[],i=e.remuxResult,a=i.audio,o=i.video;return a&&zn(n,a),o&&zn(n,o),t.postMessage({event:"transmuxComplete",data:e},n),!0}function zn(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function Wn(t,e,r){e.reduce((function(e,r){return qn(t,r)||e}),!1)||t.postMessage({event:"transmuxComplete",data:e[0]}),t.postMessage({event:"flush",data:r})}void 0!==s&&s&&function(t){var e=new Vn,r=function(e,r){t.postMessage({event:e,data:r})};e.on(w.FRAG_DECRYPTED,r),e.on(w.ERROR,r),t.addEventListener("message",(function(n){var i=n.data;switch(i.cmd){case"init":var a=JSON.parse(i.config);t.transmuxer=new Un(e,i.typeSupported,a,i.vendor,i.id),x(a.debug,i.id),function(){var t=function(t){C[t]=function(e){r("workerLog",{logType:t,message:e})}};for(var e in C)t(e)}(),r("init",null);break;case"configure":t.transmuxer.configure(i.config);break;case"demux":var o=t.transmuxer.push(i.data,i.decryptdata,i.chunkMeta,i.state);jn(o)?(t.transmuxer.async=!0,o.then((function(e){qn(t,e)})).catch((function(t){r(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,chunkMeta:i.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker push error"})}))):(t.transmuxer.async=!1,qn(t,o));break;case"flush":var s=i.chunkMeta,u=t.transmuxer.flush(s);jn(u)||t.transmuxer.async?(jn(u)||(u=Promise.resolve(u)),u.then((function(e){Wn(t,e,s)})).catch((function(t){r(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,chunkMeta:i.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker flush error"})}))):Wn(t,u,s)}}))}(self);var Yn=zt()||{isTypeSupported:function(){return!1}},Xn=function(){function t(t,e,r,n){var i=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var a=t.config;this.hls=t,this.id=e,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=r,this.onFlush=n;var s=function(t,e){(e=e||{}).frag=i.frag,e.id=i.id,t===w.ERROR&&(i.error=e.error),i.hls.trigger(t,e)};this.observer=new Vn,this.observer.on(w.FRAG_DECRYPTED,s),this.observer.on(w.ERROR,s);var u,l,c,f,h={mp4:Yn.isTypeSupported("video/mp4"),mpeg:Yn.isTypeSupported("audio/mpeg"),mp3:Yn.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(a.workerPath,0))this.transmuxer=new Un(this.observer,h,a,d,e);else try{a.workerPath?(C.log("loading Web Worker "+a.workerPath+' for "'+e+'"'),this.workerContext=(c=a.workerPath,f=new self.URL(c,self.location.href).href,{worker:new self.Worker(f),scriptURL:f})):(C.log('injecting Web Worker for "'+e+'"'),this.workerContext=(u=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+o.toString()+")(true);"],{type:"text/javascript"}),l=self.URL.createObjectURL(u),{worker:new self.Worker(l),objectURL:l})),this.onwmsg=function(t){return i.onWorkerMessage(t)};var p=this.workerContext.worker;p.addEventListener("message",this.onwmsg),p.onerror=function(t){var r=new Error(t.message+"  ("+t.filename+":"+t.lineno+")");a.enableWorker=!1,C.warn('Error in "'+e+'" Web Worker, fallback to inline'),i.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:A.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:r})},p.postMessage({cmd:"init",typeSupported:h,vendor:d,id:e,config:JSON.stringify(a)})}catch(t){C.warn('Error setting up "'+e+'" Web Worker, fallback to inline',t),this.resetWorker(),this.error=null,this.transmuxer=new Un(this.observer,h,a,d,e)}}var e=t.prototype;return e.resetWorker=function(){if(this.workerContext){var t=this.workerContext,e=t.worker,r=t.objectURL;r&&self.URL.revokeObjectURL(r),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}},e.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},e.push=function(t,e,r,n,i,a,o,s,u,l){var c,f,h=this;u.transmuxing.start=self.performance.now();var d=this.transmuxer,p=a?a.start:i.start,g=i.decryptdata,v=this.frag,m=!(v&&i.cc===v.cc),y=!(v&&u.level===v.level),b=v?u.sn-v.sn:-1,E=this.part?u.part-this.part.index:-1,T=0===b&&u.id>1&&u.id===(null==v?void 0:v.stats.chunkCount),w=!y&&(1===b||0===b&&(1===E||T&&E<=0)),S=self.performance.now();(y||b||0===i.stats.parsing.start)&&(i.stats.parsing.start=S),!a||!E&&w||(a.stats.parsing.start=S);var A=!(v&&(null==(c=i.initSegment)?void 0:c.url)===(null==(f=v.initSegment)?void 0:f.url)),_=new Hn(m,w,s,y,p,A);if(!w||m||A){C.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+p+"\n        initSegmentChange: "+A);var k=new Gn(r,n,e,o,l);this.configureTransmuxer(k)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:g,chunkMeta:u,state:_},t instanceof ArrayBuffer?[t]:[]);else if(d){var L=d.push(t,g,u,_);jn(L)?(d.async=!0,L.then((function(t){h.handleTransmuxComplete(t)})).catch((function(t){h.transmuxerError(t,u,"transmuxer-interface push error")}))):(d.async=!1,this.handleTransmuxComplete(L))}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(r){var n=r.flush(t);jn(n)||r.async?(jn(n)||(n=Promise.resolve(n)),n.then((function(r){e.handleFlushResult(r,t)})).catch((function(r){e.transmuxerError(r,t,"transmuxer-interface flush error")}))):this.handleFlushResult(n,t)}},e.transmuxerError=function(t,e,r){this.hls&&(this.error=t,this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_PARSING_ERROR,chunkMeta:e,fatal:!1,error:t,err:t,reason:r}))},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":var n,i=null==(n=this.workerContext)?void 0:n.objectURL;i&&self.URL.revokeObjectURL(i);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":C[e.data.logType]&&C[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}(),$n=function(){function t(t,e,r,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=n}var e=t.prototype;return e.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},e.poll=function(t,e){var r=this.config,n=this.media,i=this.stalled;if(null!==n){var a=n.currentTime,o=n.seeking,s=this.seeking&&!o,u=!this.seeking&&o;if(this.seeking=o,a===t){if(u||s)this.stalled=null;else if(!(n.paused&&!o||n.ended||0===n.playbackRate)&&gr.getBuffered(n).length){var l=gr.bufferInfo(n,a,0),c=l.len>0,f=l.nextStart||0;if(c||f){if(o){var h=l.len>2,d=!f||e&&e.start<=a||f-a>2&&!this.fragmentTracker.getPartialFragment(a);if(h||d)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,g=Math.max(f,l.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,m=(null==v||null==(p=v.details)?void 0:p.live)?2*v.details.targetduration:2,y=this.fragmentTracker.getPartialFragment(a);if(g>0&&(g<=m||y))return void this._trySkipBufferHole(y)}var b=self.performance.now();if(null!==i){var E=b-i;if(o||!(E>=250)||(this._reportStall(l),this.media)){var T=gr.bufferInfo(n,a,r.maxBufferHole);this._tryFixBufferStall(T,E)}}else this.stalled=b}}}else if(this.moved=!0,null!==i){if(this.stallReported){var w=self.performance.now()-i;C.warn("playback not stuck anymore @"+a+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},e._tryFixBufferStall=function(t,e){var r=this.config,n=this.fragmentTracker,i=this.media;if(null!==i){var a=i.currentTime,o=n.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;(t.len>r.maxBufferHole||t.nextStart&&t.nextStart-a<r.maxBufferHole)&&e>1e3*r.highBufferWatchdogPeriod&&(C.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},e._reportStall=function(t){var e=this.hls,r=this.media;if(!this.stallReported&&r){this.stallReported=!0;var n=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(t)+")");C.warn(n.message),e.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:t.len})}},e._trySkipBufferHole=function(t){var e=this.config,r=this.hls,n=this.media;if(null===n)return 0;var i=n.currentTime,a=gr.bufferInfo(n,i,0),o=i<a.start?a.start:a.nextStart;if(o){var s=a.len<=e.maxBufferHole,u=a.len>0&&a.len<1&&n.readyState<3,l=o-i;if(l>0&&(s||u)){if(l>e.maxBufferHole){var c=this.fragmentTracker,f=!1;if(0===i){var h=c.getAppendedFrag(0,de);h&&o<h.end&&(f=!0)}if(!f){var d=t||c.getAppendedFrag(i,de);if(d){for(var p=!1,g=d.end;g<o;){var v=c.getPartialFragment(g);if(!v){p=!0;break}g+=v.duration}if(p)return 0}}}var m=Math.max(o+.05,i+.1);if(C.warn("skipping hole, adjusting currentTime from "+i+" to "+m),this.moved=!0,this.stalled=null,n.currentTime=m,t&&!t.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+i+" to "+m);r.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:t})}return m}}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,n=this.nudgeRetry;if(null!==r){var i=r.currentTime;if(this.nudgeRetry++,n<t.nudgeMaxRetry){var a=i+(n+1)*t.nudgeOffset,o=new Error("Nudging 'currentTime' from "+i+" to "+a);C.warn(o.message),r.currentTime=a,e.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{var s=new Error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges");C.error(s.message),e.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_STALLED_ERROR,error:s,fatal:!0})}}},t}(),Qn=function(t){function e(e,r,n){var i;return(i=t.call(this,e,r,n,"[stream-controller]",de)||this).audioCodecSwap=!1,i.gapController=null,i.level=-1,i._forceStartLoad=!1,i.altAudio=!1,i.audioOnly=!1,i.fragPlaying=null,i.onvplaying=null,i.onvseeked=null,i.fragLastKbps=0,i.couldBacktrack=!1,i.backtrackFragment=null,i.audioCodecSwitch=!1,i.videoBuffer=null,i._registerListeners(),i}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(w.ERROR,this.onError,this),t.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this),t.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(w.ERROR,this.onError,this),t.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this),t.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},r.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},r.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth&&this.levels.length>1?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=kr,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=_r},r.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case Fr:var t,e=this.levels,r=this.level,n=null==e||null==(t=e[r])?void 0:t.details;if(n&&(!n.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(n))break;this.state=kr;break}break;case xr:var i,a=self.performance.now(),o=this.retryDate;(!o||a>=o||null!=(i=this.media)&&i.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=kr)}this.state===kr&&this.doTickIdle(),this.onTickEnd()},r.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},r.doTickIdle=function(){var t=this.hls,e=this.levelLastLoaded,r=this.levels,n=this.media,i=t.config,a=t.nextLoadLevel;if(null!==e&&(n||!this.startFragRequested&&i.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&null!=r&&r[a]){var o=r[a],s=this.getMainFwdBufferInfo();if(null!==s){var u=this.getLevelDetails();if(u&&this._streamEnded(s,u)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(w.BUFFER_EOS,l),void(this.state=Pr)}t.loadLevel!==a&&-1===t.manualLevel&&this.log("Adapting to level "+a+" from level "+this.level),this.level=t.nextLoadLevel=a;var c=o.details;if(!c||this.state===Fr||c.live&&this.levelLastLoaded!==a)return this.level=a,void(this.state=Fr);var f=s.len,h=this.getMaxBufferLength(o.maxBitrate);if(!(f>=h)){this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);var d=this.backtrackFragment?this.backtrackFragment.start:s.end,p=this.getNextFragment(d,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&"initSegment"!==p.sn&&this.fragmentTracker.getState(p)!==nr){var g,v=(null!=(g=this.backtrackFragment)?g:p).sn-c.startSN,m=c.fragments[v-1];m&&p.cc===m.cc&&(p=m,this.fragmentTracker.removeFragment(m))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,d)){if(!p.gap){var y=this.audioOnly&&!this.altAudio?N:U,b=(y===U?this.videoBuffer:this.mediaBuffer)||this.media;b&&this.afterBufferFlushed(b,y,de)}p=this.getNextFragmentLoopLoading(p,c,s,de,h)}p&&(!p.initSegment||p.initSegment.data||this.bitrateTest||(p=p.initSegment),this.loadFragment(p,o,d))}}}},r.loadFragment=function(e,r,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===tr||i===rr?"initSegment"===e.sn?this._loadInitSegment(e,r):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,r)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,n)):this.clearTrackerIfNeeded(e)},r.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,de)},r.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},r.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,n=this.getAppendedFrag(e.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);var i=this.getLevelDetails();if(null!=i&&i.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*i.targetduration)return}if(!e.paused&&t){var o=t[this.hls.nextLoadLevel],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*o.maxBitrate/(1e3*s)+1:0}else r=0;var u=this.getBufferedFrag(e.currentTime+r);if(u){var l=this.followingBufferedFrag(u);if(l){this.abortCurrentFrag();var c=l.maxStartPTS?l.maxStartPTS:l.start,f=l.duration,h=Math.max(u.end,c+Math.min(Math.max(f-this.config.maxFragLookUpTolerance,.5*f),.75*f));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}},r.abortCurrentFrag=function(){var t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Lr:case Rr:case xr:case Ir:case Dr:this.state=kr}this.nextLoadPosition=this.getLoadPosition()},r.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},r.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var n=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new $n(this.config,n,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},r.onMediaPlaying=function(){this.tick()},r.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;T(e)&&this.log("Media seeked to "+e.toFixed(3));var r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(r?r.len:"empty")+")")},r.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(w.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},r.onManifestParsed=function(t,e){var r,n,i,a=!1,o=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(a=!0),-1!==r.indexOf("mp4a.40.5")&&(o=!0))})),this.audioCodecSwitch=a&&o&&!("function"==typeof(null==(i=Ur())||null==(n=i.prototype)?void 0:n.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},r.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===kr){var n=r[e.level];(!n.details||n.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(n.details))&&(this.state=Fr)}},r.onLevelLoaded=function(t,e){var r,n=this.levels,i=e.level,a=e.details,o=a.totalduration;if(n){this.log("Level "+i+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+", cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=n[i],u=this.fragCurrent;!u||this.state!==Rr&&this.state!==xr||u.level===e.level&&u.urlId===s.urlId||!u.loader||this.abortCurrentFrag();var l=0;if(a.live||null!=(r=s.details)&&r.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;l=this.alignPlaylists(a,s.details)}if(s.details=a,this.levelLastLoaded=i,this.hls.trigger(w.LEVEL_UPDATED,{details:a,level:i}),this.state===Fr){if(this.waitForCdnTuneIn(a))return;this.state=kr}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,l),this.tick()}else this.warn("Levels were reset while loading level "+i)},r._handleFragmentLoadProgress=function(t){var e,r=t.frag,n=t.part,i=t.payload,a=this.levels;if(a){var o=a[r.level],s=o.details;if(!s)return this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset"),void this.fragmentTracker.removeFragment(r);var u=o.videoCodec,l=s.PTSKnown||!s.live,c=null==(e=r.initSegment)?void 0:e.data,f=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new Xn(this.hls,de,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),d=n?n.index:-1,p=-1!==d,g=new vr(r.level,r.sn,r.stats.chunkCount,i.byteLength,d,p),v=this.initPTS[r.cc];h.push(i,c,f,u,r,n,s.totalduration,l,g,v)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r.onAudioTrackSwitching=function(t,e){var r=this.altAudio;if(!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n&&(this.log("Switching to main audio track, cancel main fragment load"),n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var i=this.hls;r&&(i.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(w.AUDIO_TRACK_SWITCHED,e)}},r.onAudioTrackSwitched=function(t,e){var r=e.id,n=!!this.hls.audioTracks[r].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},r.onBufferCreated=function(t,e){var r,n,i=e.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(n=o,r=s,"video"===o){var u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},r.onFragBuffered=function(t,e){var r=e.frag,n=e.part;if(!r||r.type===de){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Dr&&(this.state=kr));var i=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}},r.onError=function(t,e){var r;if(e.fatal)this.state=Or;else switch(e.details){case A.FRAG_GAP:case A.FRAG_PARSING_ERROR:case A.FRAG_DECRYPT_ERROR:case A.FRAG_LOAD_ERROR:case A.FRAG_LOAD_TIMEOUT:case A.KEY_LOAD_ERROR:case A.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(de,e);break;case A.LEVEL_LOAD_ERROR:case A.LEVEL_LOAD_TIMEOUT:case A.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==Fr||(null==(r=e.context)?void 0:r.type)!==ce||(this.state=kr);break;case A.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case A.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}},r.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){if(this.loadedmetadata||!gr.getBuffered(t).length){var r=this.state!==kr?this.fragCurrent:null;e.poll(this.lastCurrentTime,r)}this.lastCurrentTime=t.currentTime}},r.onFragLoadEmergencyAborted=function(){this.state=kr,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},r.onBufferFlushed=function(t,e){var r=e.type;if(r!==N||this.audioOnly&&!this.altAudio){var n=(r===U?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,r,de)}},r.onLevelsUpdated=function(t,e){this.levels=e.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.seekToStartPos=function(){var t=this.media;if(t){var e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void this.log("could not seek to "+r+", already seeking at "+e);var n=gr.getBuffered(t),i=(n.length?n.start(0):0)-r;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+i+" to match buffer start"),r+=i,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}}},r._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},r._loadBitrateTestFrag=function(t,e){var r=this;t.bitrateTest=!0,this._doFragLoad(t,e).then((function(n){var i=r.hls;if(n&&!r.fragContextChanged(t)){e.fragmentError=0,r.state=kr,r.startFragRequested=!1,r.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(w.FRAG_LOADED,n),t.bitrateTest=!1}}))},r._handleTransmuxComplete=function(t){var e,r="main",n=this.hls,i=t.remuxResult,a=t.chunkMeta,o=this.getCurrentContext(a);if(o){var s=o.frag,u=o.part,l=o.level,c=i.video,f=i.text,h=i.id3,d=i.initSegment,p=l.details,g=this.altAudio?void 0:i.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=Ir,d){if(null!=d&&d.tracks){var v=s.initSegment||s;this._bufferInitSegment(l,d.tracks,v,a),n.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:d.tracks})}var m=d.initPTS,y=d.timescale;T(m)&&(this.initPTS[s.cc]={baseTime:m,timescale:y},n.trigger(w.INIT_PTS_FOUND,{frag:s,id:r,initPTS:m,timescale:y}))}if(c&&!1!==i.independent){if(p){var b=c.startPTS,E=c.endPTS,S=c.startDTS,A=c.endDTS;if(u)u.elementaryStreams[c.type]={startPTS:b,endPTS:E,startDTS:S,endDTS:A};else if(c.firstKeyFrame&&c.independent&&1===a.id&&(this.couldBacktrack=!0),c.dropped&&c.independent){var _=this.getMainFwdBufferInfo();if((_?_.end:this.getLoadPosition())+this.config.maxBufferHole<(c.firstKeyFramePTS?c.firstKeyFramePTS:b)-this.config.maxBufferHole)return void this.backtrack(s);s.setElementaryStreamInfo(c.type,s.start,E,s.start,A,!0)}s.setElementaryStreamInfo(c.type,b,E,S,A),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(c,s,u,a)}}else if(!1===i.independent)return void this.backtrack(s);if(g){var k=g.startPTS,L=g.endPTS,R=g.startDTS,x=g.endDTS;u&&(u.elementaryStreams[N]={startPTS:k,endPTS:L,startDTS:R,endDTS:x}),s.setElementaryStreamInfo(N,k,L,R,x),this.bufferFragmentData(g,s,u,a)}if(p&&null!=h&&null!=(e=h.samples)&&e.length){var C={id:r,frag:s,details:p,samples:h.samples};n.trigger(w.FRAG_PARSING_METADATA,C)}if(p&&f){var I={id:r,frag:s,details:p,samples:f.samples};n.trigger(w.FRAG_PARSING_USERDATA,I)}}}else this.resetWhenMissingContext(a)},r._bufferInitSegment=function(t,e,r,n){var i=this;if(this.state===Ir){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var a=e.audio,o=e.video,s=e.audiovideo;if(a){var u=t.audioCodec,l=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===l.indexOf("firefox")&&(u="mp4a.40.5")),-1!==l.indexOf("android")&&"audio/mpeg"!==a.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),t.audioCodec&&t.audioCodec!==u&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+u+'"'),a.levelCodec=u,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(t.audioCodec||"")+"/"+a.codec+"]")}o&&(o.levelCodec=t.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var a=e[t].initSegment;null!=a&&a.byteLength&&i.hls.trigger(w.BUFFER_APPENDING,{type:t,data:a,frag:r,part:null,chunkMeta:n,parent:r.type})})),this.tick()}},r.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,de)},r.backtrack=function(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=kr},r.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(gr.isBuffered(t,r)?e=this.getAppendedFrag(r):gr.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){this.backtrackFragment=null;var n=this.fragPlaying,i=e.level;n&&e.sn===n.sn&&n.level===i&&e.urlId===n.urlId||(this.fragPlaying=e,this.hls.trigger(w.FRAG_CHANGED,{frag:e}),n&&n.level===i||this.hls.trigger(w.LEVEL_SWITCHED,{level:i}))}}},n(e,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:function(){var t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}},{key:"currentProgramDateTime",get:function(){var t=this.media;if(t){var e=t.currentTime,r=this.currentFrag;if(r&&T(e)&&T(r.programDateTime)){var n=r.programDateTime+1e3*(e-r.start);return new Date(n)}}return null}},{key:"currentLevel",get:function(){var t=this.currentFrag;return t?t.level:-1}},{key:"nextBufferedFrag",get:function(){var t=this.currentFrag;return t?this.followingBufferedFrag(t):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(Nr),Zn=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),Jn=function(){function t(t,e,r,n){void 0===n&&(n=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Zn(t),this.fast_=new Zn(e),this.defaultTTFB_=n,this.ttfb_=new Zn(t)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,n=this.fast_,i=this.ttfb_;r.halfLife!==t&&(this.slow_=new Zn(t,r.getEstimate(),r.getTotalWeight())),n.halfLife!==e&&(this.fast_=new Zn(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.ttfb_=new Zn(t,i.getEstimate(),i.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,n=8*e/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.sampleTTFB=function(t){var e=t/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(r,Math.max(t,5))},e.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},e.destroy=function(){},t}(),ti=function(){function t(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new Jn(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(w.FRAG_LOADING,this.onFragLoading,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this)},e.unregisterListeners=function(){var t=this.hls;t.off(w.FRAG_LOADING,this.onFragLoading,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this)},e.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},e.onFragLoading=function(t,e){var r,n=e.frag;this.ignoreFragment(n)||(this.fragCurrent=n,this.partCurrent=null!=(r=e.part)?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},e.onLevelSwitching=function(t,e){this.clearTimer()},e.getTimeToLoadFrag=function(t,e,r,n){return t+r/e+(n?this.lastLevelLoadSec:0)},e.onLevelLoaded=function(t,e){var r=this.hls.config,n=e.stats,i=n.total,a=n.bwEstimate;T(i)&&T(a)&&(this.lastLevelLoadSec=8*i/a),e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},e._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,n=r.autoLevelEnabled,i=r.media;if(t&&i){var a=performance.now(),o=e?e.stats:t.stats,s=e?e.duration:t.duration,u=a-o.loading.start;if(o.aborted||o.loaded&&o.loaded===o.total||0===t.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(n&&!i.paused&&i.playbackRate&&i.readyState){var l=r.mainForwardBufferInfo;if(null!==l){var c=this.bwEstimator.getEstimateTTFB(),f=Math.abs(i.playbackRate);if(!(u<=Math.max(c,s/(2*f)*1e3))){var h=l.len/f;if(!(h>=2*s/f)){var d=o.loading.first?o.loading.first-o.loading.start:-1,p=o.loaded&&d>-1,g=this.bwEstimator.getEstimate(),v=r.levels,m=r.minAutoLevel,y=v[t.level],b=o.total||Math.max(o.loaded,Math.round(s*y.maxBitrate/8)),E=u-d;E<1&&p&&(E=Math.min(u,8*o.loaded/g));var S=p?1e3*o.loaded/E:0,A=S?(b-o.loaded)/S:8*b/g+c/1e3;if(!(A<=h)){var _,k=S?8*S:g,L=Number.POSITIVE_INFINITY;for(_=t.level-1;_>m;_--){var R=v[_].maxBitrate;if((L=this.getTimeToLoadFrag(c/1e3,k,s*R,!v[_].details))<h)break}L>=A||L>10*s||(r.nextLoadLevel=_,p?this.bwEstimator.sample(u-Math.min(c,d),o.loaded):this.bwEstimator.sampleTTFB(u),this.clearTimer(),C.warn("[abr] Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly;\n      Time to underbuffer: "+h.toFixed(3)+" s\n      Estimated load time for current fragment: "+A.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+L.toFixed(3)+" s\n      TTFB estimate: "+d+"\n      Current BW estimate: "+(T(g)?(g/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+_),t.loader&&(this.fragCurrent=this.partCurrent=null,t.abortRequests()),r.trigger(w.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:o}))}}}}}}},e.onFragLoaded=function(t,e){var r=e.frag,n=e.part,i=n?n.stats:r.stats;if(r.type===de&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var a=n?n.duration:r.duration,o=this.hls.levels[r.level],s=(o.loaded?o.loaded.bytes:0)+i.loaded,u=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:u},o.realBitrate=Math.round(8*s/u)}if(r.bitrateTest){var l={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(w.FRAG_BUFFERED,l),r.bitrateTest=!1}}},e.onFragBuffered=function(t,e){var r=e.frag,n=e.part,i=null!=n&&n.stats.loaded?n.stats:r.stats;if(!i.aborted&&!this.ignoreFragment(r)){var a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},e.ignoreFragment=function(t){return t.type!==de||"initSegment"===t.sn},e.clearTimer=function(){self.clearInterval(this.timer)},e.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,n=r.maxAutoLevel,i=r.config,a=r.minAutoLevel,o=r.media,s=e?e.duration:t?t.duration:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,l=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,c=r.mainForwardBufferInfo,f=(c?c.len:0)/u,h=this.findBestLevel(l,a,n,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(h>=0)return h;C.trace("[abr] "+(f?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var d=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(!f){var v=this.bitrateTestDelay;v&&(d=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-v,C.trace("[abr] bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*d)+" ms"),p=g=1)}return h=this.findBestLevel(l,a,n,f+d,p,g),Math.max(h,0)},e.findBestLevel=function(t,e,r,n,i,a){for(var o,s=this.fragCurrent,u=this.partCurrent,l=this.lastLoadedFragLevel,c=this.hls.levels,f=c[l],h=!(null==f||null==(o=f.details)||!o.live),d=null==f?void 0:f.codecSet,p=u?u.duration:s?s.duration:0,g=this.bwEstimator.getEstimateTTFB()/1e3,v=e,m=-1,y=r;y>=e;y--){var b=c[y];if(!b||d&&b.codecSet!==d)b&&(v=Math.min(y,v),m=Math.max(y,m));else{-1!==m&&C.trace("[abr] Skipped level(s) "+v+"-"+m+' with CODECS:"'+c[m].attrs.CODECS+'"; not compatible with "'+f.attrs.CODECS+'"');var E,w=b.details,S=(u?null==w?void 0:w.partTarget:null==w?void 0:w.averagetargetduration)||p;E=y<=l?i*t:a*t;var A=c[y].maxBitrate,_=this.getTimeToLoadFrag(g,E,A*S,void 0===w);if(C.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(E-A)+" avgDuration:"+S.toFixed(1)+" maxFetchDuration:"+n.toFixed(1)+" fetchDuration:"+_.toFixed(1)),E>A&&(0===_||!T(_)||h&&!this.bitrateTestDelay||_<n))return y}}return-1},n(t,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(-1!==t&&!e.canEstimate())return t;var r=this.getNextABRAutoLevel();if(-1!==t){var n=this.hls.levels;if(n.length>Math.max(t,r)&&n[t].loadError<=n[r].loadError)return t}return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}]),t}(),ei=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),n=0,i=0;i<t.length;i++){var a=t[i];r.set(a,n),n+=a.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}(),ri=function(t){function r(e,r,n){var i;return(i=t.call(this,e,r,n,"[audio-stream-controller]",pe)||this).videoBuffer=null,i.videoTrackCC=-1,i.waitingVideoCC=-1,i.bufferedTrack=null,i.switchingTrack=null,i.trackId=-1,i.waitingData=null,i.mainDetails=null,i.bufferFlushed=!1,i.cachedTrackLoadedData=null,i._registerListeners(),i}l(r,t);var n=r.prototype;return n.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},n._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(w.ERROR,this.onError,this),t.on(w.BUFFER_RESET,this.onBufferReset,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this),t.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(w.ERROR,this.onError,this),t.off(w.BUFFER_RESET,this.onBufferReset,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this),t.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},n.onInitPtsFound=function(t,e){var r=e.frag,n=e.id,i=e.initPTS,a=e.timescale;if("main"===n){var o=r.cc;this.initPTS[r.cc]={baseTime:i,timescale:a},this.log("InitPTS for cc: "+o+" found from main: "+i),this.videoTrackCC=o,this.state===Mr&&this.tick()}},n.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=_r);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e,this.state=kr):(this.loadedmetadata=!1,this.state=Cr),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},n.doTick=function(){switch(this.state){case kr:this.doTickIdle();break;case Cr:var e,r=this.levels,n=this.trackId,i=null==r||null==(e=r[n])?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=Mr}break;case xr:var a,o=performance.now(),s=this.retryDate;(!s||o>=s||null!=(a=this.media)&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=kr);break;case Mr:var u=this.waitingData;if(u){var l=u.frag,c=u.part,f=u.cache,h=u.complete;if(void 0!==this.initPTS[l.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Rr;var d={frag:l,part:c,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(d),h&&t.prototype._handleFragmentLoadComplete.call(this,d)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+l.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var p=this.getLoadPosition(),g=gr.bufferInfo(this.mediaBuffer,p,this.config.maxBufferHole);ze(g.end,this.config.maxFragLookUpTolerance,l)<0&&(this.log("Waiting fragment cc ("+l.cc+") @ "+l.start+" cancelled because another fragment at "+g.end+" is needed"),this.clearWaitingFragment())}}else this.state=kr}this.onTickEnd()},n.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=kr)},n.resetLoadingState=function(){this.clearWaitingFragment(),t.prototype.resetLoadingState.call(this)},n.onTickEnd=function(){var t=this.media;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)},n.doTickIdle=function(){var t=this.hls,e=this.levels,r=this.media,n=this.trackId,i=t.config;if(null!=e&&e[n]&&(r||!this.startFragRequested&&i.startFragPrefetch)){var a=e[n],o=a.details;if(!o||o.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(o))this.state=Cr;else{var s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,N,pe));var u=this.getFwdBufferInfo(s,pe);if(null!==u){var l=this.bufferedTrack,c=this.switchingTrack;if(!c&&this._streamEnded(u,o))return t.trigger(w.BUFFER_EOS,{type:"audio"}),void(this.state=Pr);var f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,de),h=u.len,d=this.getMaxBufferLength(null==f?void 0:f.len);if(!(h>=d)||c){var p=o.fragments[0].start,g=u.end;if(c&&r){var v=this.getLoadPosition();l&&c.attrs!==l.attrs&&(g=v),o.PTSKnown&&v<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}var m=this.getNextFragment(g,o),y=!1;if(m&&this.isLoopLoading(m,g)&&(y=!!m.gap,m=this.getNextFragmentLoopLoading(m,o,u,de,d)),m){var b=f&&m.start>f.end+o.targetduration;if(b||(null==f||!f.len)&&u.len){var E=this.getAppendedFrag(m.start,de);if(null===E)return;if(y||(y=!!E.gap||!!b&&0===f.len),b&&!y||y&&u.nextStart&&u.nextStart<E.end)return}this.loadFragment(m,a,g)}else this.bufferFlushed=!0}}}}},n.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(r,e),this.config.maxMaxBufferLength):r},n.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},n.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new De(t)}))},n.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var n=this.fragCurrent;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=e,this.state=kr):(this.switchingTrack=null,this.bufferedTrack=e,this.state=_r),this.tick()},n.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},n.onLevelLoaded=function(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(w.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},n.onAudioTrackLoaded=function(t,e){var r;if(null!=this.mainDetails){var n=this.levels,i=e.details,a=e.id;if(n){this.log("Track "+a+" loaded ["+i.startSN+","+i.endSN+"]"+(i.lastPartSn?"[part-"+i.lastPartSn+"-"+i.lastPartIndex+"]":"")+",duration:"+i.totalduration);var o=n[a],s=0;if(i.live||null!=(r=o.details)&&r.live){var u=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!u)return;!o.details&&i.hasProgramDateTime&&u.hasProgramDateTime?(Er(i,u),s=i.fragments[0].start):s=this.alignPlaylists(i,o.details)}o.details=i,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(o.details,s),this.state!==Cr||this.waitForCdnTuneIn(i)||(this.state=kr),this.tick()}else this.warn("Audio tracks were reset while loading level "+a)}else this.cachedTrackLoadedData=e},n._handleFragmentLoadProgress=function(t){var e,r=t.frag,n=t.part,i=t.payload,a=this.config,o=this.trackId,s=this.levels;if(s){var u=s[o];if(u){var l=u.details;if(!l)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);var c=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2",f=this.transmuxer;f||(f=this.transmuxer=new Xn(this.hls,pe,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var h=this.initPTS[r.cc],d=null==(e=r.initSegment)?void 0:e.data;if(void 0!==h){var p=n?n.index:-1,g=-1!==p,v=new vr(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,g);f.push(i,d,c,"",r,n,l.totalduration,!1,v,h)}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+l.startSN+" ,"+l.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:r,part:n,cache:new ei,complete:!1}).cache.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=Mr}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},n._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)},n.onFragBuffered=function(t,r){var n=r.frag,i=r.part;if(n.type===pe)if(this.fragContextChanged(n))this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==n.sn){this.fragPrevious=n;var a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(w.AUDIO_TRACK_SWITCHED,e({},a)))}this.fragBufferedComplete(n,i)}else if(!this.loadedmetadata&&n.type===de){var o=this.videoBuffer||this.media;o&&gr.getBuffered(o).length&&(this.loadedmetadata=!0)}},n.onError=function(e,r){var n;if(r.fatal)this.state=Or;else switch(r.details){case A.FRAG_GAP:case A.FRAG_PARSING_ERROR:case A.FRAG_DECRYPT_ERROR:case A.FRAG_LOAD_ERROR:case A.FRAG_LOAD_TIMEOUT:case A.KEY_LOAD_ERROR:case A.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(pe,r);break;case A.AUDIO_TRACK_LOAD_ERROR:case A.AUDIO_TRACK_LOAD_TIMEOUT:case A.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==Cr||(null==(n=r.context)?void 0:n.type)!==fe||(this.state=kr);break;case A.BUFFER_FULL_ERROR:if(!r.parent||"audio"!==r.parent)return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case A.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},n.onBufferFlushed=function(t,e){e.type===N&&(this.bufferFlushed=!0,this.state===Pr&&(this.state=kr))},n._handleTransmuxComplete=function(t){var e,r="audio",n=this.hls,i=t.remuxResult,a=t.chunkMeta,o=this.getCurrentContext(a);if(o){var s=o.frag,l=o.part,c=o.level.details,f=i.audio,h=i.text,d=i.id3,p=i.initSegment;if(!this.fragContextChanged(s)&&c){if(this.state=Ir,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){var g=s.initSegment||s;this._bufferInitSegment(p.tracks,g,a),n.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:r,tracks:p.tracks})}if(f){var v=f.startPTS,m=f.endPTS,y=f.startDTS,b=f.endDTS;l&&(l.elementaryStreams[N]={startPTS:v,endPTS:m,startDTS:y,endDTS:b}),s.setElementaryStreamInfo(N,v,m,y,b),this.bufferFragmentData(f,s,l,a)}if(null!=d&&null!=(e=d.samples)&&e.length){var E=u({id:r,frag:s,details:c},d);n.trigger(w.FRAG_PARSING_METADATA,E)}if(h){var T=u({id:r,frag:s,details:c},h);n.trigger(w.FRAG_PARSING_USERDATA,T)}}else this.fragmentTracker.removeFragment(s)}else this.resetWhenMissingContext(a)},n._bufferInitSegment=function(t,e,r){if(this.state===Ir){t.video&&delete t.video;var n=t.audio;if(n){n.levelCodec=n.codec,n.id="audio",this.log("Init audio buffer, container:"+n.container+", codecs[parsed]=["+n.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,t);var i=n.initSegment;if(null!=i&&i.byteLength){var a={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:i};this.hls.trigger(w.BUFFER_APPENDING,a)}this.tick()}}},n.loadFragment=function(e,r,n){var i,a=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||a===tr||a===rr?"initSegment"===e.sn?this._loadInitSegment(e,r):null!=(i=r.details)&&i.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Mr):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,n)):this.clearTrackerIfNeeded(e)},n.completeAudioSwitch=function(r){var n=this.hls,i=this.media,a=this.bufferedTrack,o=null==a?void 0:a.attrs,s=r.attrs;i&&o&&(o.CHANNELS!==s.CHANNELS||o.NAME!==s.NAME||o.LANGUAGE!==s.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=r,this.switchingTrack=null,n.trigger(w.AUDIO_TRACK_SWITCHED,e({},r))},r}(Nr),ni=function(t){function r(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}l(r,t);var i=r.prototype;return i.registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(w.ERROR,this.onError,this)},i.unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(w.ERROR,this.onError,this)},i.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,t.prototype.destroy.call(this)},i.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},i.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},i.onAudioTrackLoaded=function(t,e){var r=e.id,n=e.groupId,i=e.details,a=this.tracksInGroup[r];if(a&&a.groupId===n){var o=a.details;a.details=e.details,this.log("audio-track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,o)}else this.warn("Track with id:"+r+" and group:"+n+" not found in active group "+a.groupId)},i.onLevelLoading=function(t,e){this.switchLevel(e.level)},i.onLevelSwitching=function(t,e){this.switchLevel(e.level)},i.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r||null;var n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!n.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=n;var i={audioTracks:n};this.log("Updating audio tracks, "+n.length+" track(s) found in group:"+r),this.hls.trigger(w.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}},i.onError=function(t,e){!e.fatal&&e.context&&e.context.type===fe&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(e))},i.setAudioTrack=function(t){var r=this.tracksInGroup;if(t<0||t>=r.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=this.currentTrack;r[this.trackId];var i=r[t],a=i.groupId,o=i.name;if(this.log("Switching to audio-track "+t+' "'+o+'" lang:'+i.lang+" group:"+a),this.trackId=t,this.currentTrack=i,this.selectDefaultTrack=!1,this.hls.trigger(w.AUDIO_TRACK_SWITCHING,e({},i)),!i.details||i.details.live){var s=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(s)}}},i.selectInitialTrack=function(){var t=this.tracksInGroup,e=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==e)this.setAudioTrack(e);else{var r=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+t.length);this.warn(r.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:r})}},i.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var n=e[r];if(!this.selectDefaultTrack||n.default){if(!t||void 0!==t.attrs["STABLE-RENDITION-ID"]&&t.attrs["STABLE-RENDITION-ID"]===n.attrs["STABLE-RENDITION-ID"])return n.id;if(t.name===n.name&&t.lang===n.lang)return n.id}}return-1},i.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var n=r.id,i=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist "+n+' "'+r.name+'" lang:'+r.lang+" group:"+i),this.clearTimer(),this.hls.trigger(w.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},n(r,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),r}($e);function ii(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!ai(t[r].attrs,e[r].attrs))return!1;return!0}function ai(t,e){var r=t["STABLE-RENDITION-ID"];return r?r===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(r){return t[r]!==e[r]}))}var oi=function(t){function e(e,r,n){var i;return(i=t.call(this,e,r,n,"[subtitle-stream-controller]",ge)||this).levels=[],i.currentTrackId=-1,i.tracksBuffered=[],i.mainDetails=null,i._registerListeners(),i}l(e,t);var r=e.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.ERROR,this.onError,this),t.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.ERROR,this.onError,this),t.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},r.startLoad=function(t){this.stopLoad(),this.state=kr,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},r.onMediaDetaching=function(){this.tracksBuffered=[],t.prototype.onMediaDetaching.call(this)},r.onLevelLoaded=function(t,e){this.mainDetails=e.details},r.onSubtitleFragProcessed=function(t,e){var r=e.frag,n=e.success;if(this.fragPrevious=r,this.state=kr,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=r.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var u=r.start+r.duration;a?a.end=u:(a={start:o,end:u},i.push(a)),this.fragmentTracker.fragBuffered(r)}}},r.onBufferFlushing=function(t,e){var r=e.startOffset,n=e.endOffset;if(0===r&&n!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=n-a[i].details.targetduration;if(o<=0)return;e.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=o)t.shift();else{if(!(t[e].start<o))break;t[e].start=o,e++}})),this.fragmentTracker.removeFragmentsInRange(r,o,ge)}},r.onFragBuffered=function(t,e){var r;this.loadedmetadata||e.frag.type!==de||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)},r.onError=function(t,e){var r=e.frag;(null==r?void 0:r.type)===ge&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==_r&&(this.state=kr))},r.onSubtitleTracksUpdated=function(t,e){var r=this,n=e.subtitleTracks;ii(this.levels,n)?this.levels=n.map((function(t){return new De(t)})):(this.tracksBuffered=[],this.levels=n.map((function(t){var e=new De(t);return r.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ge),this.fragPrevious=null,this.mediaBuffer=null)},r.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(t,e){var r,n=e.details,i=e.id,a=this.currentTrackId,o=this.levels;if(o.length){var s=o[a];if(!(i>=o.length||i!==a)&&s){this.mediaBuffer=this.mediaBufferTimeRanges;var u=0;if(n.live||null!=(r=s.details)&&r.live){var l=this.mainDetails;if(n.deltaUpdateFailed||!l)return;var c=l.fragments[0];s.details?0===(u=this.alignPlaylists(n,s.details))&&c&&Fe(n,u=c.start):n.hasProgramDateTime&&l.hasProgramDateTime?(Er(n,l),u=n.fragments[0].start):c&&Fe(n,u=c.start)}s.details=n,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(s.details,u),this.tick(),n.live&&!this.fragCurrent&&this.media&&this.state===kr&&(qe(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0))}}},r._handleFragmentLoadComplete=function(t){var e=this,r=t.frag,n=t.payload,i=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var o=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch((function(t){throw a.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:r}),t})).then((function(t){var e=performance.now();a.trigger(w.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:o,tdecrypt:e}})})).catch((function(t){e.warn(t.name+": "+t.message),e.state=kr}))}},r.doTick=function(){if(this.media){if(this.state===kr){var t=this.currentTrackId,e=this.levels,r=e[t];if(!e.length||!r||!r.details)return;var n=r.details,i=n.targetduration,a=this.config,o=this.getLoadPosition(),s=gr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o-i,a.maxBufferHole),u=s.end,l=s.len,c=this.getFwdBufferInfo(this.media,de);if(l>this.getMaxBufferLength(null==c?void 0:c.len)+i)return;var f=n.fragments,h=f.length,d=n.edge,p=null,g=this.fragPrevious;if(u<d){var v=a.maxFragLookUpTolerance;!(p=qe(g,f,Math.max(f[0].start,u),v))&&g&&g.start<f[0].start&&(p=f[0])}else p=f[h-1];if(!p)return;p=this.mapToInitFragWhenRequired(p),this.fragmentTracker.getState(p)===tr&&this.loadFragment(p,r,u)}}else this.state=kr},r.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.max(r,e):r},r.loadFragment=function(e,r,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,r):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,n))},n(e,[{key:"mediaBufferTimeRanges",get:function(){return new si(this.tracksBuffered[this.currentTrackId]||[])}}]),e}(Nr),si=function(t){this.buffered=void 0;var e=function(e,r,n){if((r>>>=0)>n-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+n+")");return t[r][e]};this.buffered={get length(){return t.length},end:function(r){return e("end",r,t.length)},start:function(r){return e("start",r,t.length)}}},ui=function(t){function e(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.registerListeners(),r}l(e,t);var r=e.prototype;return r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},r.registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(w.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(w.ERROR,this.onError,this)},r.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},r.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},r.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),li(this.media.textTracks).forEach((function(t){Te(t)})),this.subtitleTrack=-1,this.media=null)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},r.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},r.onSubtitleTrackLoaded=function(t,e){var r=e.id,n=e.details,i=this.trackId,a=this.tracksInGroup[i];if(a){var o=a.details;a.details=e.details,this.log("subtitle track "+r+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,o)}else this.warn("Invalid subtitle track id "+r)},r.onLevelLoading=function(t,e){this.switchLevel(e.level)},r.onLevelSwitching=function(t,e){this.switchLevel(e.level)},r.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId],n=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==r){var i=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=i;var a=this.findTrackId(null==n?void 0:n.name)||this.findTrackId();this.groupId=r||null;var o={subtitleTracks:i};this.log("Updating subtitle tracks, "+i.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(w.SUBTITLE_TRACKS_UPDATED,o),-1!==a&&this.setSubtitleTrack(a,n)}else this.shouldReloadPlaylist(n)&&this.setSubtitleTrack(this.trackId,n)}},r.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var n=e[r];if((!this.selectDefaultTrack||n.default)&&(!t||t===n.name))return n.id}return-1},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===he&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&this.checkRetry(e)},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var n=r.id,i=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(w.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},r.toggleTrackModes=function(t){var e=this,r=this.media,n=this.trackId;if(r){var i=li(r.textTracks),a=i.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var o=a[n];o&&(o.mode="disabled")}var s=a[t];s&&(s.mode=this.subtitleDisplay?"showing":"hidden")}},r.setSubtitleTrack=function(t,e){var r,n=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!=(r=n[t])&&r.details)||t<-1||t>=n.length)){this.clearTimer();var i=n[t];if(this.log("Switching to subtitle-track "+t+(i?' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId:"")),this.trackId=t,i){var a=i.id,o=i.groupId,s=void 0===o?"":o,u=i.name,l=i.type,c=i.url;this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:a,groupId:s,name:u,type:l,url:c});var f=this.switchParams(i.url,null==e?void 0:e.details);this.loadPlaylist(f)}else this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},r.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=li(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},n(e,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}]),e}($e);function li(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||e.push(t[r])}return e}var ci=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),n={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,n=e[t],i=r[t];if(i.length){var a=i[0];try{a.execute()}catch(e){C.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(e),null!=n&&n.updating||(i.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),fi=zt(),hi=/([ha]vc.)(?:\.[^.,]+)+/,di=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.media,r=e.mediaSource;C.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",e._onMediaEmptied),e.updateMediaElementDuration(),e.hls.trigger(w.MEDIA_ATTACHED,{media:t})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){C.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){C.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var t=e.media,r=e._objectUrl;t&&t.src!==r&&C.error("Media element src was set while attaching MediaSource ("+r+" > "+t.src+")")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},e.registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.BUFFER_RESET,this.onBufferReset,this),t.on(w.BUFFER_APPENDING,this.onBufferAppending,this),t.on(w.BUFFER_CODECS,this.onBufferCodecs,this),t.on(w.BUFFER_EOS,this.onBufferEos,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(w.FRAG_PARSED,this.onFragParsed,this),t.on(w.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.BUFFER_RESET,this.onBufferReset,this),t.off(w.BUFFER_APPENDING,this.onBufferAppending,this),t.off(w.BUFFER_CODECS,this.onBufferCodecs,this),t.off(w.BUFFER_EOS,this.onBufferEos,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(w.FRAG_PARSED,this.onFragParsed,this),t.off(w.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ci(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},e.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,C.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&fi){var n=this.mediaSource=new fi;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(n),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(C.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){C.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):C.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(w.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){C.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,n=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(n){var i=r.tracks[t];if(i&&"function"==typeof i.buffer.changeType){var a=e[t],o=a.id,s=a.codec,u=a.levelCodec,l=a.container,c=a.metadata,f=(i.levelCodec||i.codec).replace(hi,"$1"),h=(u||s).replace(hi,"$1");if(f!==h){var d=l+";codecs="+(u||s);r.appendChangeType(t,d),C.log("[buffer-controller]: switching codec "+f+" to "+h),r.tracks[t]={buffer:i.buffer,codec:s,container:l,levelCodec:u,metadata:c,id:o}}}}else r.pendingTracks[t]=e[t]})),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,n=this.operationQueue,i={execute:function(){var i=r.sourceBuffer[t];i&&(C.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),i.changeType(e)),n.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){C.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};n.append(i,t)},e.onBufferAppending=function(t,e){var r=this,n=this.hls,i=this.operationQueue,a=this.tracks,o=e.data,s=e.type,u=e.frag,l=e.part,c=e.chunkMeta,f=c.buffering[s],h=self.performance.now();f.start=h;var d=u.stats.buffering,p=l?l.stats.buffering:null;0===d.start&&(d.start=h),p&&0===p.start&&(p.start=h);var g=a.audio,v=!1;"audio"===s&&"audio/mpeg"===(null==g?void 0:g.container)&&(v=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);var m=u.start,y={execute:function(){if(f.executeStart=self.performance.now(),v){var t=r.sourceBuffer[s];if(t){var e=m-t.timestampOffset;Math.abs(e)>=.1&&(C.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+e+") sn: "+u.sn+")"),t.timestampOffset=m)}}r.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var t=self.performance.now();f.executeEnd=f.end=t,0===d.first&&(d.first=t),p&&0===p.first&&(p.first=t);var e=r.sourceBuffer,n={};for(var i in e)n[i]=gr.getBuffered(e[i]);r.appendError=0,r.hls.trigger(w.BUFFER_APPENDED,{type:s,frag:u,part:l,chunkMeta:c,parent:u.type,timeRanges:n})},onError:function(t){C.error("[buffer-controller]: Error encountered while trying to append to the "+s+" SourceBuffer",t);var e={type:S.MEDIA_ERROR,parent:u.type,details:A.BUFFER_APPEND_ERROR,frag:u,part:l,chunkMeta:c,error:t,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=A.BUFFER_FULL_ERROR:(r.appendError++,e.details=A.BUFFER_APPEND_ERROR,r.appendError>n.config.appendErrorMaxRetry&&(C.error("[buffer-controller]: Failed "+n.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),n.trigger(w.ERROR,e)}};i.append(y,s)},e.onBufferFlushing=function(t,e){var r=this,n=this.operationQueue,i=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(w.BUFFER_FLUSHED,{type:t})},onError:function(e){C.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?n.append(i(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){n.append(i(t),t)}))},e.onFragParsed=function(t,e){var r=this,n=e.frag,i=e.part,a=[],o=i?i.elementaryStreams:n.elementaryStreams;o[B]?a.push("audiovideo"):(o[N]&&a.push("audio"),o[U]&&a.push("video")),0===a.length&&C.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers((function(){var t=self.performance.now();n.stats.buffering.end=t,i&&(i.stats.buffering.end=t);var e=i?i.stats:n.stats;r.hls.trigger(w.FRAG_BUFFERED,{frag:n,part:i,stats:e,id:n.type})}),a)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,n){var i=r.sourceBuffer[n];return!i||e.type&&e.type!==n||(i.ending=!0,i.ended||(i.ended=!0,C.log("[buffer-controller]: "+n+" sourceBuffer now EOS"))),t&&!(i&&!i.ended)}),!0)&&(C.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){r.getSourceBufferTypes().forEach((function(t){var e=r.sourceBuffer[t];e&&(e.ending=!1)}));var t=r.mediaSource;t&&"open"===t.readyState?(C.log("[buffer-controller]: Calling mediaSource.endOfStream()"),t.endOfStream()):t&&C.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+t.readyState)})))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,n=this.sourceBuffer;if(r&&null!==e){var i=this.getSourceBufferTypes();if(i.length){var a=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(T(a)&&!(a<0)){var o=r.currentTime,s=e.levelTargetDuration,u=Math.max(a,s),l=Math.floor(o/s)*s-u;i.forEach((function(r){var i=n[r];if(i){var a=gr.getBuffered(i);if(a.length>0&&l>a.start(0)){if(t.trigger(w.BACK_BUFFER_REACHED,{bufferEnd:l}),e.live)t.trigger(w.LIVE_BACK_BUFFER_REACHED,{bufferEnd:l});else if(i.ended&&a.end(a.length-1)-o<2*s)return void C.info("[buffer-controller]: Cannot flush "+r+" back buffer while SourceBuffer is in ended state");t.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:l,type:r})}}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,n=this.mediaSource,i=t.fragments[0].start+t.totalduration,a=r.duration,o=T(n.duration)?n.duration:0;t.live&&e.config.liveDurationInfinity?(C.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(t)):(i>o&&i>a||!T(a))&&(C.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),n.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var n=Math.max(0,r[0].start),i=Math.max(n,n+t.totalduration);e.setLiveSeekableRange(n,i)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,n=Object.keys(r).length;if(n&&!t||2===n){this.createSourceBuffers(r),this.pendingTracks={};var i=this.getSourceBufferTypes();if(i.length)this.hls.trigger(w.BUFFER_CREATED,{tracks:this.tracks}),i.forEach((function(t){e.executeNext(t)}));else{var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in t)if(!e[n]){var i=t[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;C.log("[buffer-controller]: creating sourceBuffer("+o+")");try{var s=e[n]=r.addSourceBuffer(o),u=n;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.tracks[n]={buffer:s,codec:a,container:i.container,levelCodec:i.levelCodec,metadata:i.metadata,id:i.id}}catch(t){C.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:o})}}},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){var r=new Error(t+" SourceBuffer error");C.error("[buffer-controller]: "+r,e),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:A.BUFFER_APPENDING_ERROR,error:r,fatal:!1});var n=this.operationQueue.current(t);n&&n.onError(e)},e.removeExecutor=function(t,e,r){var n=this.media,i=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[t];if(!n||!i||!o)return C.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(t);var s=T(n.duration)?n.duration:1/0,u=T(i.duration)?i.duration:1/0,l=Math.max(0,e),c=Math.min(r,s,u);c>l&&!o.ending?(o.ended=!1,C.log("[buffer-controller]: Removing ["+l+","+c+"] from the "+t+" SourceBuffer"),o.remove(l,c)):a.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,n=this.sourceBuffer[e];if(!n)return C.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);n.ended=!1,n.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return C.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var n=this.operationQueue,i=e.map((function(t){return n.appendBlocker(t)}));Promise.all(i).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];null!=e&&e.updating||n.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var n=this.sourceBuffer[t];if(n){var i=r.bind(this,t);this.listeners[t].push({event:e,listener:i}),n.addEventListener(e,i)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),pi={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},gi=function(t){var e=t;return pi.hasOwnProperty(t)&&(e=pi[t]),String.fromCharCode(e)},mi=100,yi={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},bi={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ei={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ti={25:2,26:4,29:6,30:8,31:10,27:13,28:15},wi=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Si=function(){function t(){this.time=null,this.verboseLevel=0}return t.prototype.log=function(t,e){if(this.verboseLevel>=t){var r="function"==typeof e?e():e;C.log(this.time+" ["+t+"] "+r)}},t}(),Ai=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},_i=function(){function t(t,e,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),ki=function(){function t(t,e,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new _i(e,r,n,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Li=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<mi;e++)this.chars.push(new ki);this.logger=t,this.pos=0,this.currPenState=new _i}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<mi;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<mi;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<mi;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>mi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=mi)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){var e=this;t>=144&&this.backSpace();var r=gi(t);this.pos>=mi?this.logger.log(0,(function(){return"Cannot insert "+t.toString(16)+" ("+r+") at position "+e.pos+". Skipping it!"})):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<mi;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<mi;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ri=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Li(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(t)}));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(i.rows[n+s])}}this.currRow=e;var u=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);u.setCursor(t.indent),t.color=u.chars[c].penState.foreground}var f={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(f)},e.setBkgData=function(t){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(t)})),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){var t=this;if(null!==this.nrRollUpRows){this.logger.log(1,(function(){return t.getDisplayText()}));var e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(n=i+1,t?e.push("Row "+n+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),xi=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ri(r),this.nonDisplayedMemory=new Ri(r),this.lastOutputScreen=new Ri(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(function(){return"MODE="+t})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=this,r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return n+": "+e.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+e.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){var t=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+t.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Ci=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Si;this.channels=[null,new xi(t,e,n),new xi(t+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,n,i,a=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(n=127&e[o],i=127&e[o+1],0!==n||0!==i){if(this.logger.log(3,"["+Ai([e[o],e[o+1]])+"] -> ("+Ai([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(2,"Couldn't parse cleaned data "+Ai([n,i])+" orig: "+Ai([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Di(t,e,r))return Ii(null,null,r),this.logger.log(3,"Repeated command ("+Ai([t,e])+") is dropped"),!0;var n=20===t||21===t||23===t?1:2,i=this.channels[n];return 20===t||21===t||28===t||29===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),Ii(t,e,r),this.currentChannel=n,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(e),this.logger.log(3,"MIDROW ("+Ai([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,n=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Di(t,e,n))return Ii(null,null,n),!0;var i=t<=23?1:2;r=e>=64&&e<=95?1===i?yi[t]:Ei[t]:1===i?bi[t]:Ti[t];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(r,e)),Ii(t,e,n),this.currentChannel=i,!0)},e.interpretPAC=function(t,e){var r,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.parseChars=function(t,e){var r,n,i=null,a=null;if(t>=25?(r=2,a=t-8):(r=1,a=t),a>=17&&a<=19?(n=17===a?e+80:18===a?e+112:e+144,this.logger.log(2,"Special char '"+gi(n)+"' in channel "+r),i=[n]):t>=32&&t<=127&&(i=0===e?[t]:[t,e]),i){var o=Ai(i);this.logger.log(3,"Char codes =  "+o.join(",")),Ii(t,e,this.cmdHistory)}return i},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var n={};16===t||24===t?(r=Math.floor((e-32)/2),n.background=wi[r],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0));var i=t<=23?1:2;return this.channels[i].setBkgData(n),Ii(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}();function Ii(t,e,r){r.a=t,r.b=e}function Di(t,e,r){return r.a===t&&r.b===e}var Pi=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),Oi=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function n(t){return r(e,t)}function i(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)t[o]=a[o]}return t}function a(e,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var l="",c=!1,f=e,h=a,d=o,p=null,g="",v=!0,m="auto",y="start",b=50,E="middle",T=50,w="middle";Object.defineProperty(s,"id",i({},u,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return d},set:function(t){d=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return g},set:function(e){var n=function(e){return r(t,e)}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return E},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return w},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),Mi=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function Fi(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(n||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var Ni=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function Ui(t,e,r,n){var i=n?t.split(n):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);2===o.length&&e(o[0],o[1])}}var Bi=new Oi(0,0,""),ji="middle"===Bi.align?"middle":"center";function Gi(t,e,r){var n=t;function i(){var e=Fi(t);if(null===e)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.slice(3),a(),e.endTime=i(),a(),function(t,e){var n=new Ni;Ui(t,(function(t,e){var i;switch(t){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===e){n.set(t,r[a].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":i=e.split(","),n.integer(t,i[0]),n.percent(t,i[0])&&n.set("snapToLines",!1),n.alt(t,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",ji,"end"]);break;case"position":i=e.split(","),n.percent(t,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",ji,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",ji,"end","left","right"])}}),/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===Bi.line&&(i=-1),e.line=i,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",ji);var a=n.get("position","auto");"auto"===a&&50===Bi.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function Hi(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var Ki=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new Mi,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Hi(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var n=t.slice(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.slice(r),n}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var n="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var i=(n=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:n=r(),e.state){case"HEADER":/:/.test(n)?Ui(n,(function(t,e){}),/:/):n||(e.state="ID");continue;case"NOTE":n||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){e.state="NOTE";break}if(!n)continue;if(e.cue=new Oi(0,0,""),e.state="CUE",-1===n.indexOf("--\x3e")){e.cue.id=n;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{Gi(n,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=n;continue;case"BADCUE":n||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},t}(),Vi=/\r\n|\n\r|\n|\r/g,qi=function(t,e,r){return void 0===r&&(r=0),t.slice(r,r+e.length)===e},zi=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function Wi(t,e,r){return zi(t.toString())+zi(e.toString())+zi(r)}var Yi="stpp.ttml.im1t",Xi=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,$i=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Qi={left:"start",center:"center",right:"end",start:"start",end:"end"};function Zi(t,e,r,n){var i=Rt(new Uint8Array(t),["mdat"]);if(0!==i.length){var a,o,s,l=i.map((function(t){return mt(t)})),c=(a=e.baseTime,void 0===(o=e.timescale)&&(o=1),void 0===s&&(s=!1),An(a,1,1/o,s));try{l.forEach((function(t){return r(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||n[e],t}),{}),a="preserve"!==r.getAttribute("xml:space"),o=ta(Ji(r,"styling","style")),s=ta(Ji(r,"layout","region")),l=Ji(r,"body","[begin]");return[].map.call(l,(function(t){var r=ea(t,a);if(!r||!t.hasAttribute("begin"))return null;var n=ia(t.getAttribute("begin"),i),l=ia(t.getAttribute("dur"),i),c=ia(t.getAttribute("end"),i);if(null===n)throw na(t);if(null===c){if(null===l)throw na(t);c=n+l}var f=new Oi(n-e,c-e,r);f.id=Wi(f.startTime,f.endTime,f.text);var h=function(t,e,r){var n="http://www.w3.org/ns/ttml#styling",i=null,a=null!=t&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(i=r[a]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(r,a){var o=ra(e,n,a)||ra(t,n,a)||ra(i,n,a);return o&&(r[a]=o),r}),{})}(s[t.getAttribute("region")],o[t.getAttribute("style")],o),d=h.textAlign;if(d){var p=Qi[d];p&&(f.lineAlign=p),f.align=d}return u(f,h),f})).filter((function(t){return null!==t}))}(t,c))}))}catch(t){n(t)}}else n(new Error("Could not parse IMSC1 mdat"))}function Ji(t,e,r){var n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function ta(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function ea(t,e){return[].slice.call(t.childNodes).reduce((function(t,r,n){var i;return"br"===r.nodeName&&n?t+"\n":null!=(i=r.childNodes)&&i.length?ea(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent}),"")}function ra(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function na(t){return new Error("Could not parse ttml timestamp "+t)}function ia(t,e){if(!t)return null;var r=Fi(t);return null===r&&(Xi.test(t)?r=function(t,e){var r=Xi.exec(t),n=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/e.frameRate}(t,e):$i.test(t)&&(r=function(t,e){var r=$i.exec(t),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}(t,e))),r}var aa=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new Pi(this,"textTrack1"),r=new Pi(this,"textTrack2"),n=new Pi(this,"textTrack3"),i=new Pi(this,"textTrack4");this.cea608Parser1=new Ci(1,e,r),this.cea608Parser2=new Ci(3,n,i)}t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(w.FRAG_LOADING,this.onFragLoading,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(w.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(w.FRAG_LOADING,this.onFragLoading,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(w.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,n,i){for(var a,o,s,u,l=!1,c=i.length;c--;){var f=i[c],h=(a=f[0],o=f[1],s=e,u=r,Math.min(o,u)-Math.max(a,s));if(h>=0&&(f[0]=Math.min(f[0],e),f[1]=Math.max(f[1],r),l=!0,h/(r-e)>.5))return}if(l||i.push([e,r]),this.config.renderTextTracksNatively){var d=this.captionsTracks[t];this.Cues.newCue(d,e,r,n)}else{var p=this.Cues.newCue(null,e,r,n);this.hls.trigger(w.CUES_PARSED,{type:"captions",cues:p,track:t})}},e.onInitPtsFound=function(t,e){var r=this,n=e.frag,i=e.id,a=e.initPTS,o=e.timescale,s=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]={baseTime:a,timescale:o}),s.length&&(this.unparsedVttFrags=[],s.forEach((function(t){r.onFragLoaded(w.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r];if(n[t])return n}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,n=this.media,i=e[t],a=i.label,o=i.languageCode,s=this.getExistingTrack(t);if(s)r[t]=s,Te(r[t]),be(r[t],n);else{var u=this.createTextTrack("captions",a,o);u&&(u[t]=!0,r[t]=u)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Te(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)Te(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this,n=e.subtitleTracks||[],i=n.some((function(t){return t.textCodec===Yi}));if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(ii(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){var a=this.media?this.media.textTracks:null;this.tracks.forEach((function(t,e){var n;if(a&&e<a.length){for(var i=null,o=0;o<a.length;o++)if(oa(a[o],t)){i=a[o];break}i&&(n=i)}if(n)Te(n);else{var s=r._captionsOrSubtitlesFromCharacteristics(t);(n=r.createTextTrack(s,t.name,t.lang))&&(n.mode="disabled")}n&&(n.groupId=t.groupId,r.textTracks.push(n))}))}else if(this.tracks.length){var o=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}},e._captionsOrSubtitlesFromCharacteristics=function(t){if(t.attrs.CHARACTERISTICS){var e=/transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);if(e&&r)return"captions"}return"subtitles"},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var n="textTrack"+e[1],i=r.captionsProperties[n];i&&(i.label=t.name,t.lang&&(i.languageCode=t.lang),i.media=t)}}))},e.closedCaptionsForLevel=function(t){var e=this.hls.levels[t.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]},e.onFragLoading=function(t,e){var r=this.cea608Parser1,n=this.cea608Parser2,i=this.lastSn,a=this.lastPartIndex;if(this.enabled&&r&&n&&e.frag.type===de){var o,s,u=e.frag.sn,l=null!=(o=null==e||null==(s=e.part)?void 0:s.index)?o:-1;u===i+1||u===i&&l===a+1||(r.reset(),n.reset()),this.lastSn=u,this.lastPartIndex=l}},e.onFragLoaded=function(t,e){var r=e.frag,n=e.payload,i=this.initPTS,a=this.unparsedVttFrags;if(r.type===ge)if(n.byteLength){if(!i[r.cc])return a.push(e),void(i.length&&this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var o=r.decryptdata,s="stats"in e;if(null==o||!o.encrypted||s){var u=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),u&&u.textCodec===Yi?this._parseIMSC1(r,n):this._parseVTTs(r,n,l)}}else this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,n=this.hls;Zi(e,this.initPTS[t.cc],(function(e){r._appendCues(e,t.level),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){C.log("Failed to parse IMSC1: "+e),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,r){var n,i=this,a=this.hls;!function(t,e,r,n,i,a,o){var s,u,l,c=new Ki,f=mt(new Uint8Array(t)).trim().replace(Vi,"\n").split("\n"),h=[],d=(s=e.baseTime,void 0===(u=e.timescale)&&(u=1),An(s,9e4,1/u)),p="00:00.000",g=0,v=0,m=!0;c.oncue=function(t){var e=r[n],a=r.ccOffset,o=(g-d)/9e4;null!=e&&e.new&&(void 0!==v?a=r.ccOffset=e.start:function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;null!=(a=i)&&a.new;){var a;t.ccOffset+=n.start-i.start,n.new=!1,i=t[(n=i).prevCC]}t.presentationOffset=r}(r,n,o)),o&&(a=o-r.presentationOffset);var s=t.endTime-t.startTime,u=xn(9e4*(t.startTime+a-v),9e4*i)/9e4;t.startTime=Math.max(u,0),t.endTime=Math.max(u+s,0);var l=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(l)),t.id||(t.id=Wi(t.startTime,t.endTime,l)),t.endTime>0&&h.push(t)},c.onparsingerror=function(t){l=t},c.onflush=function(){l?o(l):a(h)},f.forEach((function(t){if(m){if(qi(t,"X-TIMESTAMP-MAP=")){m=!1,t.slice(16).split(",").forEach((function(t){qi(t,"LOCAL:")?p=t.slice(6):qi(t,"MPEGTS:")&&(g=parseInt(t.slice(7)))}));try{v=function(t){var e=parseInt(t.slice(-3)),r=parseInt(t.slice(-6,-4)),n=parseInt(t.slice(-9,-7)),i=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(T(e)&&T(r)&&T(n)&&T(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*n)+36e5*i}(p)/1e3}catch(t){l=t}return}""===t&&(m=!1)}c.parse(t+"\n")})),c.flush()}(null!=(n=t.initSegment)&&n.data?Pt(t.initSegment.data,new Uint8Array(e)):e,this.initPTS[t.cc],r,t.cc,t.start,(function(e){i._appendCues(e,t.level),a.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){i._fallbackToIMSC1(t,e),C.log("Failed to parse VTT cue: "+r),a.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},e._fallbackToIMSC1=function(t,e){var r=this,n=this.tracks[t.level];n.textCodec||Zi(e,this.initPTS[t.cc],(function(){n.textCodec=Yi,r._parseIMSC1(t,e)}),(function(){n.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var n=this.textTracks[e];if(!n||"disabled"===n.mode)return;t.forEach((function(t){return Ee(n,t)}))}else{var i=this.tracks[e];if(!i)return;var a=i.default?"default":"subtitles"+e;r.trigger(w.CUES_PARSED,{type:"subtitles",cues:t,track:a})}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===ge){if(!this.initPTS[r.cc])return void this.unparsedVttFrags.push(e);this.onFragLoaded(w.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&r&&n){var i=e.frag,a=e.samples;if(i.type!==de||"NONE"!==this.closedCaptionsForLevel(i))for(var o=0;o<a.length;o++){var s=a[o].bytes;if(s){var u=this.extractCea608Data(s);r.addData(a[o].pts,u[0]),n.addData(a[o].pts,u[1])}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,n=e.endOffset,i=e.endOffsetSubtitles,a=e.type,o=this.media;if(o&&!(o.currentTime<n)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(t){return we(s[t],r,n)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==i){var u=this.textTracks;Object.keys(u).forEach((function(t){return we(u[t],r,i)}))}}},e.extractCea608Data=function(t){for(var e=[[],[]],r=31&t[0],n=2,i=0;i<r;i++){var a=t[n++],o=127&t[n++],s=127&t[n++];if((0!==o||0!==s)&&0!=(4&a)){var u=3&a;0!==u&&1!==u||(e[u].push(o),e[u].push(s))}}return e},t}();function oa(t,e){return!!t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var sa=function(){function t(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},e.registerListeners=function(){var t=this.hls;t.on(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.BUFFER_CODECS,this.onBufferCodecs,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this)},e.unregisterListener=function(){var t=this.hls;t.off(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.BUFFER_CODECS,this.onBufferCodecs,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this)},e.onFpsDropLevelCapping=function(t,e){var r=this.hls.levels[e.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})},e.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null},e.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onMediaDetaching=function(){this.stopCapping()},e.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.getMaxLevel=function(e){var r=this,n=this.hls.levels;if(!n.length)return-1;var i=n.filter((function(t,n){return r.isLevelAllowed(t)&&n<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},e.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},e.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t){return!this.restrictedLevels.some((function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height}))},t.getMaxLevelByMediaSize=function(t,e,r){if(null==t||!t.length)return-1;for(var n,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=r)&&(n=s,!(i=t[o+1])||n.width!==i.width||n.height!==i.height)){a=o;break}}return a},n(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(t){}return t}}]),t}(),ua=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var n=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=n,n&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var n=performance.now();if(e){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(w.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var l=u.currentLevel;C.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=l)&&(l-=1,u.trigger(w.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}(),la="[eme]",ca=function(){function t(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=t.CDMCleanupPromise?[t.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=C.debug.bind(C,la),this.log=C.log.bind(C,la),this.warn=C.warn.bind(C,la),this.error=C.error.bind(C,la),this.hls=e,this.config=e.config,this.registerListeners()}var r=t.prototype;return r.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},r.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)},r.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this)},r.getLicenseServerUrl=function(t){var e=this.config,r=e.drmSystems,n=e.widevineLicenseUrl,i=r[t];if(i)return i.licenseUrl;if(t===z.WIDEVINE&&n)return n;throw new Error('no license server URL configured for key-system "'+t+'"')},r.getServerCertificateUrl=function(t){var e=this.config.drmSystems[t];if(e)return e.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+t+'"]')},r.attemptKeySystemAccess=function(t){var e=this,r=this.hls.levels,n=function(t,e,r){return!!t&&r.indexOf(t)===e},i=r.map((function(t){return t.audioCodec})).filter(n),a=r.map((function(t){return t.videoCodec})).filter(n);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(r,n){!function t(o){var s=o.shift();e.getMediaKeysPromise(s,i,a).then((function(t){return r({keySystem:s,mediaKeys:t})})).catch((function(e){o.length?t(o):n(e instanceof fa?e:new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))}(t)}))},r.requestMediaKeySystemAccess=function(t,e){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var n="Configured requestMediaKeySystemAccess is not a function "+r;return null===et&&"http:"===self.location.protocol&&(n="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(n))}return r(t,e)},r.getMediaKeysPromise=function(t,e,r){var n=this,i=function(t,e,r,n){var i;switch(t){case z.FAIRPLAY:i=["cenc","sinf"];break;case z.WIDEVINE:case z.PLAYREADY:i=["cenc"];break;case z.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+t)}return function(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"not-allowed",distinctiveIdentifier:n.distinctiveIdentifier||"not-allowed",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map((function(t){return{contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null}})),videoCapabilities:r.map((function(t){return{contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}}))}]}(i,e,r,n)}(t,e,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[t],o=null==a?void 0:a.keySystemAccess;if(!o){this.log('Requesting encrypted media "'+t+'" key-system access with config: '+JSON.stringify(i)),o=this.requestMediaKeySystemAccess(t,i);var s=this.keySystemAccessPromises[t]={keySystemAccess:o};return o.catch((function(e){n.log('Failed to obtain access to key-system "'+t+'": '+e)})),o.then((function(e){n.log('Access for key-system "'+e.keySystem+'" obtained');var r=n.fetchServerCertificate(t);return n.log('Create media-keys for "'+t+'"'),s.mediaKeys=e.createMediaKeys().then((function(e){return n.log('Media-keys created for "'+t+'"'),r.then((function(r){return r?n.setMediaKeysServerCertificate(e,t,r):e}))})),s.mediaKeys.catch((function(e){n.error('Failed to create media-keys for "'+t+'"}: '+e)})),s.mediaKeys}))}return o.then((function(){return a.mediaKeys}))},r.createMediaKeySessionContext=function(t){var e=t.decryptdata,r=t.keySystem,n=t.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+bt(e.keyId||[]));var i=n.createSession(),a={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},r.renewKeySession=function(t){var e=t.decryptdata;if(e.pssh){var r=this.createMediaKeySessionContext(t),n=this.getKeyIdString(e);this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(r,"cenc",e.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)},r.getKeyIdString=function(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return bt(t.keyId)},r.updateKeySession=function(t,e){var r,n=t.mediaKeysSession;return this.log('Updating key-session "'+n.sessionId+'" for keyID '+bt((null==(r=t.decryptdata)?void 0:r.keyId)||[])+"\n      } (data length: "+(e?e.byteLength:e)+")"),n.update(e)},r.selectKeySystemFormat=function(t){var e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+t.sn+" "+t.type+": "+t.level+") key formats "+e.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise},r.getKeyFormatPromise=function(t){var e=this;return new Promise((function(r,n){var i=tt(e.config),a=t.map(Q).filter((function(t){return!!t&&-1!==i.indexOf(t)}));return e.getKeySystemSelectionPromise(a).then((function(t){var e=t.keySystem,i=J(e);i?r(i):n(new Error('Unable to find format for key-system "'+e+'"'))})).catch(n)}))},r.loadKey=function(t){var e=this,r=t.keyInfo.decryptdata,n=this.getKeyIdString(r),i="(keyId: "+n+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+i);var a=this.keyIdToKeySessionPromise[n];return a||(a=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(r).then((function(n){var a=n.keySystem,o=n.mediaKeys;return e.throwIfDestroyed(),e.log("Handle encrypted media sn: "+t.frag.sn+" "+t.frag.type+": "+t.frag.level+" using key "+i),e.attemptSetMediaKeys(a,o).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:r});return e.generateRequestWithPreferredKeySession(t,"cenc",r.pssh,"playlist-key")}))}))).catch((function(t){return e.handleError(t)})),a},r.throwIfDestroyed=function(t){if(!this.hls)throw new Error("invalid state")},r.handleError=function(t){this.hls&&(this.error(t.message),t instanceof fa?this.hls.trigger(w.ERROR,t.data):this.hls.trigger(w.ERROR,{type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))},r.getKeySystemForKeyPromise=function(t){var e=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[e];if(!r){var n=Q(t.keyFormat),i=n?[n]:tt(this.config);return this.attemptKeySystemAccess(i)}return r},r.getKeySystemSelectionPromise=function(t){if(t.length||(t=tt(this.config)),0===t.length)throw new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(t)},r._onMediaEncrypted=function(t){var e=this,r=t.initDataType,n=t.initData;if(this.debug('"'+t.type+'" event: init data type: "'+r+'"'),null!==n){var i,a;if("sinf"===r&&this.config.drmSystems[z.FAIRPLAY]){var o=St(new Uint8Array(n));try{var s=V(JSON.parse(o).sinf),u=It(new Uint8Array(s));if(!u)return;i=u.subarray(8,24),a=z.FAIRPLAY}catch(t){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var l=function(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;var e={version:0,systemId:"",kids:null,data:null},r=new DataView(t),n=r.getUint32(0);if(t.byteLength!==n&&n>44)return null;if(1886614376!==r.getUint32(4))return null;if(e.version=r.getUint32(8)>>>24,e.version>1)return null;e.systemId=bt(new Uint8Array(t,12,16));var i=r.getUint32(28);if(0===e.version){if(n-32<i)return null;e.data=new Uint8Array(t,32,i)}else if(1===e.version){e.kids=[];for(var a=0;a<i;a++)e.kids.push(new Uint8Array(t,32+16*a,16))}return e}(n);if(null===l)return;0===l.version&&l.systemId===Z&&l.data&&(i=l.data.subarray(8,24)),a=function(t){if(t===Z)return z.WIDEVINE}(l.systemId)}if(a&&i){for(var c=bt(i),f=this.keyIdToKeySessionPromise,h=this.mediaKeySessions,d=f[c],p=function(){var t=h[g],a=t.decryptdata;if(a.pssh||!a.keyId)return"continue";var o=bt(a.keyId);return c===o||-1!==a.uri.replace(/-/g,"").indexOf(c)?(d=f[o],delete f[o],a.pssh=new Uint8Array(n),a.keyId=i,d=f[c]=d.then((function(){return e.generateRequestWithPreferredKeySession(t,r,n,"encrypted-event-key-match")})),"break"):void 0},g=0;g<h.length;g++){var v=p();if("continue"!==v&&"break"===v)break}d||(d=f[c]=this.getKeySystemSelectionPromise([a]).then((function(t){var a,o=t.keySystem,s=t.mediaKeys;e.throwIfDestroyed();var u=new Bt("ISO-23001-7",c,null!=(a=J(o))?a:"");return u.pssh=new Uint8Array(n),u.keyId=i,e.attemptSetMediaKeys(o,s).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({decryptdata:u,keySystem:o,mediaKeys:s});return e.generateRequestWithPreferredKeySession(t,r,n,"encrypted-event-no-match")}))}))),d.catch((function(t){return e.handleError(t)}))}}},r._onWaitingForKey=function(t){this.log('"'+t.type+'" event')},r.attemptSetMediaKeys=function(t,e){var r=this,n=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+t+'"');var i=Promise.all(n).then((function(){if(!r.media)throw new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(i),i.then((function(){r.log('Media-keys set for "'+t+'"'),n.push(i),r.setMediaKeysQueue=r.setMediaKeysQueue.filter((function(t){return-1===n.indexOf(t)}))}))},r.generateRequestWithPreferredKeySession=function(t,e,r,n){var i,a,o=this,s=null==(i=this.config.drmSystems)||null==(a=i[t.keySystem])?void 0:a.generateRequest;if(s)try{var u=s.call(this.hls,e,r,t);if(!u)throw new Error("Invalid response from configured generateRequest filter");e=u.initDataType,r=t.decryptdata.pssh=u.initData?new Uint8Array(u.initData):null}catch(t){var l;if(this.warn(t.message),null!=(l=this.hls)&&l.config.debug)throw t}if(null===r)return this.log('Skipping key-session request for "'+n+'" (no initData)'),Promise.resolve(t);var c=this.getKeyIdString(t.decryptdata);this.log('Generating key-session request for "'+n+'": '+c+" (init data type: "+e+" length: "+(r?r.byteLength:null)+")");var f=new Vn;t.mediaKeysSession.onmessage=function(e){var r=t.mediaKeysSession;if(r){var n=e.messageType,i=e.message;o.log('"'+n+'" message event for session "'+r.sessionId+'" message size: '+i.byteLength),"license-request"===n||"license-renewal"===n?o.renewLicense(t,i).catch((function(t){o.handleError(t),f.emit("error",t)})):"license-release"===n?t.keySystem===z.FAIRPLAY&&(o.updateKeySession(t,q("acknowledged")),o.removeSession(t)):o.warn('unhandled media key message type "'+n+'"')}else f.emit("error",new Error("invalid state"))},t.mediaKeysSession.onkeystatuseschange=function(e){if(t.mediaKeysSession){o.onKeyStatusChange(t);var r=t.keyStatus;f.emit("keyStatus",r),"expired"===r&&(o.warn(t.keySystem+" expired for key "+c),o.renewKeySession(t))}else f.emit("error",new Error("invalid state"))};var h=new Promise((function(t,e){f.on("error",e),f.on("keyStatus",(function(r){r.startsWith("usable")?t():"output-restricted"===r?e(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?e(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?e(new Error("key expired while generating request")):o.warn('unhandled key status change "'+r+'"')}))}));return t.mediaKeysSession.generateRequest(e,r).then((function(){var e;o.log('Request generated for key-session "'+(null==(e=t.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+c)})).catch((function(t){throw new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},"Error generating key-session request: "+t)})).then((function(){return h})).catch((function(e){throw f.removeAllListeners(),o.removeSession(t),e})).then((function(){return f.removeAllListeners(),t}))},r.onKeyStatusChange=function(t){var e=this;t.mediaKeysSession.keyStatuses.forEach((function(r,n){e.log('key status change "'+r+'" for keyStatuses keyId: '+bt("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))+" session keyId: "+bt(new Uint8Array(t.decryptdata.keyId||[]))+" uri: "+t.decryptdata.uri),t.keyStatus=r}))},r.fetchServerCertificate=function(t){var r=this.config,n=new(0,r.loader)(r),i=this.getServerCertificateUrl(t);return i?(this.log('Fetching serverCertificate for "'+t+'"'),new Promise((function(a,o){var s={responseType:"arraybuffer",url:i},u=r.certLoadPolicy.default,l={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:function(t,e,r,n){a(t.data)},onError:function(r,n,a,u){o(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:e({url:s.url,data:void 0},r)},'"'+t+'" certificate request failed ('+i+"). Status: "+r.code+" ("+r.text+")"))},onTimeout:function(e,r,n){o(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:s.url,data:void 0}},'"'+t+'" certificate request timed out ('+i+")"))},onAbort:function(t,e,r){o(new Error("aborted"))}};n.load(s,l,c)}))):Promise.resolve()},r.setMediaKeysServerCertificate=function(t,e,r){var n=this;return new Promise((function(i,a){t.setServerCertificate(r).then((function(a){n.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+e+'"'),i(t)})).catch((function(t){a(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))},r.renewLicense=function(t,e){var r=this;return this.requestLicense(t,new Uint8Array(e)).then((function(e){return r.updateKeySession(t,new Uint8Array(e)).catch((function(t){throw new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))}))},r.setupLicenseXHR=function(t,e,r,n){var i=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!r.decryptdata)throw new Error("Key removed");return a.call(i.hls,t,e,r,n)})).catch((function(o){if(!r.decryptdata)throw o;return t.open("POST",e,!0),a.call(i.hls,t,e,r,n)})).then((function(r){return t.readyState||t.open("POST",e,!0),{xhr:t,licenseChallenge:r||n}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:n}))},r.requestLicense=function(t,e){var r=this,n=this.config.keyLoadPolicy.default;return new Promise((function(i,a){var o=r.getLicenseServerUrl(t.keySystem);r.log("Sending license request to URL: "+o);var s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=function(){if(!r.hls||!t.mediaKeysSession)return a(new Error("invalid state"));if(4===s.readyState)if(200===s.status){r._requestLicenseFailureCount=0;var u=s.response;r.log("License received "+(u instanceof ArrayBuffer?u.byteLength:u));var l=r.config.licenseResponseCallback;if(l)try{u=l.call(r.hls,s,o,t)}catch(t){r.error(t)}i(u)}else{var c=n.errorRetry,f=c?c.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>f||s.status>=400&&s.status<500)a(new fa({type:S.KEY_SYSTEM_ERROR,details:A.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:o,data:void 0,code:s.status,text:s.statusText}},"License Request XHR failed ("+o+"). Status: "+s.status+" ("+s.statusText+")"));else{var h=f-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+h+" attempts left"),r.requestLicense(t,e).then(i,a)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=s,r.setupLicenseXHR(s,o,t,e).then((function(t){var e=t.xhr,r=t.licenseChallenge;e.send(r)}))}))},r.onMediaAttached=function(t,e){if(this.config.emeEnabled){var r=e.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}},r.onMediaDetached=function(){var e=this,r=this.media,n=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Bt.clearKeyUriToKeyIdMap();var i=n.length;t.CDMCleanupPromise=Promise.all(n.map((function(t){return e.removeSession(t)})).concat(null==r?void 0:r.setMediaKeys(null).catch((function(t){e.log("Could not clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))})))).then((function(){i&&(e.log("finished closing key sessions and clearing media keys"),n.length=0)})).catch((function(t){e.log("Could not close sessions and clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))}))},r.onManifestLoading=function(){this.keyFormatPromise=null},r.onManifestLoaded=function(t,e){var r=e.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var n=r.reduce((function(t,e){return-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t}),[]);this.log("Selecting key-system from session-keys "+n.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(n)}},r.removeSession=function(t){var e=this,r=t.mediaKeysSession,n=t.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),r.onmessage=null,r.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;var i=this.mediaKeySessions.indexOf(t);return i>-1&&this.mediaKeySessions.splice(i,1),r.remove().catch((function(t){e.log("Could not remove session: "+t)})).then((function(){return r.close()})).catch((function(t){e.log("Could not close session: "+t)}))}},t}();ca.CDMCleanupPromise=void 0;var fa=function(t){function e(e,r){var n;return(n=t.call(this,r)||this).data=void 0,e.error||(e.error=new Error(r)),n.data=e,e.err=e.error,n}return l(e,t),e}(p(Error)),pa=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:"m",su:!r.initialized})}catch(t){C.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,n=r.hls.levels[e.level],i=r.getObjectType(e),a={d:1e3*e.duration,ot:i};"v"!==i&&"a"!==i&&"av"!=i||(a.br=n.bitrate/1e3,a.tb=r.getTopBandwidth(i)/1e3,a.bl=r.getBufferLength(i)),r.apply(t,a)}catch(t){C.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var n=this.config=e.config,i=n.cmcd;null!=i&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||t.uuid(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHED,this.onMediaDetached,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHED,this.onMediaDetached,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this)},e.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,n;this.audioBuffer=null==(r=e.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(n=e.tracks.video)?void 0:n.buffer},e.createData=function(){var t;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),u(r,this.createData());var n="i"===r.ot||"v"===r.ot||"av"===r.ot;if(this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var i=t.toHeaders(r);if(!Object.keys(i).length)return;e.headers||(e.headers={}),u(e.headers,i)}else{var a=t.toQuery(r);if(!a)return;e.url=t.appendQueryToUri(e.url,a)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?"tt":"initSegment"===t.sn?"i":"audio"===e?"a":"main"===e?this.hls.audioTracks.length?"v":"av":void 0},e.getTopBandwidth=function(t){var e,r=0,n=this.hls;if("a"===t)e=n.audioTracks;else{var i=n.maxAutoLevel,a=i>-1?i+1:n.levels.length;e=n.levels.slice(0,a)}for(var o,s=v(e);!(o=s()).done;){var u=o.value;u.bitrate>r&&(r=u.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r="a"===t?this.audioBuffer:this.videoBuffer;return r&&e?1e3*gr.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,n){e(t),this.loader.load(t,r,n)},n(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,n){e(t),this.loader.load(t,r,n)},n(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],n=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},i=function(t){return Math.round(t)},o=function(t){return 100*i(t/100)},s={br:i,d:i,bl:o,dl:o,mtp:o,nor:function(t){return encodeURIComponent(t)},rtp:o,tb:i},u=v(Object.keys(t||{}).sort());!(e=u()).done;){var l=e.value,c=t[l];if(n(c)&&!("v"===l&&1===c||"pr"==l&&1===c)){var f=s[l];f&&(c=f(c));var h,d=a(c);h="ot"===l||"sf"===l||"st"===l?l+"="+c:"boolean"===d?l:"number"===d?l+"="+c:l+"="+JSON.stringify(c),r.push(h)}}return r.join(",")},t.toHeaders=function(e){for(var r={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(e);o<s.length;o++){var u=s[o];i[null!=a[u]?a[u]:1][u]=e[u]}for(var l=0;l<i.length;l++){var c=t.serialize(i[l]);c&&(r["CMCD-"+n[l]]=c)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),ga=function(){function t(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=C.log.bind(C,"[content-steering]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.ERROR,this.onError,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.ERROR,this.onError,this))},e.startLoad=function(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){var t=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,t)}else this.loadSteeringManifest(this.uri)},e.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)},e.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},e.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter((function(e){return e!==t})))},e.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},e.onManifestLoaded=function(t,e){var r=e.contentSteering;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())},e.onManifestParsed=function(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks},e.onError=function(t,e){var r=e.errorAction;if(2===(null==r?void 0:r.action)&&1===r.flags){var n=this.pathwayPriority,i=this.pathwayId;this.penalizedPathways[i]||(this.penalizedPathways[i]=performance.now()),!n&&this.levels&&(n=this.levels.reduce((function(t,e){return-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t}),[])),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==i)}},e.filterParsedLevels=function(t){this.levels=t;var e=this.getLevelsForPathway(this.pathwayId);if(0===e.length){var r=t[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),e=this.getLevelsForPathway(r),this.pathwayId=r}return e.length!==t.length?(this.log("Found "+e.length+"/"+t.length+' levels in Pathway "'+this.pathwayId+'"'),e):t},e.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter((function(e){return t===e.pathwayId}))},e.updatePathwayPriority=function(t){var e;this.pathwayPriority=t;var r=this.penalizedPathways,n=performance.now();Object.keys(r).forEach((function(t){n-r[t]>3e5&&delete r[t]}));for(var i=0;i<t.length;i++){var a=t[i];if(!r[a]){if(a===this.pathwayId)return;var o=this.hls.nextLoadLevel,s=this.hls.levels[o];if((e=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(w.LEVELS_UPDATED,{levels:e});var u=this.hls.levels[o];s&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+u.bitrate),this.hls.nextLoadLevel=o);break}}}},e.clonePathways=function(t){var e=this,r=this.levels;if(r){var n={},i={};t.forEach((function(t){var a=t.ID,o=t["BASE-ID"],s=t["URI-REPLACEMENT"];if(!r.some((function(t){return t.pathwayId===a}))){var l=e.getLevelsForPathway(o).map((function(t){var e=u({},t);e.details=void 0,e.url=ma(t.uri,t.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s);var r=new P(t.attrs);r["PATHWAY-ID"]=a;var o=r.AUDIO&&r.AUDIO+"_clone_"+a,l=r.SUBTITLES&&r.SUBTITLES+"_clone_"+a;o&&(n[r.AUDIO]=o,r.AUDIO=o),l&&(i[r.SUBTITLES]=l,r.SUBTITLES=l),e.attrs=r;var c=new De(e);return Ze(c,"audio",o),Ze(c,"text",l),c}));r.push.apply(r,l),va(e.audioTracks,n,s,a),va(e.subtitleTracks,i,s,a)}}))}},e.loadSteeringManifest=function(t){var e,r=this,n=this.hls.config,i=n.loader;this.loader&&this.loader.destroy(),this.loader=new i(n);try{e=new self.URL(t)}catch(e){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+t)}if("data:"!==e.protocol){var a=0|(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate);e.searchParams.set("_HLS_pathway",this.pathwayId),e.searchParams.set("_HLS_throughput",""+a)}var o={responseType:"json",url:e.href},s=n.steeringManifestLoadPolicy.default,u=s.errorRetry||s.timeoutRetry||{},l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},c={onSuccess:function(t,n,i,a){r.log('Loaded steering manifest: "'+e+'"');var o=t.data;if(1===o.VERSION){r.updated=performance.now(),r.timeToLoad=o.TTL;var s=o["RELOAD-URI"],u=o["PATHWAY-CLONES"],l=o["PATHWAY-PRIORITY"];if(s)try{r.uri=new self.URL(s,e).href}catch(t){return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+s)}r.scheduleRefresh(r.uri||i.url),u&&r.clonePathways(u),l&&r.updatePathwayPriority(l)}else r.log("Steering VERSION "+o.VERSION+" not supported!")},onError:function(t,e,n,i){if(r.log("Error loading steering manifest: "+t.code+" "+t.text+" ("+e.url+")"),r.stopLoad(),410===t.code)return r.enabled=!1,void r.log("Steering manifest "+e.url+" no longer available");var a=1e3*r.timeToLoad;if(429!==t.code)r.scheduleRefresh(r.uri||e.url,a);else{var o=r.loader;if("function"==typeof(null==o?void 0:o.getResponseHeader)){var s=o.getResponseHeader("Retry-After");s&&(a=1e3*parseFloat(s))}r.log("Steering manifest "+e.url+" rate limited")}},onTimeout:function(t,e,n){r.log("Timeout loading steering manifest ("+e.url+")"),r.scheduleRefresh(r.uri||e.url)}};this.log("Requesting steering manifest: "+e),this.loader.load(o,l,c)},e.scheduleRefresh=function(t,e){var r=this;void 0===e&&(e=1e3*this.timeToLoad),self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((function(){r.loadSteeringManifest(t)}),e)},t}();function va(t,e,r,n){t&&Object.keys(e).forEach((function(i){var a=t.filter((function(t){return t.groupId===i})).map((function(t){var a=u({},t);return a.details=void 0,a.attrs=new P(a.attrs),a.url=a.attrs.URI=ma(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=e[i],a.attrs["PATHWAY-ID"]=n,a}));t.push.apply(t,a)}))}function ma(t,e,r,n){var i,a=n.HOST,o=n.PARAMS,s=n[r];e&&(i=null==s?void 0:s[e])&&(t=i);var u=new self.URL(t);return a&&!i&&(u.host=a),o&&Object.keys(o).sort().forEach((function(t){t&&u.searchParams.set(t,o[t])})),u.href}var ya=/^age:\s*[\d.]+\s*$/im,ba=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new F,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.loadInternal()},e.loadInternal=function(){var t=this,e=this.config,r=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var a=this.xhrSetup;a?Promise.resolve().then((function(){if(!t.stats.aborted)return a(n,r.url)})).catch((function(t){return n.open("GET",r.url,!0),a(n,r.url)})).then((function(){t.stats.aborted||t.openAndSendXhr(n,r,e)})).catch((function(e){t.callbacks.onError({code:n.status,text:e.message},r,n,i)})):this.openAndSendXhr(n,r,e)}},e.openAndSendXhr=function(t,e,r){t.readyState||t.open("GET",e.url,!0);var n=this.context.headers,i=r.loadPolicy,a=i.maxTimeToFirstByteMs,o=i.maxLoadTimeMs;if(n)for(var s in n)t.setRequestHeader(s,n[s]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&T(a)?a:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),t.send()},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var n=e.readyState,i=this.config;if(!r.aborted&&n>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;var a=e.status,o="text"!==e.responseType;if(a>=200&&a<300&&(o&&e.response||null!==e.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);var s=o?e.response:e.responseText,u="arraybuffer"===e.responseType?s.byteLength:s.length;if(r.loaded=r.total=u,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(r,t,s,e),!this.callbacks)return;var c={url:e.responseURL,data:s,code:a};this.callbacks.onSuccess(c,r,t,e)}else{var f=i.loadPolicy.errorRetry;Ke(f,r.retry,!1,a)?this.retry(f):(C.error(a+" while loading "+t.url),this.callbacks.onError({code:a,text:e.statusText},t,e,r))}}}},e.loadtimeout=function(){var t,e=null==(t=this.config)?void 0:t.loadPolicy.timeoutRetry;if(Ke(e,this.stats.retry,!0))this.retry(e);else{C.warn("timeout while loading "+this.context.url);var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}},e.retry=function(t){var e=this.context,r=this.stats;this.retryDelay=Ge(t,r.retry),r.retry++,C.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+e.url+", retrying "+r.retry+"/"+t.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&ya.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.loader&&new RegExp("^"+t+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null},t}(),Ea=/(\d+)-(\d+)\/(\d+)/,Ta=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||wa,this.controller=new self.AbortController,this.stats=new F}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;null!=t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var n=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var a=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(u({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),o=r.onProgress,s="arraybuffer"===t.responseType,l=s?"byteLength":"length",c=e.loadPolicy,f=c.maxTimeToFirstByteMs,h=c.maxLoadTimeMs;this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,a),self.clearTimeout(this.requestTimeout),e.timeout=f&&T(f)?f:h,this.requestTimeout=self.setTimeout((function(){n.abortInternal(),r.onTimeout(i,t,n.response)}),e.timeout),self.fetch(this.request).then((function(a){n.response=n.loader=a;var u=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(n.requestTimeout),e.timeout=h,n.requestTimeout=self.setTimeout((function(){n.abortInternal(),r.onTimeout(i,t,n.response)}),h-(u-i.loading.start)),!a.ok){var l=a.status,c=a.statusText;throw new Sa(c||"fetch, bad network response",l,a)}return i.loading.first=u,i.total=function(t){var e=t.get("Content-Range");if(e){var r=function(t){var e=Ea.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(T(r))return r}var n=t.get("Content-Length");if(n)return parseInt(n)}(a.headers)||i.total,o&&T(e.highWaterMark)?n.loadProgressively(a,i,t,e.highWaterMark,o):s?a.arrayBuffer():"json"===t.responseType?a.json():a.text()})).then((function(a){var s=n.response;self.clearTimeout(n.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);var u=a[l];u&&(i.loaded=i.total=u);var c={url:s.url,data:a,code:s.status};o&&!T(e.highWaterMark)&&o(i,t,a,s),r.onSuccess(c,i,t,s)})).catch((function(e){if(self.clearTimeout(n.requestTimeout),!i.aborted){var a=e&&e.code||0,o=e?e.message:null;r.onError({code:a,text:o},t,e?e.details:null,i)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.response?this.response.headers.get(t):null},e.loadProgressively=function(t,e,r,n,i){void 0===n&&(n=0);var a=new ei,o=t.body.getReader();return function s(){return o.read().then((function(o){if(o.done)return a.dataLength&&i(e,r,a.flush(),t),Promise.resolve(new ArrayBuffer(0));var u=o.value,l=u.length;return e.loaded+=l,l<n||a.dataLength?(a.push(u),a.dataLength>=n&&i(e,r,a.flush(),t)):i(e,r,u,t),s()})).catch((function(){return Promise.reject()}))}()},t}();function wa(t,e){return new self.Request(t.url,e)}var Sa=function(t){function e(e,r,n){var i;return(i=t.call(this,e)||this).code=void 0,i.details=void 0,i.code=r,i.details=n,i}return l(e,t),e}(p(Error)),Aa=/\s/,_a=e(e({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ba,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ti,bufferController:di,capLevelController:sa,errorController:Xe,fpsController:ua,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:et,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(t,e,r,n){for(var i,a,o,s,u,l=[],c=self.VTTCue||self.TextTrackCue,f=0;f<n.rows.length;f++)if(o=!0,s=0,u="",!(i=n.rows[f]).isEmpty()){for(var h,d=0;d<i.chars.length;d++)Aa.test(i.chars[d].uchar)&&o?s++:(u+=i.chars[d].uchar,o=!1);i.cueStartTime=e,e===r&&(r+=1e-4),s>=16?s--:s++;var p=Hi(u.trim()),g=Wi(e,r,p);null!=t&&null!=(h=t.cues)&&h.getCueById(g)||((a=new c(e,r,p)).id=g,a.line=f+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*s/32)),l.push(a))}return t&&l.length&&(l.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),l.forEach((function(e){return Ee(t,e)}))),l}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:oi,subtitleTrackController:ui,timelineController:aa,audioStreamController:ri,audioTrackController:ni,emeController:ca,cmcdController:pa,contentSteeringController:ga});function ka(t){return t&&"object"===a(t)?Array.isArray(t)?t.map(ka):Object.keys(t).reduce((function(e,r){return e[r]=ka(t[r]),e}),{}):t}var La=function(){function t(r){void 0===r&&(r={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Vn,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,x(r.debug||!1,"Hls instance");var n=this.config=function(t,r){if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==r.liveMaxLatencyDurationCount&&(void 0===r.liveSyncDurationCount||r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var n=ka(t),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(t){var e=("level"===t?"playlist":t)+"LoadPolicy",a=void 0===r[e],o=[];i.forEach((function(i){var s=t+"Loading"+i,u=r[s];if(void 0!==u&&a){o.push(s);var l=n[e].default;switch(r[e]={default:l},i){case"TimeOut":l.maxLoadTimeMs=u,l.maxTimeToFirstByteMs=u;break;case"MaxRetry":l.errorRetry.maxNumRetry=u,l.timeoutRetry.maxNumRetry=u;break;case"RetryDelay":l.errorRetry.retryDelayMs=u,l.timeoutRetry.retryDelayMs=u;break;case"MaxRetryTimeout":l.errorRetry.maxRetryDelayMs=u,l.timeoutRetry.maxRetryDelayMs=u}}})),o.length&&C.warn('hls.js config: "'+o.join('", "')+'" setting(s) are deprecated, use "'+e+'": '+JSON.stringify(r[e]))})),e(e({},n),r)}(t.DefaultConfig,r);this.userConfig=r,this._autoLevelCapping=-1,n.progressive&&function(t){var e=t.loader;e!==Ta&&e!==ba?(C.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Ta,t.progressive=!0,t.enableSoftwareAES=!0,C.log("[config]: Progressive streaming enabled, using FetchLoader"))}(n);var i=n.abrController,a=n.bufferController,o=n.capLevelController,s=n.errorController,u=n.fpsController,l=new s(this),c=this.abrController=new i(this),f=this.bufferController=new a(this),h=this.capLevelController=new o(this),d=new u(this),p=new ye(this),g=new Re(this),v=n.contentSteeringController,m=v?new v(this):null,y=this.levelController=new Qe(this,m),b=new ir(this),E=new hr(this.config),T=this.streamController=new Qn(this,b,E);h.setStreamController(T),d.setStreamController(T);var S=[p,y,T];m&&S.splice(1,0,m),this.networkControllers=S;var A=[c,f,h,d,g,b];this.audioTrackController=this.createController(n.audioTrackController,S);var _=n.audioStreamController;_&&S.push(new _(this,b,E)),this.subtitleTrackController=this.createController(n.subtitleTrackController,S);var k=n.subtitleStreamController;k&&S.push(new k(this,b,E)),this.createController(n.timelineController,A),E.emeController=this.emeController=this.createController(n.emeController,A),this.cmcdController=this.createController(n.cmcdController,A),this.latencyController=this.createController(xe,A),this.coreComponents=A,S.push(l);var L=l.onErrorOut;"function"==typeof L&&this.on(w.ERROR,L,l)}t.isSupported=function(){return function(){var t=zt();if(!t)return!1;var e=Ur(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!n}()};var r=t.prototype;return r.createController=function(t,e){if(t){var r=new t(this);return e&&e.push(r),r}return null},r.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},r.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},r.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},r.off=function(t,e,r,n){void 0===r&&(r=this),this._emitter.off(t,e,r,n)},r.listeners=function(t){return this._emitter.listeners(t)},r.emit=function(t,e,r){return this._emitter.emit(t,e,r)},r.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){C.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(w.ERROR,{type:S.OTHER_ERROR,details:A.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},r.listenerCount=function(t){return this._emitter.listenerCount(t)},r.destroy=function(){C.log("destroy"),this.trigger(w.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0;var t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null},r.attachMedia=function(t){C.log("attachMedia"),this._media=t,this.trigger(w.MEDIA_ATTACHING,{media:t})},r.detachMedia=function(){C.log("detachMedia"),this.trigger(w.MEDIA_DETACHING,void 0),this._media=null},r.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,n=this.url=E.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});C.log("loadSource:"+n),e&&r&&(r!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(w.MANIFEST_LOADING,{url:t})},r.startLoad=function(t){void 0===t&&(t=-1),C.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},r.stopLoad=function(){C.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},r.swapAudioCodec=function(){C.log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){C.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},r.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},n(t,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){C.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){C.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){C.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){C.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){C.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(C.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"ttfbEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(t){Ce.indexOf(t)>-1&&(this._maxHdcpLevel=t)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,n=0;n<r;n++)if(t[n].maxBitrate>=e)return n;return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.levels,r=this.autoLevelCapping,n=this.maxHdcpLevel;if(t=-1===r&&e&&e.length?e.length-1:r,n)for(var i=t;i--;){var a=e[i].attrs["HDCP-LEVEL"];if(a&&a<=n)return i}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.4.4"}},{key:"Events",get:function(){return w}},{key:"ErrorTypes",get:function(){return S}},{key:"ErrorDetails",get:function(){return A}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:_a},set:function(e){t.defaultConfig=e}}]),t}();return La.defaultConfig=void 0,La},"object"===a(e)?t.exports=u():void 0===(i="function"==typeof(n=u)?n.call(e,r,e,t):n)||(t.exports=i)}(!1)},4499:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.r(e),r.d(e,{default:function(){return u}});var a=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r,this.elements=e,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}var e,r;return e=t,(r=[{key:"check",value:function(){var t=this;return this.elements.forEach((function(e){var r=t.options.test(e,t.options),n=t.current.indexOf(e),i=n>-1,a=!r&&i;r&&!i&&(t.current.push(e),t.emit("enter",e)),a&&(t.current.splice(n,1),t.emit("exit",e))})),this}},{key:"on",value:function(t,e){return this.handlers[t].push(e),this}},{key:"once",value:function(t,e){return this.singles[t].unshift(e),this}},{key:"emit",value:function(t,e){for(;this.singles[t].length;)this.singles[t].pop()(e);for(var r=this.handlers[t].length;--r>-1;)this.handlers[t][r](e);return this}}])&&function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(a)?a:String(a)),i)}var a}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){var r=t.getBoundingClientRect(),n=r.top,i=r.right,a=r.bottom,o=r.left,s=r.width,u=r.height,l=a,c=window.innerWidth-o,f=window.innerHeight-n,h=i,d=e.threshold*s,p=e.threshold*u;return l>e.offset.top+p&&c>e.offset.right+d&&f>e.offset.bottom+p&&h>e.offset.left+d}var s=r(125),u=function(){if("undefined"!=typeof window){var t={history:[]},e={offset:{},threshold:0,test:o},r=(0,s.throttle)((function(){t.history.forEach((function(e){t[e].check()}))}),100);["scroll","resize","load"].forEach((function(t){return addEventListener(t,r)})),window.MutationObserver&&addEventListener("DOMContentLoaded",(function(){new MutationObserver(r).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}));var n=function(r){if("string"==typeof r){var n=[].slice.call(document.querySelectorAll(r));return t.history.indexOf(r)>-1?t[r].elements=n:(t[r]=function(t,e){return new a(t,e)}(n,e),t.history.push(r)),t[r]}};return n.offset=function(t){if(void 0===t)return e.offset;var r=function(t){return"number"==typeof t};return["top","right","bottom","left"].forEach(r(t)?function(r){return e.offset[r]=t}:function(n){return r(t[n])?e.offset[n]=t[n]:null}),e.offset},n.threshold=function(t){return"number"==typeof t&&t>=0&&t<=1?e.threshold=t:e.threshold},n.test=function(t){return"function"==typeof t?e.test=t:e.test},n.is=function(t){return e.test(t,e)},n.offset(0),n}}()},4403:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}t=r.nmd(t),function(e,r){var i=function(t,e,r){"use strict";var n,i;if(function(){var e,r={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in i=t.lazySizesConfig||t.lazysizesConfig||{},r)e in i||(i[e]=r[e])}(),!e||!e.getElementsByClassName)return{init:function(){},cfg:i,noSupport:!0};var a,o,s,u,l,c,f,h,d,p,g,v,m,y,b,E,T,w,S,A,_,k,L,R,x,C,I,D,P,O,M,F,N,U,B,j,G,H,K,V,q,z,W,Y,X=e.documentElement,$=t.HTMLPictureElement,Q="addEventListener",Z="getAttribute",J=t[Q].bind(t),tt=t.setTimeout,et=t.requestAnimationFrame||tt,rt=t.requestIdleCallback,nt=/^picture$/i,it=["load","error","lazyincluded","_lazyloaded"],at={},ot=Array.prototype.forEach,st=function(t,e){return at[e]||(at[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),at[e].test(t[Z]("class")||"")&&at[e]},ut=function(t,e){st(t,e)||t.setAttribute("class",(t[Z]("class")||"").trim()+" "+e)},lt=function(t,e){var r;(r=st(t,e))&&t.setAttribute("class",(t[Z]("class")||"").replace(r," "))},ct=function t(e,r,n){var i=n?Q:"removeEventListener";n&&t(e,r),it.forEach((function(t){e[i](t,r)}))},ft=function(t,r,i,a,o){var s=e.createEvent("Event");return i||(i={}),i.instance=n,s.initEvent(r,!a,!o),s.detail=i,t.dispatchEvent(s),s},ht=function(e,r){var n;!$&&(n=t.picturefill||i.pf)?(r&&r.src&&!e[Z]("srcset")&&e.setAttribute("srcset",r.src),n({reevaluate:!0,elements:[e]})):r&&r.src&&(e.src=r.src)},dt=function(t,e){return(getComputedStyle(t,null)||{})[e]},pt=function(t,e,r){for(r=r||t.offsetWidth;r<i.minSize&&e&&!t._lazysizesWidth;)r=e.offsetWidth,e=e.parentNode;return r},gt=(q=[],z=V=[],Y=function(t,r){H&&!r?t.apply(this,arguments):(z.push(t),K||(K=!0,(e.hidden?tt:et)(W)))},Y._lsFlush=W=function(){var t=z;for(z=V.length?q:V,H=!0,K=!1;t.length;)t.shift()();H=!1},Y),vt=function(t,e){return e?function(){gt(t)}:function(){var e=this,r=arguments;gt((function(){t.apply(e,r)}))}},mt=function(t){var e,n,i=function(){e=null,t()},a=function t(){var e=r.now()-n;e<99?tt(t,99-e):(rt||i)(i)};return function(){n=r.now(),e||(e=tt(a,99))}},yt=(T=/^img$/i,w=/^iframe$/i,S="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),A=0,_=0,k=-1,L=function(t){_--,(!t||_<0||!t.target)&&(_=0)},R=function(t){return null==E&&(E="hidden"==dt(e.body,"visibility")),E||!("hidden"==dt(t.parentNode,"visibility")&&"hidden"==dt(t,"visibility"))},x=function(t,r){var n,i=t,a=R(t);for(v-=r,b+=r,m-=r,y+=r;a&&(i=i.offsetParent)&&i!=e.body&&i!=X;)(a=(dt(i,"opacity")||1)>0)&&"visible"!=dt(i,"overflow")&&(n=i.getBoundingClientRect(),a=y>n.left&&m<n.right&&b>n.top-1&&v<n.bottom+1);return a},I=function(t){var e,n=0,a=i.throttleDelay,o=i.ricTimeout,s=function(){e=!1,n=r.now(),t()},u=rt&&o>49?function(){rt(s,{timeout:o}),o!==i.ricTimeout&&(o=i.ricTimeout)}:vt((function(){tt(s)}),!0);return function(t){var i;(t=!0===t)&&(o=33),e||(e=!0,(i=a-(r.now()-n))<0&&(i=0),t||i<9?u():tt(u,i))}}(C=function(){var t,r,a,o,s,u,f,d,T,w,L,C,I=n.elements;if((h=i.loadMode)&&_<8&&(t=I.length)){for(r=0,k++;r<t;r++)if(I[r]&&!I[r]._lazyRace)if(!S||n.prematureUnveil&&n.prematureUnveil(I[r]))U(I[r]);else if((d=I[r][Z]("data-expand"))&&(u=1*d)||(u=A),w||(w=!i.expand||i.expand<1?X.clientHeight>500&&X.clientWidth>500?500:370:i.expand,n._defEx=w,L=w*i.expFactor,C=i.hFac,E=null,A<L&&_<1&&k>2&&h>2&&!e.hidden?(A=L,k=0):A=h>1&&k>1&&_<6?w:0),T!==u&&(p=innerWidth+u*C,g=innerHeight+u,f=-1*u,T=u),a=I[r].getBoundingClientRect(),(b=a.bottom)>=f&&(v=a.top)<=g&&(y=a.right)>=f*C&&(m=a.left)<=p&&(b||y||m||v)&&(i.loadHidden||R(I[r]))&&(c&&_<3&&!d&&(h<3||k<4)||x(I[r],u))){if(U(I[r]),s=!0,_>9)break}else!s&&c&&!o&&_<4&&k<4&&h>2&&(l[0]||i.preloadAfterLoad)&&(l[0]||!d&&(b||y||m||v||"auto"!=I[r][Z](i.sizesAttr)))&&(o=l[0]||I[r]);o&&!s&&U(o)}}),P=vt(D=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(L(t),ut(e,i.loadedClass),lt(e,i.loadingClass),ct(e,O),ft(e,"lazyloaded"))}),O=function(t){P({target:t.target})},M=function(t,e){try{t.contentWindow.location.replace(e)}catch(r){t.src=e}},F=function(t){var e,r=t[Z](i.srcsetAttr);(e=i.customMedia[t[Z]("data-media")||t[Z]("media")])&&t.setAttribute("media",e),r&&t.setAttribute("srcset",r)},N=vt((function(t,e,r,n,a){var o,s,u,l,c,h;(c=ft(t,"lazybeforeunveil",e)).defaultPrevented||(n&&(r?ut(t,i.autosizesClass):t.setAttribute("sizes",n)),s=t[Z](i.srcsetAttr),o=t[Z](i.srcAttr),a&&(l=(u=t.parentNode)&&nt.test(u.nodeName||"")),h=e.firesLoad||"src"in t&&(s||o||l),c={target:t},ut(t,i.loadingClass),h&&(clearTimeout(f),f=tt(L,2500),ct(t,O,!0)),l&&ot.call(u.getElementsByTagName("source"),F),s?t.setAttribute("srcset",s):o&&!l&&(w.test(t.nodeName)?M(t,o):t.src=o),a&&(s||l)&&ht(t,{src:o})),t._lazyRace&&delete t._lazyRace,lt(t,i.lazyClass),gt((function(){var e=t.complete&&t.naturalWidth>1;h&&!e||(e&&ut(t,"ls-is-cached"),D(c),t._lazyCache=!0,tt((function(){"_lazyCache"in t&&delete t._lazyCache}),9)),"lazy"==t.loading&&_--}),!0)})),U=function(t){if(!t._lazyRace){var e,r=T.test(t.nodeName),n=r&&(t[Z](i.sizesAttr)||t[Z]("sizes")),a="auto"==n;(!a&&c||!r||!t[Z]("src")&&!t.srcset||t.complete||st(t,i.errorClass)||!st(t,i.lazyClass))&&(e=ft(t,"lazyunveilread").detail,a&&bt.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,_++,N(t,e,a,n,r))}},B=mt((function(){i.loadMode=3,I()})),G=function t(){c||(r.now()-d<999?tt(t,999):(c=!0,i.loadMode=3,I(),J("scroll",j,!0)))},{_:function(){d=r.now(),n.elements=e.getElementsByClassName(i.lazyClass),l=e.getElementsByClassName(i.lazyClass+" "+i.preloadClass),J("scroll",I,!0),J("resize",I,!0),J("pageshow",(function(t){if(t.persisted){var r=e.querySelectorAll("."+i.loadingClass);r.length&&r.forEach&&et((function(){r.forEach((function(t){t.complete&&U(t)}))}))}})),t.MutationObserver?new MutationObserver(I).observe(X,{childList:!0,subtree:!0,attributes:!0}):(X[Q]("DOMNodeInserted",I,!0),X[Q]("DOMAttrModified",I,!0),setInterval(I,999)),J("hashchange",I,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(t){e[Q](t,I,!0)})),/d$|^c/.test(e.readyState)?G():(J("load",G),e[Q]("DOMContentLoaded",I),tt(G,2e4)),n.elements.length?(C(),gt._lsFlush()):I()},checkElems:I,unveil:U,_aLSL:j=function(){3==i.loadMode&&(i.loadMode=2),B()}}),bt=(o=vt((function(t,e,r,n){var i,a,o;if(t._lazysizesWidth=n,n+="px",t.setAttribute("sizes",n),nt.test(e.nodeName||""))for(a=0,o=(i=e.getElementsByTagName("source")).length;a<o;a++)i[a].setAttribute("sizes",n);r.detail.dataAttr||ht(t,r.detail)})),s=function(t,e,r){var n,i=t.parentNode;i&&(r=pt(t,i,r),(n=ft(t,"lazybeforesizes",{width:r,dataAttr:!!e})).defaultPrevented||(r=n.detail.width)&&r!==t._lazysizesWidth&&o(t,i,n,r))},{_:function(){a=e.getElementsByClassName(i.autosizesClass),J("resize",u)},checkElems:u=mt((function(){var t,e=a.length;if(e)for(t=0;t<e;t++)s(a[t])})),updateElem:s}),Et=function t(){!t.i&&e.getElementsByClassName&&(t.i=!0,bt._(),yt._())};return tt((function(){i.init&&Et()})),n={cfg:i,autoSizer:bt,loader:yt,init:Et,uP:ht,aC:ut,rC:lt,hC:st,fire:ft,gW:pt,rAF:gt}}(e,e.document,Date);e.lazySizes=i,"object"==n(t)&&t.exports&&(t.exports=i)}("undefined"!=typeof window?window:{})},4185:function(t,e,r){var n,i,a,s,u;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=r.nmd(t),s="undefined"!=typeof window?window:0,u=function(t,e,r,n){"use strict";var i,a=e.createElement("a").style,o="objectFit"in a,s=/object-fit["']*\s*:\s*["']*(contain|cover)/,u=/object-position["']*\s*:\s*["']*(.+?)(?=($|,|'|"|;))/,l="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c=/\(|\)|'/,f={center:"center","50% 50%":"center"};if(!o||!o||!("objectPosition"in a)){var h=function(t){if(t.detail.instance==r){var n=t.target,a=function(t){var e=(getComputedStyle(t,null)||{}).fontFamily||"",r=e.match(s)||"",n=r&&e.match(u)||"";return n&&(n=n[1]),{fit:r&&r[1]||"",position:f[n]||n||"center"}}(n);return!(!a.fit||o&&"center"==a.position||(function(t,n){var a,o,s,u,f=r.cfg,h=function(){var e=t.currentSrc||t.src;e&&o!==e&&(o=e,u.backgroundImage="url("+(c.test(e)?JSON.stringify(e):e)+")",a||(a=!0,r.rC(s,f.loadingClass),r.aC(s,f.loadedClass)))},d=function(){r.rAF(h)};t._lazysizesParentFit=n.fit,t.addEventListener("lazyloaded",d,!0),t.addEventListener("load",d,!0),r.rAF((function(){var a=t,o=t.parentNode;"PICTURE"==o.nodeName.toUpperCase()&&(a=o,o=o.parentNode),function(t){var e=t.previousElementSibling;e&&r.hC(e,i)&&(e.parentNode.removeChild(e),t.style.position=e.getAttribute("data-position")||"",t.style.visibility=e.getAttribute("data-visibility")||"")}(a),i||function(){if(!i){var t=e.createElement("style");i=r.cfg.objectFitClass||"lazysizes-display-clone",e.querySelector("head").appendChild(t)}}(),s=t.cloneNode(!1),u=s.style,s.addEventListener("load",(function(){var t=s.currentSrc||s.src;t&&t!=l&&(s.src=l,s.srcset="")})),r.rC(s,f.loadedClass),r.rC(s,f.lazyClass),r.rC(s,f.autosizesClass),r.aC(s,f.loadingClass),r.aC(s,i),["data-parent-fit","data-parent-container","data-object-fit-polyfilled",f.srcsetAttr,f.srcAttr].forEach((function(t){s.removeAttribute(t)})),s.src=l,s.srcset="",u.backgroundRepeat="no-repeat",u.backgroundPosition=n.position,u.backgroundSize=n.fit,s.setAttribute("data-position",a.style.position),s.setAttribute("data-visibility",a.style.visibility),a.style.visibility="hidden",a.style.position="absolute",t.setAttribute("data-parent-fit",n.fit),t.setAttribute("data-parent-container","prev"),t.setAttribute("data-object-fit-polyfilled",""),t._objectFitPolyfilledDisplay=s,o.insertBefore(s,a),t._lazysizesParentFit&&delete t._lazysizesParentFit,t.complete&&h()}))}(n,a),0))}};t.addEventListener("lazybeforesizes",(function(t){if(t.detail.instance==r){var e=t.target;null==e.getAttribute("data-object-fit-polyfilled")||e._objectFitPolyfilledDisplay||h(t)||r.rAF((function(){e.removeAttribute("data-object-fit-polyfilled")}))}})),t.addEventListener("lazyunveilread",h,!0),n&&n.detail&&h(n)}},s&&(u=u.bind(null,s,s.document),"object"==o(t)&&t.exports?u(r(4403)):(i=[r(4403)],void 0===(a="function"==typeof(n=u)?n.apply(e,i):n)||(t.exports=a)))},5673:function(t,e,r){var n,i,a,s,u;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=r.nmd(t),s="undefined"!=typeof window?window:0,u=function(t,e,r){"use strict";if(t.addEventListener){var n=/\s+(\d+)(w|h)\s+(\d+)(w|h)/,i=/parent-fit["']*\s*:\s*["']*(contain|cover|width)/,a=/parent-container["']*\s*:\s*["']*(.+?)(?=(\s|$|,|'|"|;))/,o=/^picture$/i,s=r.cfg,u={getParent:function(e,r){var n=e,i=e.parentNode;return r&&"prev"!=r||!i||!o.test(i.nodeName||"")||(i=i.parentNode),"self"!=r&&(n="prev"==r?e.previousElementSibling:r&&(i.closest||t.jQuery)&&(i.closest?i.closest(r):jQuery(i).closest(r)[0])||i),n},getFit:function(t){var e,r,n=getComputedStyle(t,null)||{},o=n.content||n.fontFamily,s={fit:t._lazysizesParentFit||t.getAttribute("data-parent-fit")};return!s.fit&&o&&(e=o.match(i))&&(s.fit=e[1]),s.fit?(!(r=t._lazysizesParentContainer||t.getAttribute("data-parent-container"))&&o&&(e=o.match(a))&&(r=e[1]),s.parent=u.getParent(t,r)):s.fit=n.objectFit,s},getImageRatio:function(e){var r,i,a,u,l,c,f,h=e.parentNode,d=h&&o.test(h.nodeName||"")?h.querySelectorAll("source, img"):[e];for(r=0;r<d.length;r++)if(i=(e=d[r]).getAttribute(s.srcsetAttr)||e.getAttribute("srcset")||e.getAttribute("data-pfsrcset")||e.getAttribute("data-risrcset")||"",a=e._lsMedia||e.getAttribute("media"),a=s.customMedia[e.getAttribute("data-media")||a]||a,i&&(!a||(t.matchMedia&&matchMedia(a)||{}).matches)){(u=parseFloat(e.getAttribute("data-aspectratio")))||((l=i.match(n))?"w"==l[2]?(c=l[1],f=l[3]):(c=l[3],f=l[1]):(c=e.getAttribute("width"),f=e.getAttribute("height")),u=c/f);break}return u},calculateSize:function(t,e){var r,n,i,a=this.getFit(t),o=a.fit,s=a.parent;return"width"==o||("contain"==o||"cover"==o)&&(n=this.getImageRatio(t))?(s?e=s.clientWidth:s=t,i=e,"width"==o?i=e:(r=e/s.clientHeight)&&("cover"==o&&r<n||"contain"==o&&r>n)&&(i=e*(n/r)),i):e}};r.parentFit=u,e.addEventListener("lazybeforesizes",(function(t){if(!t.defaultPrevented&&t.detail.instance==r){var e=t.target;t.detail.width=u.calculateSize(e,t.detail.width)}}))}},s&&(u=u.bind(null,s,s.document),"object"==o(t)&&t.exports?u(r(4403)):(i=[r(4403)],void 0===(a="function"==typeof(n=u)?n.apply(e,i):n)||(t.exports=a)))},3869:function(t,e,r){var n,i,a,s,u;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=r.nmd(t),s=window,u=function(t,e,r){"use strict";var n,i;"srcset"in e.createElement("img")&&(n=/^img$/i,i=function(t){t.target.style.backgroundSize="",t.target.style.backgroundImage="",t.target.removeEventListener(t.type,i)},e.addEventListener("lazybeforeunveil",(function(t){if(t.detail.instance==r){var e=t.target;if(n.test(e.nodeName)){var a=e.getAttribute("src");a&&(e.style.backgroundSize="100% 100%",e.style.backgroundImage="url("+a+")",e.removeAttribute("src"),e.addEventListener("load",i))}}}),!1))},u=u.bind(null,s,s.document),"object"==o(t)&&t.exports?u(r(4403)):(i=[r(4403)],void 0===(a="function"==typeof(n=u)?n.apply(e,i):n)||(t.exports=a))},6556:function(t,e,r){var n,i,a,s,u;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=r.nmd(t),s="undefined"!=typeof window?window:0,u=function(t,e,r){"use strict";var n,i,a,o,s,u,l,c,f,h,d,p,g,v,m,y,b=r.cfg,E=e.createElement("img"),T="sizes"in E&&"srcset"in E,w=/\s+\d+h/g,S=(i=/\s+(\d+)(w|h)\s+(\d+)(w|h)/,a=Array.prototype.forEach,function(){var t=e.createElement("img"),n=function(t){var e,r,n=t.getAttribute(b.srcsetAttr);n&&(r=n.match(i))&&((e="w"==r[2]?r[1]/r[3]:r[3]/r[1])&&t.setAttribute("data-aspectratio",e),t.setAttribute(b.srcsetAttr,n.replace(w,"")))},o=function(t){if(t.detail.instance==r){var e=t.target.parentNode;e&&"PICTURE"==e.nodeName&&a.call(e.getElementsByTagName("source"),n),n(t.target)}},s=function(){t.currentSrc&&e.removeEventListener("lazybeforeunveil",o)};e.addEventListener("lazybeforeunveil",o),t.onload=s,t.onerror=s,t.srcset="data:,a 1w 1h",t.complete&&s()});b.supportsType||(b.supportsType=function(t){return!t}),t.HTMLPictureElement&&T?!r.hasHDescriptorFix&&e.msElementsFromPoint&&(r.hasHDescriptorFix=!0,S()):t.picturefill||b.pf||(b.pf=function(e){var r,i;if(!t.picturefill)for(r=0,i=e.elements.length;r<i;r++)n(e.elements[r])},c=function(t,e){return t.w-e.w},f=/^\s*\d+\.*\d*px\s*$/,s=/(([^,\s].[^\s]+)\s+(\d+)w)/g,u=/\s/,l=function(t,e,r,n){o.push({c:e,u:r,w:1*n})},d=function t(){var r,i,a;t.init||(t.init=!0,addEventListener("resize",(i=e.getElementsByClassName("lazymatchmedia"),a=function(){var t,e;for(t=0,e=i.length;t<e;t++)n(i[t])},function(){clearTimeout(r),r=setTimeout(a,66)})))},p=function(e,n){var i,a=e.getAttribute("srcset")||e.getAttribute(b.srcsetAttr);!a&&n&&(a=e._lazypolyfill?e._lazypolyfill._set:e.getAttribute(b.srcAttr)||e.getAttribute("src")),e._lazypolyfill&&e._lazypolyfill._set==a||(i=h(a||""),n&&e.parentNode&&(i.isPicture="PICTURE"==e.parentNode.nodeName.toUpperCase(),i.isPicture&&t.matchMedia&&(r.aC(e,"lazymatchmedia"),d())),i._set=a,Object.defineProperty(e,"_lazypolyfill",{value:i,writable:!0}))},g=function(e){return t.matchMedia?(g=function(t){return!t||(matchMedia(t)||{}).matches},g(e)):!e},v=function(e){var n,i,a,o,s,u,l;if(p(o=e,!0),(s=o._lazypolyfill).isPicture)for(i=0,a=(n=e.parentNode.getElementsByTagName("source")).length;i<a;i++)if(b.supportsType(n[i].getAttribute("type"),e)&&g(n[i].getAttribute("media"))){o=n[i],p(o),s=o._lazypolyfill;break}return s.length>1?(l=o.getAttribute("sizes")||"",l=f.test(l)&&parseInt(l,10)||r.gW(e,e.parentNode),s.d=function(e){var n=t.devicePixelRatio||1,i=r.getX&&r.getX(e);return Math.min(i||n,2.5,n)}(e),!s.src||!s.w||s.w<l?(s.w=l,u=function(t){for(var e,r,n=t.length,i=t[n-1],a=0;a<n;a++)if((i=t[a]).d=i.w/t.w,i.d>=t.d){!i.cached&&(e=t[a-1])&&e.d>t.d-.13*Math.pow(t.d,2.2)&&(r=Math.pow(e.d-.6,1.6),e.cached&&(e.d+=.15*r),e.d+(i.d-t.d)*r>t.d&&(i=e));break}return i}(s.sort(c)),s.src=u):u=s.src):u=s[0],u},(m=function(t){if(!T||!t.parentNode||"PICTURE"==t.parentNode.nodeName.toUpperCase()){var e=v(t);e&&e.u&&t._lazypolyfill.cur!=e.u&&(t._lazypolyfill.cur=e.u,e.cached=!0,t.setAttribute(b.srcAttr,e.u),t.setAttribute("src",e.u))}}).parse=h=function(t){return o=[],(t=t.trim()).replace(w,"").replace(s,l),o.length||!t||u.test(t)||o.push({c:t,u:t,w:99}),o},n=m,b.loadedClass&&b.loadingClass&&(y=[],['img[sizes$="px"][srcset].',"picture > img:not([srcset])."].forEach((function(t){y.push(t+b.loadedClass),y.push(t+b.loadingClass)})),b.pf({elements:e.querySelectorAll(y.join(", "))})))},s&&(u=u.bind(null,s,s.document),"object"==o(t)&&t.exports?u(r(4403)):(i=[r(4403)],void 0===(a="function"==typeof(n=u)?n.apply(e,i):n)||(t.exports=a)))},125:function(t,e,r){var n;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}t=r.nmd(t),function(){var a,o="Expected a function",s="__lodash_hash_undefined__",u="__lodash_placeholder__",l=32,c=128,f=1/0,h=9007199254740991,d=NaN,p=4294967295,g=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],v="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",E="[object Error]",T="[object Function]",w="[object GeneratorFunction]",S="[object Map]",A="[object Number]",_="[object Object]",k="[object Promise]",L="[object RegExp]",R="[object Set]",x="[object String]",C="[object Symbol]",I="[object WeakMap]",D="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",N="[object Int16Array]",U="[object Int32Array]",B="[object Uint8Array]",j="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",K=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,Y=RegExp(z.source),X=RegExp(W.source),$=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(rt.source),it=/^\s+|\s+$/g,at=/^\s+/,ot=/\s+$/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,Tt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",At="\\u2700-\\u27bf",_t="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",Lt="\\ufe0e\\ufe0f",Rt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xt="["+wt+"]",Ct="["+Rt+"]",It="["+St+"]",Dt="\\d+",Pt="["+At+"]",Ot="["+_t+"]",Mt="[^"+wt+Rt+Dt+At+_t+kt+"]",Ft="\\ud83c[\\udffb-\\udfff]",Nt="[^"+wt+"]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+kt+"]",Ht="(?:"+Ot+"|"+Mt+")",Kt="(?:"+jt+"|"+Mt+")",Vt="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",zt="(?:"+It+"|"+Ft+")?",Wt="["+Lt+"]?",Yt=Wt+zt+"(?:\\u200d(?:"+[Nt,Ut,Bt].join("|")+")"+Wt+zt+")*",Xt="(?:"+[Pt,Ut,Bt].join("|")+")"+Yt,$t="(?:"+[Nt+It+"?",It,Ut,Bt,xt].join("|")+")",Qt=RegExp("['’]","g"),Zt=RegExp(It,"g"),Jt=RegExp(Ft+"(?="+Ft+")|"+$t+Yt,"g"),te=RegExp([jt+"?"+Ot+"+"+Vt+"(?="+[Ct,jt,"$"].join("|")+")",Kt+"+"+qt+"(?="+[Ct,jt+Ht,"$"].join("|")+")",jt+"?"+Ht+"+"+Vt,jt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Xt].join("|"),"g"),ee=RegExp("[\\u200d"+wt+St+Lt+"]"),re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,ae={};ae[O]=ae[M]=ae[F]=ae[N]=ae[U]=ae[B]=ae[j]=ae[G]=ae[H]=!0,ae[v]=ae[m]=ae[D]=ae[y]=ae[P]=ae[b]=ae[E]=ae[T]=ae[S]=ae[A]=ae[_]=ae[L]=ae[R]=ae[x]=ae[I]=!1;var oe={};oe[v]=oe[m]=oe[D]=oe[P]=oe[y]=oe[b]=oe[O]=oe[M]=oe[F]=oe[N]=oe[U]=oe[S]=oe[A]=oe[_]=oe[L]=oe[R]=oe[x]=oe[C]=oe[B]=oe[j]=oe[G]=oe[H]=!0,oe[E]=oe[T]=oe[I]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,le=parseInt,ce="object"==(void 0===r.g?"undefined":i(r.g))&&r.g&&r.g.Object===Object&&r.g,fe="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,he=ce||fe||Function("return this")(),de="object"==i(e)&&e&&!e.nodeType&&e,pe=de&&"object"==i(t)&&t&&!t.nodeType&&t,ge=pe&&pe.exports===de,ve=ge&&ce.process,me=function(){try{return pe&&pe.require&&pe.require("util").types||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),ye=me&&me.isArrayBuffer,be=me&&me.isDate,Ee=me&&me.isMap,Te=me&&me.isRegExp,we=me&&me.isSet,Se=me&&me.isTypedArray;function Ae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function _e(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(n,o,r(o),t)}return n}function ke(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Le(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function Re(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function xe(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function Ce(t,e){return!(null==t||!t.length)&&je(t,e,0)>-1}function Ie(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function De(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Oe(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function Me(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function Fe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Ne=Ve("length");function Ue(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Be(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function je(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Be(t,He,r)}function Ge(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function He(t){return t!=t}function Ke(t,e){var r=null==t?0:t.length;return r?We(t,e)/r:d}function Ve(t){return function(e){return null==e?a:e[t]}}function qe(t){return function(e){return null==t?a:t[e]}}function ze(t,e,r,n,i){return i(t,(function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)})),r}function We(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==a&&(r=r===a?o:r+o)}return r}function Ye(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Xe(t){return function(e){return t(e)}}function $e(t,e){return De(e,(function(e){return t[e]}))}function Qe(t,e){return t.has(e)}function Ze(t,e){for(var r=-1,n=t.length;++r<n&&je(e,t[r],0)>-1;);return r}function Je(t,e){for(var r=t.length;r--&&je(e,t[r],0)>-1;);return r}function tr(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var er=qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rr=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nr(t){return"\\"+se[t]}function ir(t){return ee.test(t)}function ar(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function or(t,e){return function(r){return t(e(r))}}function sr(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==u||(t[r]=u,a[i++]=r)}return a}function ur(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function cr(t){return ir(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):Ne(t)}function fr(t){return ir(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}var hr=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dr=function t(e){var r,n=(e=null==e?he:dr.defaults(he.Object(),e,dr.pick(he,ne))).Array,wt=e.Date,St=e.Error,At=e.Function,_t=e.Math,kt=e.Object,Lt=e.RegExp,Rt=e.String,xt=e.TypeError,Ct=n.prototype,It=At.prototype,Dt=kt.prototype,Pt=e["__core-js_shared__"],Ot=It.toString,Mt=Dt.hasOwnProperty,Ft=0,Nt=(r=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Ut=Dt.toString,Bt=Ot.call(kt),jt=he._,Gt=Lt("^"+Ot.call(Mt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ge?e.Buffer:a,Kt=e.Symbol,Vt=e.Uint8Array,qt=Ht?Ht.allocUnsafe:a,zt=or(kt.getPrototypeOf,kt),Wt=kt.create,Yt=Dt.propertyIsEnumerable,Xt=Ct.splice,$t=Kt?Kt.isConcatSpreadable:a,Jt=Kt?Kt.iterator:a,ee=Kt?Kt.toStringTag:a,se=function(){try{var t=la(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,fe=wt&&wt.now!==he.Date.now&&wt.now,de=e.setTimeout!==he.setTimeout&&e.setTimeout,pe=_t.ceil,ve=_t.floor,me=kt.getOwnPropertySymbols,Ne=Ht?Ht.isBuffer:a,qe=e.isFinite,pr=Ct.join,gr=or(kt.keys,kt),vr=_t.max,mr=_t.min,yr=wt.now,br=e.parseInt,Er=_t.random,Tr=Ct.reverse,wr=la(e,"DataView"),Sr=la(e,"Map"),Ar=la(e,"Promise"),_r=la(e,"Set"),kr=la(e,"WeakMap"),Lr=la(kt,"create"),Rr=kr&&new kr,xr={},Cr=Ua(wr),Ir=Ua(Sr),Dr=Ua(Ar),Pr=Ua(_r),Or=Ua(kr),Mr=Kt?Kt.prototype:a,Fr=Mr?Mr.valueOf:a,Nr=Mr?Mr.toString:a;function Ur(t){if(rs(t)&&!qo(t)&&!(t instanceof Hr)){if(t instanceof Gr)return t;if(Mt.call(t,"__wrapped__"))return Ba(t)}return new Gr(t)}var Br=function(){function t(){}return function(e){if(!es(e))return{};if(Wt)return Wt(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function jr(){}function Gr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function Hr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Kr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Vr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function zr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new qr;++e<r;)this.add(t[e])}function Wr(t){var e=this.__data__=new Vr(t);this.size=e.size}function Yr(t,e){var r=qo(t),n=!r&&Vo(t),i=!r&&!n&&Xo(t),a=!r&&!n&&!i&&cs(t),o=r||n||i||a,s=o?Ye(t.length,Rt):[],u=s.length;for(var l in t)!e&&!Mt.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||va(l,u))||s.push(l);return s}function Xr(t){var e=t.length;return e?t[zn(0,e-1)]:a}function $r(t,e){return Pa(Li(t),on(e,0,t.length))}function Qr(t){return Pa(Li(t))}function Zr(t,e,r){(r!==a&&!Go(t[e],r)||r===a&&!(e in t))&&nn(t,e,r)}function Jr(t,e,r){var n=t[e];Mt.call(t,e)&&Go(n,r)&&(r!==a||e in t)||nn(t,e,r)}function tn(t,e){for(var r=t.length;r--;)if(Go(t[r][0],e))return r;return-1}function en(t,e,r,n){return fn(t,(function(t,i,a){e(n,t,r(t),a)})),n}function rn(t,e){return t&&Ri(e,Ds(e),t)}function nn(t,e,r){"__proto__"==e&&se?se(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function an(t,e){for(var r=-1,i=e.length,o=n(i),s=null==t;++r<i;)o[r]=s?a:Ls(t,e[r]);return o}function on(t,e,r){return t==t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function sn(t,e,r,n,i,o){var s,u=1&e,l=2&e,c=4&e;if(r&&(s=i?r(t,n,i,o):r(t)),s!==a)return s;if(!es(t))return t;var f=qo(t);if(f){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!u)return Li(t,s)}else{var h=ha(t),d=h==T||h==w;if(Xo(t))return Ti(t,u);if(h==_||h==v||d&&!i){if(s=l||d?{}:pa(t),!u)return l?function(t,e){return Ri(t,fa(t),e)}(t,function(t,e){return t&&Ri(e,Ps(e),t)}(s,t)):function(t,e){return Ri(t,ca(t),e)}(t,rn(s,t))}else{if(!oe[h])return i?t:{};s=function(t,e,r){var n,i=t.constructor;switch(e){case D:return wi(t);case y:case b:return new i(+t);case P:return function(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case O:case M:case F:case N:case U:case B:case j:case G:case H:return Si(t,r);case S:return new i;case A:case x:return new i(t);case L:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case R:return new i;case C:return n=t,Fr?kt(Fr.call(n)):{}}}(t,h,u)}}o||(o=new Wr);var p=o.get(t);if(p)return p;o.set(t,s),ss(t)?t.forEach((function(n){s.add(sn(n,e,r,n,t,o))})):ns(t)&&t.forEach((function(n,i){s.set(i,sn(n,e,r,i,t,o))}));var g=f?a:(c?l?ra:ea:l?Ps:Ds)(t);return ke(g||t,(function(n,i){g&&(n=t[i=n]),Jr(s,i,sn(n,e,r,i,t,o))})),s}function un(t,e,r){var n=r.length;if(null==t)return!n;for(t=kt(t);n--;){var i=r[n],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return!1}return!0}function ln(t,e,r){if("function"!=typeof t)throw new xt(o);return xa((function(){t.apply(a,r)}),e)}function cn(t,e,r,n){var i=-1,a=Ce,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;r&&(e=De(e,Xe(r))),n?(a=Ie,o=!1):e.length>=200&&(a=Qe,o=!1,e=new zr(e));t:for(;++i<s;){var c=t[i],f=null==r?c:r(c);if(c=n||0!==c?c:0,o&&f==f){for(var h=l;h--;)if(e[h]===f)continue t;u.push(c)}else a(e,f,n)||u.push(c)}return u}Ur.templateSettings={escape:$,evaluate:Q,interpolate:Z,variable:"",imports:{_:Ur}},Ur.prototype=jr.prototype,Ur.prototype.constructor=Ur,Gr.prototype=Br(jr.prototype),Gr.prototype.constructor=Gr,Hr.prototype=Br(jr.prototype),Hr.prototype.constructor=Hr,Kr.prototype.clear=function(){this.__data__=Lr?Lr(null):{},this.size=0},Kr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Kr.prototype.get=function(t){var e=this.__data__;if(Lr){var r=e[t];return r===s?a:r}return Mt.call(e,t)?e[t]:a},Kr.prototype.has=function(t){var e=this.__data__;return Lr?e[t]!==a:Mt.call(e,t)},Kr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Lr&&e===a?s:e,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(t){var e=this.__data__,r=tn(e,t);return!(r<0||(r==e.length-1?e.pop():Xt.call(e,r,1),--this.size,0))},Vr.prototype.get=function(t){var e=this.__data__,r=tn(e,t);return r<0?a:e[r][1]},Vr.prototype.has=function(t){return tn(this.__data__,t)>-1},Vr.prototype.set=function(t,e){var r=this.__data__,n=tn(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new Kr,map:new(Sr||Vr),string:new Kr}},qr.prototype.delete=function(t){var e=sa(this,t).delete(t);return this.size-=e?1:0,e},qr.prototype.get=function(t){return sa(this,t).get(t)},qr.prototype.has=function(t){return sa(this,t).has(t)},qr.prototype.set=function(t,e){var r=sa(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},zr.prototype.add=zr.prototype.push=function(t){return this.__data__.set(t,s),this},zr.prototype.has=function(t){return this.__data__.has(t)},Wr.prototype.clear=function(){this.__data__=new Vr,this.size=0},Wr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Wr.prototype.get=function(t){return this.__data__.get(t)},Wr.prototype.has=function(t){return this.__data__.has(t)},Wr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!Sr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(t,e),this.size=r.size,this};var fn=Ii(bn),hn=Ii(En,!0);function dn(t,e){var r=!0;return fn(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function pn(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(null!=s&&(u===a?s==s&&!ls(s):r(s,u)))var u=s,l=o}return l}function gn(t,e){var r=[];return fn(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function vn(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=ga),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?vn(s,e-1,r,n,i):Pe(i,s):n||(i[i.length]=s)}return i}var mn=Di(),yn=Di(!0);function bn(t,e){return t&&mn(t,e,Ds)}function En(t,e){return t&&yn(t,e,Ds)}function Tn(t,e){return xe(e,(function(e){return Zo(t[e])}))}function wn(t,e){for(var r=0,n=(e=mi(e,t)).length;null!=t&&r<n;)t=t[Na(e[r++])];return r&&r==n?t:a}function Sn(t,e,r){var n=e(t);return qo(t)?n:Pe(n,r(t))}function An(t){return null==t?t===a?"[object Undefined]":"[object Null]":ee&&ee in kt(t)?function(t){var e=Mt.call(t,ee),r=t[ee];try{t[ee]=a;var n=!0}catch(t){}var i=Ut.call(t);return n&&(e?t[ee]=r:delete t[ee]),i}(t):function(t){return Ut.call(t)}(t)}function _n(t,e){return t>e}function kn(t,e){return null!=t&&Mt.call(t,e)}function Ln(t,e){return null!=t&&e in kt(t)}function Rn(t,e,r){for(var i=r?Ie:Ce,o=t[0].length,s=t.length,u=s,l=n(s),c=1/0,f=[];u--;){var h=t[u];u&&e&&(h=De(h,Xe(e))),c=mr(h.length,c),l[u]=!r&&(e||o>=120&&h.length>=120)?new zr(u&&h):a}h=t[0];var d=-1,p=l[0];t:for(;++d<o&&f.length<c;){var g=h[d],v=e?e(g):g;if(g=r||0!==g?g:0,!(p?Qe(p,v):i(f,v,r))){for(u=s;--u;){var m=l[u];if(!(m?Qe(m,v):i(t[u],v,r)))continue t}p&&p.push(v),f.push(g)}}return f}function xn(t,e,r){var n=null==(t=_a(t,e=mi(e,t)))?t:t[Na($a(e))];return null==n?a:Ae(n,t,r)}function Cn(t){return rs(t)&&An(t)==v}function In(t,e,r,n,i){return t===e||(null==t||null==e||!rs(t)&&!rs(e)?t!=t&&e!=e:function(t,e,r,n,i,o){var s=qo(t),u=qo(e),l=s?m:ha(t),c=u?m:ha(e),f=(l=l==v?_:l)==_,h=(c=c==v?_:c)==_,d=l==c;if(d&&Xo(t)){if(!Xo(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Wr),s||cs(t)?Ji(t,e,r,n,i,o):function(t,e,r,n,i,a,o){switch(r){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!a(new Vt(t),new Vt(e)));case y:case b:case A:return Go(+t,+e);case E:return t.name==e.name&&t.message==e.message;case L:case x:return t==e+"";case S:var s=ar;case R:var u=1&n;if(s||(s=ur),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=2,o.set(t,e);var c=Ji(s(t),s(e),n,i,a,o);return o.delete(t),c;case C:if(Fr)return Fr.call(t)==Fr.call(e)}return!1}(t,e,l,r,n,i,o);if(!(1&r)){var p=f&&Mt.call(t,"__wrapped__"),g=h&&Mt.call(e,"__wrapped__");if(p||g){var T=p?t.value():t,w=g?e.value():e;return o||(o=new Wr),i(T,w,r,n,o)}}return!!d&&(o||(o=new Wr),function(t,e,r,n,i,o){var s=1&r,u=ea(t),l=u.length;if(l!=ea(e).length&&!s)return!1;for(var c=l;c--;){var f=u[c];if(!(s?f in e:Mt.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);for(var p=s;++c<l;){var g=t[f=u[c]],v=e[f];if(n)var m=s?n(v,g,f,e,t,o):n(g,v,f,t,e,o);if(!(m===a?g===v||i(g,v,r,n,o):m)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,r,n,i,o))}(t,e,r,n,In,i))}function Dn(t,e,r,n){var i=r.length,o=i,s=!n;if(null==t)return!o;for(t=kt(t);i--;){var u=r[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var l=(u=r[i])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===a&&!(l in t))return!1}else{var h=new Wr;if(n)var d=n(c,f,l,t,e,h);if(!(d===a?In(f,c,3,n,h):d))return!1}}return!0}function Pn(t){return!(!es(t)||(e=t,Nt&&Nt in e))&&(Zo(t)?Gt:vt).test(Ua(t));var e}function On(t){return"function"==typeof t?t:null==t?iu:"object"==i(t)?qo(t)?Bn(t[0],t[1]):Un(t):du(t)}function Mn(t){if(!Ta(t))return gr(t);var e=[];for(var r in kt(t))Mt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Fn(t,e){return t<e}function Nn(t,e){var r=-1,i=Wo(t)?n(t.length):[];return fn(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}function Un(t){var e=ua(t);return 1==e.length&&e[0][2]?Sa(e[0][0],e[0][1]):function(r){return r===t||Dn(r,t,e)}}function Bn(t,e){return ya(t)&&wa(e)?Sa(Na(t),e):function(r){var n=Ls(r,t);return n===a&&n===e?Rs(r,t):In(e,n,3)}}function jn(t,e,r,n,i){t!==e&&mn(e,(function(o,s){if(i||(i=new Wr),es(o))!function(t,e,r,n,i,o,s){var u=La(t,r),l=La(e,r),c=s.get(l);if(c)Zr(t,r,c);else{var f=o?o(u,l,r+"",t,e,s):a,h=f===a;if(h){var d=qo(l),p=!d&&Xo(l),g=!d&&!p&&cs(l);f=l,d||p||g?qo(u)?f=u:Yo(u)?f=Li(u):p?(h=!1,f=Ti(l,!0)):g?(h=!1,f=Si(l,!0)):f=[]:as(l)||Vo(l)?(f=u,Vo(u)?f=ys(u):es(u)&&!Zo(u)||(f=pa(l))):h=!1}h&&(s.set(l,f),i(f,l,n,o,s),s.delete(l)),Zr(t,r,f)}}(t,e,s,r,jn,n,i);else{var u=n?n(La(t,s),o,s+"",t,e,i):a;u===a&&(u=o),Zr(t,s,u)}}),Ps)}function Gn(t,e){var r=t.length;if(r)return va(e+=e<0?r:0,r)?t[e]:a}function Hn(t,e,r){var n=-1;e=De(e.length?e:[iu],Xe(oa()));var i=Nn(t,(function(t,r,i){var a=De(e,(function(e){return e(t)}));return{criteria:a,index:++n,value:t}}));return function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var u=Ai(i[n],a[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}));n--;)t[n]=t[n].value;return t}(i)}function Kn(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=wn(t,o);r(s,o)&&Qn(a,mi(o,t),s)}return a}function Vn(t,e,r,n){var i=n?Ge:je,a=-1,o=e.length,s=t;for(t===e&&(e=Li(e)),r&&(s=De(t,Xe(r)));++a<o;)for(var u=0,l=e[a],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==t&&Xt.call(s,u,1),Xt.call(t,u,1);return t}function qn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;va(i)?Xt.call(t,i,1):li(t,i)}}return t}function zn(t,e){return t+ve(Er()*(e-t+1))}function Wn(t,e){var r="";if(!t||e<1||e>h)return r;do{e%2&&(r+=t),(e=ve(e/2))&&(t+=t)}while(e);return r}function Yn(t,e){return Ca(Aa(t,e,iu),t+"")}function Xn(t){return Xr(Gs(t))}function $n(t,e){var r=Gs(t);return Pa(r,on(e,0,r.length))}function Qn(t,e,r,n){if(!es(t))return t;for(var i=-1,o=(e=mi(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var l=Na(e[i]),c=r;if(i!=s){var f=u[l];(c=n?n(f,l,u):a)===a&&(c=es(f)?f:va(e[i+1])?[]:{})}Jr(u,l,c),u=u[l]}return t}var Zn=Rr?function(t,e){return Rr.set(t,e),t}:iu,Jn=se?function(t,e){return se(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Pa(Gs(t))}function ei(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function ri(t,e){var r;return fn(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function ni(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=t[a];null!==o&&!ls(o)&&(r?o<=e:o<e)?n=a+1:i=a}return i}return ii(t,e,iu,r)}function ii(t,e,r,n){e=r(e);for(var i=0,o=null==t?0:t.length,s=e!=e,u=null===e,l=ls(e),c=e===a;i<o;){var f=ve((i+o)/2),h=r(t[f]),d=h!==a,p=null===h,g=h==h,v=ls(h);if(s)var m=n||g;else m=c?g&&(n||d):u?g&&d&&(n||!p):l?g&&d&&!p&&(n||!v):!p&&!v&&(n?h<=e:h<e);m?i=f+1:o=f}return mr(o,4294967294)}function ai(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r],s=e?e(o):o;if(!r||!Go(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function oi(t){return"number"==typeof t?t:ls(t)?d:+t}function si(t){if("string"==typeof t)return t;if(qo(t))return De(t,si)+"";if(ls(t))return Nr?Nr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,r){var n=-1,i=Ce,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=Ie;else if(a>=200){var l=e?null:Wi(t);if(l)return ur(l);o=!1,i=Qe,u=new zr}else u=e?[]:s;t:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||0!==c?c:0,o&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(c)}else i(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}function li(t,e){return null==(t=_a(t,e=mi(e,t)))||delete t[Na($a(e))]}function ci(t,e,r,n){return Qn(t,e,r(wn(t,e)),n)}function fi(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?ei(t,n?0:a,n?a+1:i):ei(t,n?a+1:0,n?i:a)}function hi(t,e){var r=t;return r instanceof Hr&&(r=r.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),r)}function di(t,e,r){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=cn(o[a]||s,t[u],e,r));return ui(vn(o,1),e,r)}function pi(t,e,r){for(var n=-1,i=t.length,o=e.length,s={};++n<i;){var u=n<o?e[n]:a;r(s,t[n],u)}return s}function gi(t){return Yo(t)?t:[]}function vi(t){return"function"==typeof t?t:iu}function mi(t,e){return qo(t)?t:ya(t,e)?[t]:Fa(bs(t))}var yi=Yn;function bi(t,e,r){var n=t.length;return r=r===a?n:r,!e&&r>=n?t:ei(t,e,r)}var Ei=ce||function(t){return he.clearTimeout(t)};function Ti(t,e){if(e)return t.slice();var r=t.length,n=qt?qt(r):new t.constructor(r);return t.copy(n),n}function wi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Si(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var r=t!==a,n=null===t,i=t==t,o=ls(t),s=e!==a,u=null===e,l=e==e,c=ls(e);if(!u&&!c&&!o&&t>e||o&&s&&l&&!u&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||u&&r&&i||!s&&i||!l)return-1}return 0}function _i(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,l=e.length,c=vr(o-s,0),f=n(l+c),h=!i;++u<l;)f[u]=e[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=t[a]);for(;c--;)f[u++]=t[a++];return f}function ki(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,l=-1,c=e.length,f=vr(o-u,0),h=n(f+c),d=!i;++a<f;)h[a]=t[a];for(var p=a;++l<c;)h[p+l]=e[l];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=t[a++]);return h}function Li(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Ri(t,e,r,n){var i=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var u=e[o],l=n?n(r[u],t[u],u,r,t):a;l===a&&(l=t[u]),i?nn(r,u,l):Jr(r,u,l)}return r}function xi(t,e){return function(r,n){var i=qo(r)?_e:en,a=e?e():{};return i(r,t,oa(n,2),a)}}function Ci(t){return Yn((function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:a,s=i>2?r[2]:a;for(o=t.length>3&&"function"==typeof o?(i--,o):a,s&&ma(r[0],r[1],s)&&(o=i<3?a:o,i=1),e=kt(e);++n<i;){var u=r[n];u&&t(e,u,n,o)}return e}))}function Ii(t,e){return function(r,n){if(null==r)return r;if(!Wo(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=kt(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function Di(t){return function(e,r,n){for(var i=-1,a=kt(e),o=n(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===r(a[u],u,a))break}return e}}function Pi(t){return function(e){var r=ir(e=bs(e))?fr(e):a,n=r?r[0]:e.charAt(0),i=r?bi(r,1).join(""):e.slice(1);return n[t]()+i}}function Oi(t){return function(e){return Oe(Zs(Vs(e).replace(Qt,"")),t,"")}}function Mi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Br(t.prototype),n=t.apply(r,e);return es(n)?n:r}}function Fi(t){return function(e,r,n){var i=kt(e);if(!Wo(e)){var o=oa(r,3);e=Ds(e),r=function(t){return o(i[t],t,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:a}}function Ni(t){return ta((function(e){var r=e.length,n=r,i=Gr.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new xt(o);if(i&&!u&&"wrapper"==ia(s))var u=new Gr([],!0)}for(n=u?n:r;++n<r;){var l=ia(s=e[n]),c="wrapper"==l?na(s):a;u=c&&ba(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ia(c[0])].apply(u,c[3]):1==s.length&&ba(s)?u[l]():u.thru(s)}return function(){var t=arguments,n=t[0];if(u&&1==t.length&&qo(n))return u.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}}))}function Ui(t,e,r,i,o,s,u,l,f,h){var d=e&c,p=1&e,g=2&e,v=24&e,m=512&e,y=g?a:Mi(t);return function a(){for(var c=arguments.length,b=n(c),E=c;E--;)b[E]=arguments[E];if(v)var T=aa(a),w=tr(b,T);if(i&&(b=_i(b,i,o,v)),s&&(b=ki(b,s,u,v)),c-=w,v&&c<h){var S=sr(b,T);return qi(t,e,Ui,a.placeholder,r,b,S,l,f,h-c)}var A=p?r:this,_=g?A[t]:t;return c=b.length,l?b=ka(b,l):m&&c>1&&b.reverse(),d&&f<c&&(b.length=f),this&&this!==he&&this instanceof a&&(_=y||Mi(_)),_.apply(A,b)}}function Bi(t,e){return function(r,n){return function(t,e,r,n){return bn(t,(function(t,i,a){e(n,r(t),i,a)})),n}(r,t,e(n),{})}}function ji(t,e){return function(r,n){var i;if(r===a&&n===a)return e;if(r!==a&&(i=r),n!==a){if(i===a)return n;"string"==typeof r||"string"==typeof n?(r=si(r),n=si(n)):(r=oi(r),n=oi(n)),i=t(r,n)}return i}}function Gi(t){return ta((function(e){return e=De(e,Xe(oa())),Yn((function(r){var n=this;return t(e,(function(t){return Ae(t,n,r)}))}))}))}function Hi(t,e){var r=(e=e===a?" ":si(e)).length;if(r<2)return r?Wn(e,t):e;var n=Wn(e,pe(t/cr(e)));return ir(e)?bi(fr(n),0,t).join(""):n.slice(0,t)}function Ki(t){return function(e,r,i){return i&&"number"!=typeof i&&ma(e,r,i)&&(r=i=a),e=ps(e),r===a?(r=e,e=0):r=ps(r),function(t,e,r,i){for(var a=-1,o=vr(pe((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=i===a?e<r?1:-1:ps(i),t)}}function Vi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=ms(e),r=ms(r)),t(e,r)}}function qi(t,e,r,n,i,o,s,u,c,f){var h=8&e;e|=h?l:64,4&(e&=~(h?64:l))||(e&=-4);var d=[t,e,i,h?o:a,h?s:a,h?a:o,h?a:s,u,c,f],p=r.apply(a,d);return ba(t)&&Ra(p,d),p.placeholder=n,Ia(p,t,e)}function zi(t){var e=_t[t];return function(t,r){if(t=ms(t),(r=null==r?0:mr(gs(r),292))&&qe(t)){var n=(bs(t)+"e").split("e");return+((n=(bs(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Wi=_r&&1/ur(new _r([,-0]))[1]==f?function(t){return new _r(t)}:lu;function Yi(t){return function(e){var r=ha(e);return r==S?ar(e):r==R?function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,r,i,s,f,h,d){var p=2&e;if(!p&&"function"!=typeof t)throw new xt(o);var g=i?i.length:0;if(g||(e&=-97,i=s=a),h=h===a?h:vr(gs(h),0),d=d===a?d:gs(d),g-=s?s.length:0,64&e){var v=i,m=s;i=s=a}var y=p?a:na(t),b=[t,e,r,i,s,v,m,f,h,d];if(y&&function(t,e){var r=t[1],n=e[1],i=r|n,a=i<131,o=n==c&&8==r||n==c&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!a&&!o)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var s=e[3];if(s){var l=t[3];t[3]=l?_i(l,s,e[4]):s,t[4]=l?sr(t[3],u):e[4]}(s=e[5])&&(l=t[5],t[5]=l?ki(l,s,e[6]):s,t[6]=l?sr(t[5],u):e[6]),(s=e[7])&&(t[7]=s),n&c&&(t[8]=null==t[8]?e[8]:mr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],r=b[2],i=b[3],s=b[4],!(d=b[9]=b[9]===a?p?0:t.length:vr(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||16==e?function(t,e,r){var i=Mi(t);return function o(){for(var s=arguments.length,u=n(s),l=s,c=aa(o);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:sr(u,c);return(s-=f.length)<r?qi(t,e,Ui,o.placeholder,a,u,f,a,a,r-s):Ae(this&&this!==he&&this instanceof o?i:t,this,u)}}(t,e,d):e!=l&&33!=e||s.length?Ui.apply(a,b):function(t,e,r,i){var a=1&e,o=Mi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=n(c+u),h=this&&this!==he&&this instanceof e?o:t;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return Ae(h,a?r:this,f)}}(t,e,r,i);else var E=function(t,e,r){var n=1&e,i=Mi(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,r);return Ia((y?Zn:Ra)(E,b),t,e)}function $i(t,e,r,n){return t===a||Go(t,Dt[r])&&!Mt.call(n,r)?e:t}function Qi(t,e,r,n,i,o){return es(t)&&es(e)&&(o.set(e,t),jn(t,e,a,Qi,o),o.delete(e)),t}function Zi(t){return as(t)?a:t}function Ji(t,e,r,n,i,o){var s=1&r,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var f=-1,h=!0,d=2&r?new zr:a;for(o.set(t,e),o.set(e,t);++f<u;){var p=t[f],g=e[f];if(n)var v=s?n(g,p,f,e,t,o):n(p,g,f,t,e,o);if(v!==a){if(v)continue;h=!1;break}if(d){if(!Fe(e,(function(t,e){if(!Qe(d,e)&&(p===t||i(p,t,r,n,o)))return d.push(e)}))){h=!1;break}}else if(p!==g&&!i(p,g,r,n,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function ta(t){return Ca(Aa(t,a,qa),t+"")}function ea(t){return Sn(t,Ds,ca)}function ra(t){return Sn(t,Ps,fa)}var na=Rr?function(t){return Rr.get(t)}:lu;function ia(t){for(var e=t.name+"",r=xr[e],n=Mt.call(xr,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function aa(t){return(Mt.call(Ur,"placeholder")?Ur:t).placeholder}function oa(){var t=Ur.iteratee||au;return t=t===au?On:t,arguments.length?t(arguments[0],arguments[1]):t}function sa(t,e){var r,n,a=t.__data__;return("string"==(n=i(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof e?"string":"hash"]:a.map}function ua(t){for(var e=Ds(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,wa(i)]}return e}function la(t,e){var r=function(t,e){return null==t?a:t[e]}(t,e);return Pn(r)?r:a}var ca=me?function(t){return null==t?[]:(t=kt(t),xe(me(t),(function(e){return Yt.call(t,e)})))}:vu,fa=me?function(t){for(var e=[];t;)Pe(e,ca(t)),t=zt(t);return e}:vu,ha=An;function da(t,e,r){for(var n=-1,i=(e=mi(e,t)).length,a=!1;++n<i;){var o=Na(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&ts(i)&&va(o,i)&&(qo(t)||Vo(t))}function pa(t){return"function"!=typeof t.constructor||Ta(t)?{}:Br(zt(t))}function ga(t){return qo(t)||Vo(t)||!!($t&&t&&t[$t])}function va(t,e){var r=i(t);return!!(e=null==e?h:e)&&("number"==r||"symbol"!=r&&yt.test(t))&&t>-1&&t%1==0&&t<e}function ma(t,e,r){if(!es(r))return!1;var n=i(e);return!!("number"==n?Wo(r)&&va(e,r.length):"string"==n&&e in r)&&Go(r[e],t)}function ya(t,e){if(qo(t))return!1;var r=i(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ls(t))||tt.test(t)||!J.test(t)||null!=e&&t in kt(e)}function ba(t){var e=ia(t),r=Ur[e];if("function"!=typeof r||!(e in Hr.prototype))return!1;if(t===r)return!0;var n=na(r);return!!n&&t===n[0]}(wr&&ha(new wr(new ArrayBuffer(1)))!=P||Sr&&ha(new Sr)!=S||Ar&&ha(Ar.resolve())!=k||_r&&ha(new _r)!=R||kr&&ha(new kr)!=I)&&(ha=function(t){var e=An(t),r=e==_?t.constructor:a,n=r?Ua(r):"";if(n)switch(n){case Cr:return P;case Ir:return S;case Dr:return k;case Pr:return R;case Or:return I}return e});var Ea=Pt?Zo:mu;function Ta(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function wa(t){return t==t&&!es(t)}function Sa(t,e){return function(r){return null!=r&&r[t]===e&&(e!==a||t in kt(r))}}function Aa(t,e,r){return e=vr(e===a?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=vr(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),Ae(t,this,u)}}function _a(t,e){return e.length<2?t:wn(t,ei(e,0,-1))}function ka(t,e){for(var r=t.length,n=mr(e.length,r),i=Li(t);n--;){var o=e[n];t[n]=va(o,r)?i[o]:a}return t}function La(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ra=Da(Zn),xa=de||function(t,e){return he.setTimeout(t,e)},Ca=Da(Jn);function Ia(t,e,r){var n=e+"";return Ca(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return ke(g,(function(r){var n="_."+r[0];e&r[1]&&!Ce(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(lt):[]}(n),r)))}function Da(t){var e=0,r=0;return function(){var n=yr(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Pa(t,e){var r=-1,n=t.length,i=n-1;for(e=e===a?n:e;++r<e;){var o=zn(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Oa,Ma,Fa=(Oa=Mo((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,r,n,i){e.push(n?i.replace(ft,"$1"):r||t)})),e}),(function(t){return 500===Ma.size&&Ma.clear(),t})),Ma=Oa.cache,Oa);function Na(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ua(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ba(t){if(t instanceof Hr)return t.clone();var e=new Gr(t.__wrapped__,t.__chain__);return e.__actions__=Li(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ja=Yn((function(t,e){return Yo(t)?cn(t,vn(e,1,Yo,!0)):[]})),Ga=Yn((function(t,e){var r=$a(e);return Yo(r)&&(r=a),Yo(t)?cn(t,vn(e,1,Yo,!0),oa(r,2)):[]})),Ha=Yn((function(t,e){var r=$a(e);return Yo(r)&&(r=a),Yo(t)?cn(t,vn(e,1,Yo,!0),a,r):[]}));function Ka(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:gs(r);return i<0&&(i=vr(n+i,0)),Be(t,oa(e,3),i)}function Va(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return r!==a&&(i=gs(r),i=r<0?vr(n+i,0):mr(i,n-1)),Be(t,oa(e,3),i,!0)}function qa(t){return null!=t&&t.length?vn(t,1):[]}function za(t){return t&&t.length?t[0]:a}var Wa=Yn((function(t){var e=De(t,gi);return e.length&&e[0]===t[0]?Rn(e):[]})),Ya=Yn((function(t){var e=$a(t),r=De(t,gi);return e===$a(r)?e=a:r.pop(),r.length&&r[0]===t[0]?Rn(r,oa(e,2)):[]})),Xa=Yn((function(t){var e=$a(t),r=De(t,gi);return(e="function"==typeof e?e:a)&&r.pop(),r.length&&r[0]===t[0]?Rn(r,a,e):[]}));function $a(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Qa=Yn(Za);function Za(t,e){return t&&t.length&&e&&e.length?Vn(t,e):t}var Ja=ta((function(t,e){var r=null==t?0:t.length,n=an(t,e);return qn(t,De(e,(function(t){return va(t,r)?+t:t})).sort(Ai)),n}));function to(t){return null==t?t:Tr.call(t)}var eo=Yn((function(t){return ui(vn(t,1,Yo,!0))})),ro=Yn((function(t){var e=$a(t);return Yo(e)&&(e=a),ui(vn(t,1,Yo,!0),oa(e,2))})),no=Yn((function(t){var e=$a(t);return e="function"==typeof e?e:a,ui(vn(t,1,Yo,!0),a,e)}));function io(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Yo(t))return e=vr(t.length,e),!0})),Ye(e,(function(e){return De(t,Ve(e))}))}function ao(t,e){if(!t||!t.length)return[];var r=io(t);return null==e?r:De(r,(function(t){return Ae(e,a,t)}))}var oo=Yn((function(t,e){return Yo(t)?cn(t,e):[]})),so=Yn((function(t){return di(xe(t,Yo))})),uo=Yn((function(t){var e=$a(t);return Yo(e)&&(e=a),di(xe(t,Yo),oa(e,2))})),lo=Yn((function(t){var e=$a(t);return e="function"==typeof e?e:a,di(xe(t,Yo),a,e)})),co=Yn(io),fo=Yn((function(t){var e=t.length,r=e>1?t[e-1]:a;return r="function"==typeof r?(t.pop(),r):a,ao(t,r)}));function ho(t){var e=Ur(t);return e.__chain__=!0,e}function po(t,e){return e(t)}var go=ta((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return an(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Hr&&va(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:po,args:[i],thisArg:a}),new Gr(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(a),t}))):this.thru(i)})),vo=xi((function(t,e,r){Mt.call(t,r)?++t[r]:nn(t,r,1)})),mo=Fi(Ka),yo=Fi(Va);function bo(t,e){return(qo(t)?ke:fn)(t,oa(e,3))}function Eo(t,e){return(qo(t)?Le:hn)(t,oa(e,3))}var To=xi((function(t,e,r){Mt.call(t,r)?t[r].push(e):nn(t,r,[e])})),wo=Yn((function(t,e,r){var i=-1,a="function"==typeof e,o=Wo(t)?n(t.length):[];return fn(t,(function(t){o[++i]=a?Ae(e,t,r):xn(t,e,r)})),o})),So=xi((function(t,e,r){nn(t,r,e)}));function Ao(t,e){return(qo(t)?De:Nn)(t,oa(e,3))}var _o=xi((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),ko=Yn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&ma(t,e[0],e[1])?e=[]:r>2&&ma(e[0],e[1],e[2])&&(e=[e[0]]),Hn(t,vn(e,1),[])})),Lo=fe||function(){return he.Date.now()};function Ro(t,e,r){return e=r?a:e,e=t&&null==e?t.length:e,Xi(t,c,a,a,a,a,e)}function xo(t,e){var r;if("function"!=typeof e)throw new xt(o);return t=gs(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var Co=Yn((function(t,e,r){var n=1;if(r.length){var i=sr(r,aa(Co));n|=l}return Xi(t,n,e,r,i)})),Io=Yn((function(t,e,r){var n=3;if(r.length){var i=sr(r,aa(Io));n|=l}return Xi(e,n,t,r,i)}));function Do(t,e,r){var n,i,s,u,l,c,f=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new xt(o);function g(e){var r=n,o=i;return n=i=a,f=e,u=t.apply(o,r)}function v(t){return f=t,l=xa(y,e),h?g(t):u}function m(t){var r=t-c;return c===a||r>=e||r<0||d&&t-f>=s}function y(){var t=Lo();if(m(t))return b(t);l=xa(y,function(t){var r=e-(t-c);return d?mr(r,s-(t-f)):r}(t))}function b(t){return l=a,p&&n?g(t):(n=i=a,u)}function E(){var t=Lo(),r=m(t);if(n=arguments,i=this,c=t,r){if(l===a)return v(c);if(d)return Ei(l),l=xa(y,e),g(c)}return l===a&&(l=xa(y,e)),u}return e=ms(e)||0,es(r)&&(h=!!r.leading,s=(d="maxWait"in r)?vr(ms(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p),E.cancel=function(){l!==a&&Ei(l),f=0,n=c=i=l=a},E.flush=function(){return l===a?u:b(Lo())},E}var Po=Yn((function(t,e){return ln(t,1,e)})),Oo=Yn((function(t,e,r){return ln(t,ms(e)||0,r)}));function Mo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new xt(o);var r=function r(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Mo.Cache||qr),r}function Fo(t){if("function"!=typeof t)throw new xt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Mo.Cache=qr;var No=yi((function(t,e){var r=(e=1==e.length&&qo(e[0])?De(e[0],Xe(oa())):De(vn(e,1),Xe(oa()))).length;return Yn((function(n){for(var i=-1,a=mr(n.length,r);++i<a;)n[i]=e[i].call(this,n[i]);return Ae(t,this,n)}))})),Uo=Yn((function(t,e){var r=sr(e,aa(Uo));return Xi(t,l,a,e,r)})),Bo=Yn((function(t,e){var r=sr(e,aa(Bo));return Xi(t,64,a,e,r)})),jo=ta((function(t,e){return Xi(t,256,a,a,a,e)}));function Go(t,e){return t===e||t!=t&&e!=e}var Ho=Vi(_n),Ko=Vi((function(t,e){return t>=e})),Vo=Cn(function(){return arguments}())?Cn:function(t){return rs(t)&&Mt.call(t,"callee")&&!Yt.call(t,"callee")},qo=n.isArray,zo=ye?Xe(ye):function(t){return rs(t)&&An(t)==D};function Wo(t){return null!=t&&ts(t.length)&&!Zo(t)}function Yo(t){return rs(t)&&Wo(t)}var Xo=Ne||mu,$o=be?Xe(be):function(t){return rs(t)&&An(t)==b};function Qo(t){if(!rs(t))return!1;var e=An(t);return e==E||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function Zo(t){if(!es(t))return!1;var e=An(t);return e==T||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Jo(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=i(t);return null!=t&&("object"==e||"function"==e)}function rs(t){return null!=t&&"object"==i(t)}var ns=Ee?Xe(Ee):function(t){return rs(t)&&ha(t)==S};function is(t){return"number"==typeof t||rs(t)&&An(t)==A}function as(t){if(!rs(t)||An(t)!=_)return!1;var e=zt(t);if(null===e)return!0;var r=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ot.call(r)==Bt}var os=Te?Xe(Te):function(t){return rs(t)&&An(t)==L},ss=we?Xe(we):function(t){return rs(t)&&ha(t)==R};function us(t){return"string"==typeof t||!qo(t)&&rs(t)&&An(t)==x}function ls(t){return"symbol"==i(t)||rs(t)&&An(t)==C}var cs=Se?Xe(Se):function(t){return rs(t)&&ts(t.length)&&!!ae[An(t)]},fs=Vi(Fn),hs=Vi((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Wo(t))return us(t)?fr(t):Li(t);if(Jt&&t[Jt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Jt]());var e=ha(t);return(e==S?ar:e==R?ur:Gs)(t)}function ps(t){return t?(t=ms(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),r=e%1;return e==e?r?e-r:e:0}function vs(t){return t?on(gs(t),0,p):0}function ms(t){if("number"==typeof t)return t;if(ls(t))return d;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(it,"");var r=gt.test(t);return r||mt.test(t)?le(t.slice(2),r?2:8):pt.test(t)?d:+t}function ys(t){return Ri(t,Ps(t))}function bs(t){return null==t?"":si(t)}var Es=Ci((function(t,e){if(Ta(e)||Wo(e))Ri(e,Ds(e),t);else for(var r in e)Mt.call(e,r)&&Jr(t,r,e[r])})),Ts=Ci((function(t,e){Ri(e,Ps(e),t)})),ws=Ci((function(t,e,r,n){Ri(e,Ps(e),t,n)})),Ss=Ci((function(t,e,r,n){Ri(e,Ds(e),t,n)})),As=ta(an),_s=Yn((function(t,e){t=kt(t);var r=-1,n=e.length,i=n>2?e[2]:a;for(i&&ma(e[0],e[1],i)&&(n=1);++r<n;)for(var o=e[r],s=Ps(o),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===a||Go(f,Dt[c])&&!Mt.call(t,c))&&(t[c]=o[c])}return t})),ks=Yn((function(t){return t.push(a,Qi),Ae(Ms,a,t)}));function Ls(t,e,r){var n=null==t?a:wn(t,e);return n===a?r:n}function Rs(t,e){return null!=t&&da(t,e,Ln)}var xs=Bi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),t[e]=r}),eu(iu)),Cs=Bi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),Mt.call(t,e)?t[e].push(r):t[e]=[r]}),oa),Is=Yn(xn);function Ds(t){return Wo(t)?Yr(t):Mn(t)}function Ps(t){return Wo(t)?Yr(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var r in kt(t))e.push(r);return e}(t);var e=Ta(t),r=[];for(var n in t)("constructor"!=n||!e&&Mt.call(t,n))&&r.push(n);return r}(t)}var Os=Ci((function(t,e,r){jn(t,e,r)})),Ms=Ci((function(t,e,r,n){jn(t,e,r,n)})),Fs=ta((function(t,e){var r={};if(null==t)return r;var n=!1;e=De(e,(function(e){return e=mi(e,t),n||(n=e.length>1),e})),Ri(t,ra(t),r),n&&(r=sn(r,7,Zi));for(var i=e.length;i--;)li(r,e[i]);return r})),Ns=ta((function(t,e){return null==t?{}:function(t,e){return Kn(t,e,(function(e,r){return Rs(t,r)}))}(t,e)}));function Us(t,e){if(null==t)return{};var r=De(ra(t),(function(t){return[t]}));return e=oa(e),Kn(t,r,(function(t,r){return e(t,r[0])}))}var Bs=Yi(Ds),js=Yi(Ps);function Gs(t){return null==t?[]:$e(t,Ds(t))}var Hs=Oi((function(t,e,r){return e=e.toLowerCase(),t+(r?Ks(e):e)}));function Ks(t){return Qs(bs(t).toLowerCase())}function Vs(t){return(t=bs(t))&&t.replace(bt,er).replace(Zt,"")}var qs=Oi((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),zs=Oi((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Ws=Pi("toLowerCase"),Ys=Oi((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),Xs=Oi((function(t,e,r){return t+(r?" ":"")+Qs(e)})),$s=Oi((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Qs=Pi("toUpperCase");function Zs(t,e,r){return t=bs(t),(e=r?a:e)===a?function(t){return re.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var Js=Yn((function(t,e){try{return Ae(t,a,e)}catch(t){return Qo(t)?t:new St(t)}})),tu=ta((function(t,e){return ke(e,(function(e){e=Na(e),nn(t,e,Co(t[e],t))})),t}));function eu(t){return function(){return t}}var ru=Ni(),nu=Ni(!0);function iu(t){return t}function au(t){return On("function"==typeof t?t:sn(t,1))}var ou=Yn((function(t,e){return function(r){return xn(r,t,e)}})),su=Yn((function(t,e){return function(r){return xn(t,r,e)}}));function uu(t,e,r){var n=Ds(e),i=Tn(e,n);null!=r||es(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=Tn(e,Ds(e)));var a=!(es(r)&&"chain"in r&&!r.chain),o=Zo(t);return ke(i,(function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=Li(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Pe([this.value()],arguments))})})),t}function lu(){}var cu=Gi(De),fu=Gi(Re),hu=Gi(Fe);function du(t){return ya(t)?Ve(Na(t)):function(t){return function(e){return wn(e,t)}}(t)}var pu=Ki(),gu=Ki(!0);function vu(){return[]}function mu(){return!1}var yu,bu=ji((function(t,e){return t+e}),0),Eu=zi("ceil"),Tu=ji((function(t,e){return t/e}),1),wu=zi("floor"),Su=ji((function(t,e){return t*e}),1),Au=zi("round"),_u=ji((function(t,e){return t-e}),0);return Ur.after=function(t,e){if("function"!=typeof e)throw new xt(o);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Ur.ary=Ro,Ur.assign=Es,Ur.assignIn=Ts,Ur.assignInWith=ws,Ur.assignWith=Ss,Ur.at=As,Ur.before=xo,Ur.bind=Co,Ur.bindAll=tu,Ur.bindKey=Io,Ur.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qo(t)?t:[t]},Ur.chain=ho,Ur.chunk=function(t,e,r){e=(r?ma(t,e,r):e===a)?1:vr(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=n(pe(i/e));o<i;)u[s++]=ei(t,o,o+=e);return u},Ur.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i},Ur.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Pe(qo(r)?Li(r):[r],vn(e,1))},Ur.cond=function(t){var e=null==t?0:t.length,r=oa();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new xt(o);return[r(t[0]),t[1]]})):[],Yn((function(r){for(var n=-1;++n<e;){var i=t[n];if(Ae(i[0],this,r))return Ae(i[1],this,r)}}))},Ur.conforms=function(t){return function(t){var e=Ds(t);return function(r){return un(r,t,e)}}(sn(t,1))},Ur.constant=eu,Ur.countBy=vo,Ur.create=function(t,e){var r=Br(t);return null==e?r:rn(r,e)},Ur.curry=function t(e,r,n){var i=Xi(e,8,a,a,a,a,a,r=n?a:r);return i.placeholder=t.placeholder,i},Ur.curryRight=function t(e,r,n){var i=Xi(e,16,a,a,a,a,a,r=n?a:r);return i.placeholder=t.placeholder,i},Ur.debounce=Do,Ur.defaults=_s,Ur.defaultsDeep=ks,Ur.defer=Po,Ur.delay=Oo,Ur.difference=ja,Ur.differenceBy=Ga,Ur.differenceWith=Ha,Ur.drop=function(t,e,r){var n=null==t?0:t.length;return n?ei(t,(e=r||e===a?1:gs(e))<0?0:e,n):[]},Ur.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?ei(t,0,(e=n-(e=r||e===a?1:gs(e)))<0?0:e):[]},Ur.dropRightWhile=function(t,e){return t&&t.length?fi(t,oa(e,3),!0,!0):[]},Ur.dropWhile=function(t,e){return t&&t.length?fi(t,oa(e,3),!0):[]},Ur.fill=function(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&ma(t,e,r)&&(r=0,n=i),function(t,e,r,n){var i=t.length;for((r=gs(r))<0&&(r=-r>i?0:i+r),(n=n===a||n>i?i:gs(n))<0&&(n+=i),n=r>n?0:vs(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},Ur.filter=function(t,e){return(qo(t)?xe:gn)(t,oa(e,3))},Ur.flatMap=function(t,e){return vn(Ao(t,e),1)},Ur.flatMapDeep=function(t,e){return vn(Ao(t,e),f)},Ur.flatMapDepth=function(t,e,r){return r=r===a?1:gs(r),vn(Ao(t,e),r)},Ur.flatten=qa,Ur.flattenDeep=function(t){return null!=t&&t.length?vn(t,f):[]},Ur.flattenDepth=function(t,e){return null!=t&&t.length?vn(t,e=e===a?1:gs(e)):[]},Ur.flip=function(t){return Xi(t,512)},Ur.flow=ru,Ur.flowRight=nu,Ur.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Ur.functions=function(t){return null==t?[]:Tn(t,Ds(t))},Ur.functionsIn=function(t){return null==t?[]:Tn(t,Ps(t))},Ur.groupBy=To,Ur.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Ur.intersection=Wa,Ur.intersectionBy=Ya,Ur.intersectionWith=Xa,Ur.invert=xs,Ur.invertBy=Cs,Ur.invokeMap=wo,Ur.iteratee=au,Ur.keyBy=So,Ur.keys=Ds,Ur.keysIn=Ps,Ur.map=Ao,Ur.mapKeys=function(t,e){var r={};return e=oa(e,3),bn(t,(function(t,n,i){nn(r,e(t,n,i),t)})),r},Ur.mapValues=function(t,e){var r={};return e=oa(e,3),bn(t,(function(t,n,i){nn(r,n,e(t,n,i))})),r},Ur.matches=function(t){return Un(sn(t,1))},Ur.matchesProperty=function(t,e){return Bn(t,sn(e,1))},Ur.memoize=Mo,Ur.merge=Os,Ur.mergeWith=Ms,Ur.method=ou,Ur.methodOf=su,Ur.mixin=uu,Ur.negate=Fo,Ur.nthArg=function(t){return t=gs(t),Yn((function(e){return Gn(e,t)}))},Ur.omit=Fs,Ur.omitBy=function(t,e){return Us(t,Fo(oa(e)))},Ur.once=function(t){return xo(2,t)},Ur.orderBy=function(t,e,r,n){return null==t?[]:(qo(e)||(e=null==e?[]:[e]),qo(r=n?a:r)||(r=null==r?[]:[r]),Hn(t,e,r))},Ur.over=cu,Ur.overArgs=No,Ur.overEvery=fu,Ur.overSome=hu,Ur.partial=Uo,Ur.partialRight=Bo,Ur.partition=_o,Ur.pick=Ns,Ur.pickBy=Us,Ur.property=du,Ur.propertyOf=function(t){return function(e){return null==t?a:wn(t,e)}},Ur.pull=Qa,Ur.pullAll=Za,Ur.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Vn(t,e,oa(r,2)):t},Ur.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Vn(t,e,a,r):t},Ur.pullAt=Ja,Ur.range=pu,Ur.rangeRight=gu,Ur.rearg=jo,Ur.reject=function(t,e){return(qo(t)?xe:gn)(t,Fo(oa(e,3)))},Ur.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=oa(e,3);++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return qn(t,i),r},Ur.rest=function(t,e){if("function"!=typeof t)throw new xt(o);return Yn(t,e=e===a?e:gs(e))},Ur.reverse=to,Ur.sampleSize=function(t,e,r){return e=(r?ma(t,e,r):e===a)?1:gs(e),(qo(t)?$r:$n)(t,e)},Ur.set=function(t,e,r){return null==t?t:Qn(t,e,r)},Ur.setWith=function(t,e,r,n){return n="function"==typeof n?n:a,null==t?t:Qn(t,e,r,n)},Ur.shuffle=function(t){return(qo(t)?Qr:ti)(t)},Ur.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&ma(t,e,r)?(e=0,r=n):(e=null==e?0:gs(e),r=r===a?n:gs(r)),ei(t,e,r)):[]},Ur.sortBy=ko,Ur.sortedUniq=function(t){return t&&t.length?ai(t):[]},Ur.sortedUniqBy=function(t,e){return t&&t.length?ai(t,oa(e,2)):[]},Ur.split=function(t,e,r){return r&&"number"!=typeof r&&ma(t,e,r)&&(e=r=a),(r=r===a?p:r>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=si(e))&&ir(t)?bi(fr(t),0,r):t.split(e,r):[]},Ur.spread=function(t,e){if("function"!=typeof t)throw new xt(o);return e=null==e?0:vr(gs(e),0),Yn((function(r){var n=r[e],i=bi(r,0,e);return n&&Pe(i,n),Ae(t,this,i)}))},Ur.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Ur.take=function(t,e,r){return t&&t.length?ei(t,0,(e=r||e===a?1:gs(e))<0?0:e):[]},Ur.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?ei(t,(e=n-(e=r||e===a?1:gs(e)))<0?0:e,n):[]},Ur.takeRightWhile=function(t,e){return t&&t.length?fi(t,oa(e,3),!1,!0):[]},Ur.takeWhile=function(t,e){return t&&t.length?fi(t,oa(e,3)):[]},Ur.tap=function(t,e){return e(t),t},Ur.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new xt(o);return es(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Do(t,e,{leading:n,maxWait:e,trailing:i})},Ur.thru=po,Ur.toArray=ds,Ur.toPairs=Bs,Ur.toPairsIn=js,Ur.toPath=function(t){return qo(t)?De(t,Na):ls(t)?[t]:Li(Fa(bs(t)))},Ur.toPlainObject=ys,Ur.transform=function(t,e,r){var n=qo(t),i=n||Xo(t)||cs(t);if(e=oa(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:es(t)&&Zo(a)?Br(zt(t)):{}}return(i?ke:bn)(t,(function(t,n,i){return e(r,t,n,i)})),r},Ur.unary=function(t){return Ro(t,1)},Ur.union=eo,Ur.unionBy=ro,Ur.unionWith=no,Ur.uniq=function(t){return t&&t.length?ui(t):[]},Ur.uniqBy=function(t,e){return t&&t.length?ui(t,oa(e,2)):[]},Ur.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?ui(t,a,e):[]},Ur.unset=function(t,e){return null==t||li(t,e)},Ur.unzip=io,Ur.unzipWith=ao,Ur.update=function(t,e,r){return null==t?t:ci(t,e,vi(r))},Ur.updateWith=function(t,e,r,n){return n="function"==typeof n?n:a,null==t?t:ci(t,e,vi(r),n)},Ur.values=Gs,Ur.valuesIn=function(t){return null==t?[]:$e(t,Ps(t))},Ur.without=oo,Ur.words=Zs,Ur.wrap=function(t,e){return Uo(vi(e),t)},Ur.xor=so,Ur.xorBy=uo,Ur.xorWith=lo,Ur.zip=co,Ur.zipObject=function(t,e){return pi(t||[],e||[],Jr)},Ur.zipObjectDeep=function(t,e){return pi(t||[],e||[],Qn)},Ur.zipWith=fo,Ur.entries=Bs,Ur.entriesIn=js,Ur.extend=Ts,Ur.extendWith=ws,uu(Ur,Ur),Ur.add=bu,Ur.attempt=Js,Ur.camelCase=Hs,Ur.capitalize=Ks,Ur.ceil=Eu,Ur.clamp=function(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=(r=ms(r))==r?r:0),e!==a&&(e=(e=ms(e))==e?e:0),on(ms(t),e,r)},Ur.clone=function(t){return sn(t,4)},Ur.cloneDeep=function(t){return sn(t,5)},Ur.cloneDeepWith=function(t,e){return sn(t,5,e="function"==typeof e?e:a)},Ur.cloneWith=function(t,e){return sn(t,4,e="function"==typeof e?e:a)},Ur.conformsTo=function(t,e){return null==e||un(t,e,Ds(e))},Ur.deburr=Vs,Ur.defaultTo=function(t,e){return null==t||t!=t?e:t},Ur.divide=Tu,Ur.endsWith=function(t,e,r){t=bs(t),e=si(e);var n=t.length,i=r=r===a?n:on(gs(r),0,n);return(r-=e.length)>=0&&t.slice(r,i)==e},Ur.eq=Go,Ur.escape=function(t){return(t=bs(t))&&X.test(t)?t.replace(W,rr):t},Ur.escapeRegExp=function(t){return(t=bs(t))&&nt.test(t)?t.replace(rt,"\\$&"):t},Ur.every=function(t,e,r){var n=qo(t)?Re:dn;return r&&ma(t,e,r)&&(e=a),n(t,oa(e,3))},Ur.find=mo,Ur.findIndex=Ka,Ur.findKey=function(t,e){return Ue(t,oa(e,3),bn)},Ur.findLast=yo,Ur.findLastIndex=Va,Ur.findLastKey=function(t,e){return Ue(t,oa(e,3),En)},Ur.floor=wu,Ur.forEach=bo,Ur.forEachRight=Eo,Ur.forIn=function(t,e){return null==t?t:mn(t,oa(e,3),Ps)},Ur.forInRight=function(t,e){return null==t?t:yn(t,oa(e,3),Ps)},Ur.forOwn=function(t,e){return t&&bn(t,oa(e,3))},Ur.forOwnRight=function(t,e){return t&&En(t,oa(e,3))},Ur.get=Ls,Ur.gt=Ho,Ur.gte=Ko,Ur.has=function(t,e){return null!=t&&da(t,e,kn)},Ur.hasIn=Rs,Ur.head=za,Ur.identity=iu,Ur.includes=function(t,e,r,n){t=Wo(t)?t:Gs(t),r=r&&!n?gs(r):0;var i=t.length;return r<0&&(r=vr(i+r,0)),us(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&je(t,e,r)>-1},Ur.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:gs(r);return i<0&&(i=vr(n+i,0)),je(t,e,i)},Ur.inRange=function(t,e,r){return e=ps(e),r===a?(r=e,e=0):r=ps(r),function(t,e,r){return t>=mr(e,r)&&t<vr(e,r)}(t=ms(t),e,r)},Ur.invoke=Is,Ur.isArguments=Vo,Ur.isArray=qo,Ur.isArrayBuffer=zo,Ur.isArrayLike=Wo,Ur.isArrayLikeObject=Yo,Ur.isBoolean=function(t){return!0===t||!1===t||rs(t)&&An(t)==y},Ur.isBuffer=Xo,Ur.isDate=$o,Ur.isElement=function(t){return rs(t)&&1===t.nodeType&&!as(t)},Ur.isEmpty=function(t){if(null==t)return!0;if(Wo(t)&&(qo(t)||"string"==typeof t||"function"==typeof t.splice||Xo(t)||cs(t)||Vo(t)))return!t.length;var e=ha(t);if(e==S||e==R)return!t.size;if(Ta(t))return!Mn(t).length;for(var r in t)if(Mt.call(t,r))return!1;return!0},Ur.isEqual=function(t,e){return In(t,e)},Ur.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:a)?r(t,e):a;return n===a?In(t,e,a,r):!!n},Ur.isError=Qo,Ur.isFinite=function(t){return"number"==typeof t&&qe(t)},Ur.isFunction=Zo,Ur.isInteger=Jo,Ur.isLength=ts,Ur.isMap=ns,Ur.isMatch=function(t,e){return t===e||Dn(t,e,ua(e))},Ur.isMatchWith=function(t,e,r){return r="function"==typeof r?r:a,Dn(t,e,ua(e),r)},Ur.isNaN=function(t){return is(t)&&t!=+t},Ur.isNative=function(t){if(Ea(t))throw new St("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pn(t)},Ur.isNil=function(t){return null==t},Ur.isNull=function(t){return null===t},Ur.isNumber=is,Ur.isObject=es,Ur.isObjectLike=rs,Ur.isPlainObject=as,Ur.isRegExp=os,Ur.isSafeInteger=function(t){return Jo(t)&&t>=-9007199254740991&&t<=h},Ur.isSet=ss,Ur.isString=us,Ur.isSymbol=ls,Ur.isTypedArray=cs,Ur.isUndefined=function(t){return t===a},Ur.isWeakMap=function(t){return rs(t)&&ha(t)==I},Ur.isWeakSet=function(t){return rs(t)&&"[object WeakSet]"==An(t)},Ur.join=function(t,e){return null==t?"":pr.call(t,e)},Ur.kebabCase=qs,Ur.last=$a,Ur.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return r!==a&&(i=(i=gs(r))<0?vr(n+i,0):mr(i,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,i):Be(t,He,i,!0)},Ur.lowerCase=zs,Ur.lowerFirst=Ws,Ur.lt=fs,Ur.lte=hs,Ur.max=function(t){return t&&t.length?pn(t,iu,_n):a},Ur.maxBy=function(t,e){return t&&t.length?pn(t,oa(e,2),_n):a},Ur.mean=function(t){return Ke(t,iu)},Ur.meanBy=function(t,e){return Ke(t,oa(e,2))},Ur.min=function(t){return t&&t.length?pn(t,iu,Fn):a},Ur.minBy=function(t,e){return t&&t.length?pn(t,oa(e,2),Fn):a},Ur.stubArray=vu,Ur.stubFalse=mu,Ur.stubObject=function(){return{}},Ur.stubString=function(){return""},Ur.stubTrue=function(){return!0},Ur.multiply=Su,Ur.nth=function(t,e){return t&&t.length?Gn(t,gs(e)):a},Ur.noConflict=function(){return he._===this&&(he._=jt),this},Ur.noop=lu,Ur.now=Lo,Ur.pad=function(t,e,r){t=bs(t);var n=(e=gs(e))?cr(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Hi(ve(i),r)+t+Hi(pe(i),r)},Ur.padEnd=function(t,e,r){t=bs(t);var n=(e=gs(e))?cr(t):0;return e&&n<e?t+Hi(e-n,r):t},Ur.padStart=function(t,e,r){t=bs(t);var n=(e=gs(e))?cr(t):0;return e&&n<e?Hi(e-n,r)+t:t},Ur.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),br(bs(t).replace(at,""),e||0)},Ur.random=function(t,e,r){if(r&&"boolean"!=typeof r&&ma(t,e,r)&&(e=r=a),r===a&&("boolean"==typeof e?(r=e,e=a):"boolean"==typeof t&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=ps(t),e===a?(e=t,t=0):e=ps(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=Er();return mr(t+i*(e-t+ue("1e-"+((i+"").length-1))),e)}return zn(t,e)},Ur.reduce=function(t,e,r){var n=qo(t)?Oe:ze,i=arguments.length<3;return n(t,oa(e,4),r,i,fn)},Ur.reduceRight=function(t,e,r){var n=qo(t)?Me:ze,i=arguments.length<3;return n(t,oa(e,4),r,i,hn)},Ur.repeat=function(t,e,r){return e=(r?ma(t,e,r):e===a)?1:gs(e),Wn(bs(t),e)},Ur.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Ur.result=function(t,e,r){var n=-1,i=(e=mi(e,t)).length;for(i||(i=1,t=a);++n<i;){var o=null==t?a:t[Na(e[n])];o===a&&(n=i,o=r),t=Zo(o)?o.call(t):o}return t},Ur.round=Au,Ur.runInContext=t,Ur.sample=function(t){return(qo(t)?Xr:Xn)(t)},Ur.size=function(t){if(null==t)return 0;if(Wo(t))return us(t)?cr(t):t.length;var e=ha(t);return e==S||e==R?t.size:Mn(t).length},Ur.snakeCase=Ys,Ur.some=function(t,e,r){var n=qo(t)?Fe:ri;return r&&ma(t,e,r)&&(e=a),n(t,oa(e,3))},Ur.sortedIndex=function(t,e){return ni(t,e)},Ur.sortedIndexBy=function(t,e,r){return ii(t,e,oa(r,2))},Ur.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=ni(t,e);if(n<r&&Go(t[n],e))return n}return-1},Ur.sortedLastIndex=function(t,e){return ni(t,e,!0)},Ur.sortedLastIndexBy=function(t,e,r){return ii(t,e,oa(r,2),!0)},Ur.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=ni(t,e,!0)-1;if(Go(t[r],e))return r}return-1},Ur.startCase=Xs,Ur.startsWith=function(t,e,r){return t=bs(t),r=null==r?0:on(gs(r),0,t.length),e=si(e),t.slice(r,r+e.length)==e},Ur.subtract=_u,Ur.sum=function(t){return t&&t.length?We(t,iu):0},Ur.sumBy=function(t,e){return t&&t.length?We(t,oa(e,2)):0},Ur.template=function(t,e,r){var n=Ur.templateSettings;r&&ma(t,e,r)&&(e=a),t=bs(t),e=ws({},e,n,$i);var i,o,s=ws({},e.imports,n.imports,$i),u=Ds(s),l=$e(s,u),c=0,f=e.interpolate||Et,h="__p += '",d=Lt((e.escape||Et).source+"|"+f.source+"|"+(f===Z?ht:Et).source+"|"+(e.evaluate||Et).source+"|$","g"),p="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(d,(function(e,r,n,a,s,u){return n||(n=a),h+=t.slice(c,u).replace(Tt,nr),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),h+="';\n";var g=Mt.call(e,"variable")&&e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(K,""):h).replace(V,"$1").replace(q,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Js((function(){return At(u,p+"return "+h).apply(a,l)}));if(v.source=h,Qo(v))throw v;return v},Ur.times=function(t,e){if((t=gs(t))<1||t>h)return[];var r=p,n=mr(t,p);e=oa(e),t-=p;for(var i=Ye(n,e);++r<t;)e(r);return i},Ur.toFinite=ps,Ur.toInteger=gs,Ur.toLength=vs,Ur.toLower=function(t){return bs(t).toLowerCase()},Ur.toNumber=ms,Ur.toSafeInteger=function(t){return t?on(gs(t),-9007199254740991,h):0===t?t:0},Ur.toString=bs,Ur.toUpper=function(t){return bs(t).toUpperCase()},Ur.trim=function(t,e,r){if((t=bs(t))&&(r||e===a))return t.replace(it,"");if(!t||!(e=si(e)))return t;var n=fr(t),i=fr(e);return bi(n,Ze(n,i),Je(n,i)+1).join("")},Ur.trimEnd=function(t,e,r){if((t=bs(t))&&(r||e===a))return t.replace(ot,"");if(!t||!(e=si(e)))return t;var n=fr(t);return bi(n,0,Je(n,fr(e))+1).join("")},Ur.trimStart=function(t,e,r){if((t=bs(t))&&(r||e===a))return t.replace(at,"");if(!t||!(e=si(e)))return t;var n=fr(t);return bi(n,Ze(n,fr(e))).join("")},Ur.truncate=function(t,e){var r=30,n="...";if(es(e)){var i="separator"in e?e.separator:i;r="length"in e?gs(e.length):r,n="omission"in e?si(e.omission):n}var o=(t=bs(t)).length;if(ir(t)){var s=fr(t);o=s.length}if(r>=o)return t;var u=r-cr(n);if(u<1)return n;var l=s?bi(s,0,u).join(""):t.slice(0,u);if(i===a)return l+n;if(s&&(u+=l.length-u),os(i)){if(t.slice(u).search(i)){var c,f=l;for(i.global||(i=Lt(i.source,bs(dt.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var h=c.index;l=l.slice(0,h===a?u:h)}}else if(t.indexOf(si(i),u)!=u){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+n},Ur.unescape=function(t){return(t=bs(t))&&Y.test(t)?t.replace(z,hr):t},Ur.uniqueId=function(t){var e=++Ft;return bs(t)+e},Ur.upperCase=$s,Ur.upperFirst=Qs,Ur.each=bo,Ur.eachRight=Eo,Ur.first=za,uu(Ur,(yu={},bn(Ur,(function(t,e){Mt.call(Ur.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),Ur.VERSION="4.17.15",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Ur[t].placeholder=Ur})),ke(["drop","take"],(function(t,e){Hr.prototype[t]=function(r){r=r===a?1:vr(gs(r),0);var n=this.__filtered__&&!e?new Hr(this):this.clone();return n.__filtered__?n.__takeCount__=mr(r,n.__takeCount__):n.__views__.push({size:mr(r,p),type:t+(n.__dir__<0?"Right":"")}),n},Hr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ke(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Hr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oa(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),ke(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Hr.prototype[t]=function(){return this[r](1).value()[0]}})),ke(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Hr.prototype[t]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(iu)},Hr.prototype.find=function(t){return this.filter(t).head()},Hr.prototype.findLast=function(t){return this.reverse().find(t)},Hr.prototype.invokeMap=Yn((function(t,e){return"function"==typeof t?new Hr(this):this.map((function(r){return xn(r,t,e)}))})),Hr.prototype.reject=function(t){return this.filter(Fo(oa(t)))},Hr.prototype.slice=function(t,e){t=gs(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Hr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(r=(e=gs(e))<0?r.dropRight(-e):r.take(e-t)),r)},Hr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hr.prototype.toArray=function(){return this.take(p)},bn(Hr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=Ur[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);i&&(Ur.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,u=e instanceof Hr,l=s[0],c=u||qo(e),f=function(t){var e=i.apply(Ur,Pe([t],s));return n&&h?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,g=u&&!d;if(!o&&c){e=g?e:new Hr(this);var v=t.apply(e,s);return v.__actions__.push({func:po,args:[f],thisArg:a}),new Gr(v,h)}return p&&g?t.apply(this,s):(v=this.thru(f),p?n?v.value()[0]:v.value():v)})})),ke(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Ur.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(qo(i)?i:[],t)}return this[r]((function(r){return e.apply(qo(r)?r:[],t)}))}})),bn(Hr.prototype,(function(t,e){var r=Ur[e];if(r){var n=r.name+"";Mt.call(xr,n)||(xr[n]=[]),xr[n].push({name:e,func:r})}})),xr[Ui(a,2).name]=[{name:"wrapper",func:a}],Hr.prototype.clone=function(){var t=new Hr(this.__wrapped__);return t.__actions__=Li(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Li(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Li(this.__views__),t},Hr.prototype.reverse=function(){if(this.__filtered__){var t=new Hr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=qo(t),n=e<0,i=r?t.length:0,a=function(t,e,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=mr(e,t+o);break;case"takeRight":t=vr(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=n?s:o-1,c=this.__iteratees__,f=c.length,h=0,d=mr(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return hi(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var g=-1,v=t[l+=e];++g<f;){var m=c[g],y=m.iteratee,b=m.type,E=y(v);if(2==b)v=E;else if(!E){if(1==b)continue t;break t}}p[h++]=v}return p},Ur.prototype.at=go,Ur.prototype.chain=function(){return ho(this)},Ur.prototype.commit=function(){return new Gr(this.value(),this.__chain__)},Ur.prototype.next=function(){this.__values__===a&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},Ur.prototype.plant=function(t){for(var e,r=this;r instanceof jr;){var n=Ba(r);n.__index__=0,n.__values__=a,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},Ur.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hr){var e=t;return this.__actions__.length&&(e=new Hr(this)),(e=e.reverse()).__actions__.push({func:po,args:[to],thisArg:a}),new Gr(e,this.__chain__)}return this.thru(to)},Ur.prototype.toJSON=Ur.prototype.valueOf=Ur.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Ur.prototype.first=Ur.prototype.head,Jt&&(Ur.prototype[Jt]=function(){return this}),Ur}();"object"==i(r.amdO)&&r.amdO?(he._=dr,(n=function(){return dr}.call(e,r,e,t))===a||(t.exports=n)):pe?((pe.exports=dr)._=dr,de._=dr):he._=dr}.call(this)},4664:function(t,e,r){var n;!function(i,a,o){if(i){for(var s,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)u[111+h]="f"+h;for(h=0;h<=9;++h)u[h+96]=h.toString();b.prototype.bind=function(t,e,r){var n=this;return t=t instanceof Array?t:[t],n._bindMultiple.call(n,t,e,r),n},b.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},b.prototype.trigger=function(t,e){var r=this;return r._directMap[t+":"+e]&&r._directMap[t+":"+e]({},t),r},b.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},b.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var r=t.composedPath()[0];r!==t.target&&(e=r)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},b.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},b.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(u[e]=t[e]);s=null},b.init=function(){var t=b(a);for(var e in t)"_"!==e.charAt(0)&&(b[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},b.init(),i.Mousetrap=b,t.exports&&(t.exports=b),void 0===(n=function(){return b}.call(e,r,e,t))||(t.exports=n)}function d(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return u[t.which]?u[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function g(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function v(t,e,r){return r||(r=function(){if(!s)for(var t in s={},u)t>95&&t<112||u.hasOwnProperty(t)&&(s[u[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==r&&e.length&&(r="keydown"),r}function m(t,e){var r,n,i,a=[];for(r=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<r.length;++i)n=r[i],f[n]&&(n=f[n]),e&&"keypress"!=e&&c[n]&&(n=c[n],a.push("shift")),g(n)&&a.push(n);return{key:n,modifiers:a,action:e=v(n,a,e)}}function y(t,e){return null!==t&&t!==a&&(t===e||y(t.parentNode,e))}function b(t){var e=this;if(t=t||a,!(e instanceof b))return new b(t);e.target=t,e._callbacks={},e._directMap={};var r,n={},i=!1,o=!1,s=!1;function u(t){t=t||{};var e,r=!1;for(e in n)t[e]?r=!0:n[e]=0;r||(s=!1)}function l(t,r,i,a,o,s){var u,l,c,f,h=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&g(t)&&(r=[t]),u=0;u<e._callbacks[t].length;++u)if(l=e._callbacks[t][u],(a||!l.seq||n[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(c=r,f=l.modifiers,c.sort().join(",")===f.sort().join(",")))){var p=!a&&l.combo==o,v=a&&l.seq==a&&l.level==s;(p||v)&&e._callbacks[t].splice(u,1),h.push(l)}return h}function c(t,r,n,i){e.stopCallback(r,r.target||r.srcElement,n,i)||!1===t(r,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(r),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(r))}function f(t){"number"!=typeof t.which&&(t.which=t.keyCode);var r=p(t);r&&("keyup"!=t.type||i!==r?e.handleKey(r,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function h(t,a,o,f,d){e._directMap[t+":"+o]=a;var g,v=(t=t.replace(/\s+/g," ")).split(" ");v.length>1?function(t,e,a,o){function l(e){return function(){s=e,++n[t],clearTimeout(r),r=setTimeout(u,1e3)}}function f(e){c(a,e,t),"keyup"!==o&&(i=p(e)),setTimeout(u,10)}n[t]=0;for(var d=0;d<e.length;++d){var g=d+1===e.length?f:l(o||m(e[d+1]).action);h(e[d],g,o,t,d)}}(t,v,a,o):(g=m(t,o),e._callbacks[g.key]=e._callbacks[g.key]||[],l(g.key,g.modifiers,{type:g.action},f,t,d),e._callbacks[g.key][f?"unshift":"push"]({callback:a,modifiers:g.modifiers,action:g.action,seq:f,level:d,combo:t}))}e._handleKey=function(t,e,r){var n,i=l(t,e,r),a={},f=0,h=!1;for(n=0;n<i.length;++n)i[n].seq&&(f=Math.max(f,i[n].level));for(n=0;n<i.length;++n)if(i[n].seq){if(i[n].level!=f)continue;h=!0,a[i[n].seq]=1,c(i[n].callback,r,i[n].combo,i[n].seq)}else h||c(i[n].callback,r,i[n].combo);var d="keypress"==r.type&&o;r.type!=s||g(t)||d||u(a),o=h&&"keydown"==r.type},e._bindMultiple=function(t,e,r){for(var n=0;n<t.length;++n)h(t[n],e,r)},d(t,"keypress",f),d(t,"keydown",f),d(t,"keyup",f)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},5973:function(t,e,r){var n,i;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}i="undefined"!=typeof window?window:this,n=function(){return function(t,e,r){"use strict";var n,i,o,s="object",u="function",l="array",c="string",f="boolean",h="number",p="null",g={c:"class",s:"style",i:"id",l:"length",p:"prototype",ti:"tabindex",oH:"offsetHeight",cH:"clientHeight",sH:"scrollHeight",oW:"offsetWidth",cW:"clientWidth",sW:"scrollWidth",hOP:"hasOwnProperty",bCR:"getBoundingClientRect"},v=function(){var n={},i={},a=["-webkit-","-moz-","-o-","-ms-"],o=["WebKit","Moz","O","MS"];function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}return{_cssPrefixes:a,_jsPrefixes:o,_cssProperty:function(t){var n=i[t];if(i[g.hOP](t))return n;for(var o,u,l,c=s(t),f=e.createElement("div")[g.s],h=0;h<a.length;h++)for(l=a[h].replace(/-/g,""),o=[t,a[h]+t,l+c,s(l)+c],u=0;u<o[g.l];u++)if(f[o[u]]!==r){n=o[u];break}return i[t]=n,n},_cssPropertyValue:function(t,r,n){var a=t+" "+r,o=i[a];if(i[g.hOP](a))return o;for(var s,u=e.createElement("div")[g.s],l=r.split(" "),c=n||"",f=0,h=-1;f<l[g.l];f++)for(;h<v._cssPrefixes[g.l];h++)if(s=h<0?l[f]:v._cssPrefixes[h]+l[f],u.cssText=t+":"+s+c,u[g.l]){o=s;break}return i[a]=o,o},_jsAPI:function(e,r,i){var a=0,u=n[e];if(!n[g.hOP](e)){for(u=t[e];a<o[g.l];a++)u=u||t[(r?o[a]:o[a].toLowerCase())+s(e)];n[e]=u}return u||i}}}(),m=function(){function n(r){return r?t.innerWidth||e.documentElement[g.cW]||e.body[g.cW]:t.innerHeight||e.documentElement[g.cH]||e.body[g.cH]}function i(t,e){if(a(t)!=u)throw"Can't bind function!";var r=g.p,n=Array[r].slice.call(arguments,2),i=function(){},o=function(){return t.apply(this instanceof i?this:e,n.concat(Array[r].slice.call(arguments)))};return t[r]&&(i[r]=t[r]),o[r]=new i,o}return{wW:i(n,0,!0),wH:i(n,0),mO:i(v._jsAPI,0,"MutationObserver",!0),rO:i(v._jsAPI,0,"ResizeObserver",!0),rAF:i(v._jsAPI,0,"requestAnimationFrame",!1,(function(e){return t.setTimeout(e,1e3/60)})),cAF:i(v._jsAPI,0,"cancelAnimationFrame",!1,(function(e){return t.clearTimeout(e)})),now:function(){return Date.now&&Date.now()||(new Date).getTime()},stpP:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},prvD:function(t){t.preventDefault&&t.cancelable?t.preventDefault():t.returnValue=!1},page:function(t){var n="page",i="client",a="X",o=((t=t.originalEvent||t).target||t.srcElement||e).ownerDocument||e,s=o.documentElement,u=o.body;if(t.touches!==r){var l=t.touches[0];return{x:l[n+a],y:l[n+"Y"]}}return!t[n+a]&&t[i+a]&&null!=t[i+a]?{x:t[i+a]+(s&&s.scrollLeft||u&&u.scrollLeft||0)-(s&&s.clientLeft||u&&u.clientLeft||0),y:t[i+"Y"]+(s&&s.scrollTop||u&&u.scrollTop||0)-(s&&s.clientTop||u&&u.clientTop||0)}:{x:t[n+a],y:t[n+"Y"]}},mBtn:function(t){var e=t.button;return t.which||e===r?t.which:1&e?1:2&e?3:4&e?2:0},inA:function(t,e){for(var r=0;r<e[g.l];r++)try{if(e[r]===t)return r}catch(t){}return-1},isA:function(t){var e=Array.isArray;return e?e(t):this.type(t)==l},type:function(t){return t===r||null===t?t+"":Object[g.p].toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},bind:i}}(),y=Math,b=t.jQuery,E=(o={p:y.PI,c:y.cos,s:y.sin,w:y.pow,t:y.sqrt,n:y.asin,a:y.abs,o:1.70158},{swing:function(t,e,r,n,i){return.5-o.c(t*o.p)/2},linear:function(t,e,r,n,i){return t},easeInQuad:function(t,e,r,n,i){return n*(e/=i)*e+r},easeOutQuad:function(t,e,r,n,i){return-n*(e/=i)*(e-2)+r},easeInOutQuad:function(t,e,r,n,i){return(e/=i/2)<1?n/2*e*e+r:-n/2*(--e*(e-2)-1)+r},easeInCubic:function(t,e,r,n,i){return n*(e/=i)*e*e+r},easeOutCubic:function(t,e,r,n,i){return n*((e=e/i-1)*e*e+1)+r},easeInOutCubic:function(t,e,r,n,i){return(e/=i/2)<1?n/2*e*e*e+r:n/2*((e-=2)*e*e+2)+r},easeInQuart:function(t,e,r,n,i){return n*(e/=i)*e*e*e+r},easeOutQuart:function(t,e,r,n,i){return-n*((e=e/i-1)*e*e*e-1)+r},easeInOutQuart:function(t,e,r,n,i){return(e/=i/2)<1?n/2*e*e*e*e+r:-n/2*((e-=2)*e*e*e-2)+r},easeInQuint:function(t,e,r,n,i){return n*(e/=i)*e*e*e*e+r},easeOutQuint:function(t,e,r,n,i){return n*((e=e/i-1)*e*e*e*e+1)+r},easeInOutQuint:function(t,e,r,n,i){return(e/=i/2)<1?n/2*e*e*e*e*e+r:n/2*((e-=2)*e*e*e*e+2)+r},easeInSine:function(t,e,r,n,i){return-n*o.c(e/i*(o.p/2))+n+r},easeOutSine:function(t,e,r,n,i){return n*o.s(e/i*(o.p/2))+r},easeInOutSine:function(t,e,r,n,i){return-n/2*(o.c(o.p*e/i)-1)+r},easeInExpo:function(t,e,r,n,i){return 0==e?r:n*o.w(2,10*(e/i-1))+r},easeOutExpo:function(t,e,r,n,i){return e==i?r+n:n*(1-o.w(2,-10*e/i))+r},easeInOutExpo:function(t,e,r,n,i){return 0==e?r:e==i?r+n:(e/=i/2)<1?n/2*o.w(2,10*(e-1))+r:n/2*(2-o.w(2,-10*--e))+r},easeInCirc:function(t,e,r,n,i){return-n*(o.t(1-(e/=i)*e)-1)+r},easeOutCirc:function(t,e,r,n,i){return n*o.t(1-(e=e/i-1)*e)+r},easeInOutCirc:function(t,e,r,n,i){return(e/=i/2)<1?-n/2*(o.t(1-e*e)-1)+r:n/2*(o.t(1-(e-=2)*e)+1)+r},easeInElastic:function(t,e,r,n,i){var a=o.o,s=0,u=n;return 0==e?r:1==(e/=i)?r+n:(s||(s=.3*i),u<o.a(n)?(u=n,a=s/4):a=s/(2*o.p)*o.n(n/u),-u*o.w(2,10*(e-=1))*o.s((e*i-a)*(2*o.p)/s)+r)},easeOutElastic:function(t,e,r,n,i){var a=o.o,s=0,u=n;return 0==e?r:1==(e/=i)?r+n:(s||(s=.3*i),u<o.a(n)?(u=n,a=s/4):a=s/(2*o.p)*o.n(n/u),u*o.w(2,-10*e)*o.s((e*i-a)*(2*o.p)/s)+n+r)},easeInOutElastic:function(t,e,r,n,i){var a=o.o,s=0,u=n;return 0==e?r:2==(e/=i/2)?r+n:(s||(s=i*(.3*1.5)),u<o.a(n)?(u=n,a=s/4):a=s/(2*o.p)*o.n(n/u),e<1?u*o.w(2,10*(e-=1))*o.s((e*i-a)*(2*o.p)/s)*-.5+r:u*o.w(2,-10*(e-=1))*o.s((e*i-a)*(2*o.p)/s)*.5+n+r)},easeInBack:function(t,e,r,n,i,a){return n*(e/=i)*e*(((a=a||o.o)+1)*e-a)+r},easeOutBack:function(t,e,r,n,i,a){return n*((e=e/i-1)*e*(((a=a||o.o)+1)*e+a)+1)+r},easeInOutBack:function(t,e,r,n,i,a){return a=a||o.o,(e/=i/2)<1?n/2*(e*e*((1+(a*=1.525))*e-a))+r:n/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+r},easeInBounce:function(t,e,r,n,i){return n-this.easeOutBounce(t,i-e,0,n,i)+r},easeOutBounce:function(t,e,r,n,i){var a=7.5625;return(e/=i)<1/2.75?n*(a*e*e)+r:e<2/2.75?n*(a*(e-=1.5/2.75)*e+.75)+r:e<2.5/2.75?n*(a*(e-=2.25/2.75)*e+.9375)+r:n*(a*(e-=2.625/2.75)*e+.984375)+r},easeInOutBounce:function(t,e,r,n,i){return e<i/2?.5*this.easeInBounce(t,2*e,0,n,i)+r:.5*this.easeOutBounce(t,2*e-i,0,n,i)+.5*n+r}}),T=function(){var n=/[^\x20\t\r\n\f]+/g,i=" ",a="",o="scrollLeft",p="scrollTop",v=[],b=m.type,T={animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0};function w(){var t,e,n,i,a,o,l=arguments[0]||{},c=1,h=arguments[g.l],d=!1;for(b(l)==f&&(d=l,l=arguments[1]||{},c=2),b(l)!=s&&!b(l)==u&&(l={}),h===c&&(l=N,--c);c<h;c++)if(null!=(a=arguments[c]))for(i in a)t=l[i],l!==(n=a[i])&&(d&&n&&(k(n)||(e=m.isA(n)))?(e?(e=!1,o=t&&m.isA(t)?t:[]):o=t&&k(t)?t:{},l[i]=w(d,o,n)):n!==r&&(l[i]=n));return l}function S(t,e,r){for(var n=r||0;n<e[g.l];n++)if(e[n]===t)return n;return-1}function A(t){return b(t)==u}function _(t){for(var e in t)return!1;return!0}function k(t){if(!t||b(t)!=s)return!1;var e,r=g.p,n=Object[r].hasOwnProperty,i=n.call(t,"constructor"),a=t.constructor&&t.constructor[r]&&n.call(t.constructor[r],"isPrototypeOf");if(t.constructor&&!i&&!a)return!1;for(e in t);return"undefined"==b(e)||n.call(t,e)}function L(t,e){var r=0;if(R(t))for(;r<t[g.l]&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t}function R(t){var e=!!t&&[g.l]in t&&t[g.l],r=b(t);return!A(r)&&(r==l||0===e||b(e)==h&&e>0&&e-1 in t)}function x(t){return(t.match(n)||[]).join(i)}function C(t,r){for(var n=(t.parentNode||e).querySelectorAll(r)||[],i=n[g.l];i--;)if(n[i]==t)return!0;return!1}function I(t,e,r){if(m.isA(r))for(var n=0;n<r[g.l];n++)I(t,e,r[n]);else b(r)==c?t.insertAdjacentHTML(e,r):t.insertAdjacentElement(e,r.nodeType?r:r[0])}function D(t,e,n){try{t[g.s][e]!==r&&(t[g.s][e]=function(t,e){return T[t.toLowerCase()]||b(e)!=h||(e+="px"),e}(e,n))}catch(t){}}function P(t,e){var r,n;!1!==e&&t.q.splice(0,1),t.q[g.l]>0?(n=t.q[0],M(t.el,n.props,n.duration,n.easing,n.complete,!0)):(r=S(t,v))>-1&&v.splice(r,1)}function O(t,e,r){e===o||e===p?t[e]=r:D(t,e,r)}function M(t,e,n,i,a,s){var u,l,c,f,h,d,b=k(n),T={},w={},L=0;for(b?(i=n.easing,n.start,c=n.progress,f=n.step,h=n.specialEasing,a=n.complete,d=n.duration):d=n,h=h||{},d=d||400,i=i||"swing",s=s||!1;L<v[g.l];L++)if(v[L].el===t){l=v[L];break}for(u in l||(l={el:t,q:[]},v.push(l)),e)T[u]=u===o||u===p?t[u]:N(t).css(u);for(u in T)T[u]!==e[u]&&e[u]!==r&&(w[u]=e[u]);if(_(w))s&&P(l);else{var R,x,C,I,D,M,F,U,B,j=s?0:S(G,l.q),G={props:w,duration:b?n:d,easing:i,complete:a};if(-1===j&&(j=l.q[g.l],l.q.push(G)),0===j)if(d>0)F=m.now(),U=function(){for(u in R=m.now(),B=R-F,x=G.stop||B>=d,C=1-(y.max(0,F+d-R)/d||0),w)I=parseFloat(T[u]),D=parseFloat(w[u]),M=(D-I)*E[h[u]||i](C,C*d,0,1,d)+I,O(t,u,M),A(f)&&f(M,{elem:t,prop:u,start:I,now:M,end:D,pos:C,options:{easing:i,speacialEasing:h,duration:d,complete:a,step:f},startTime:F});A(c)&&c({},C,y.max(0,d-B)),x?(P(l),A(a)&&a()):G.frame=m.rAF()(U)},G.frame=m.rAF()(U);else{for(u in w)O(t,u,w[u]);P(l)}}}function F(t){return!!(t[g.oW]||t[g.oH]||t.getClientRects()[g.l])}function N(r){if(0===arguments[g.l])return this;var n,i,a=new N,o=r,s=0;if(b(r)==c)for(o=[],"<"===r.charAt(0)?((i=e.createElement("div")).innerHTML=r,n=i.children):n=e.querySelectorAll(r);s<n[g.l];s++)o.push(n[s]);if(o){for(b(o)==c||R(o)&&o!==t&&o!==o.self||(o=[o]),s=0;s<o[g.l];s++)a[s]=o[s];a[g.l]=o[g.l]}return a}return N[g.p]={on:function(t,e){var r,i=(t=(t||a).match(n)||[a])[g.l],o=0;return this.each((function(){r=this;try{if(r.addEventListener)for(;o<i;o++)r.addEventListener(t[o],e);else if(r.detachEvent)for(;o<i;o++)r.attachEvent("on"+t[o],e)}catch(t){}}))},off:function(t,e){var r,i=(t=(t||a).match(n)||[a])[g.l],o=0;return this.each((function(){r=this;try{if(r.removeEventListener)for(;o<i;o++)r.removeEventListener(t[o],e);else if(r.detachEvent)for(;o<i;o++)r.detachEvent("on"+t[o],e)}catch(t){}}))},one:function(t,e){return t=(t||a).match(n)||[a],this.each((function(){var r=N(this);N.each(t,(function(t,n){r.on(n,(function t(i){e.call(this,i),r.off(n,t)}))}))}))},trigger:function(t){var r,n;return this.each((function(){r=this,e.createEvent?((n=e.createEvent("HTMLEvents")).initEvent(t,!0,!1),r.dispatchEvent(n)):r.fireEvent("on"+t)}))},append:function(t){return this.each((function(){I(this,"beforeend",t)}))},prepend:function(t){return this.each((function(){I(this,"afterbegin",t)}))},before:function(t){return this.each((function(){I(this,"beforebegin",t)}))},after:function(t){return this.each((function(){I(this,"afterend",t)}))},remove:function(){return this.each((function(){var t=this.parentNode;null!=t&&t.removeChild(this)}))},unwrap:function(){var t,e,r,n=[];for(this.each((function(){-1===S(r=this.parentNode,n)&&n.push(r)})),t=0;t<n[g.l];t++){for(e=n[t],r=e.parentNode;e.firstChild;)r.insertBefore(e.firstChild,e);r.removeChild(e)}return this},wrapAll:function(t){for(var e,r=this,n=N(t)[0],i=n,a=r[0].parentNode,o=r[0].previousSibling;i.childNodes[g.l]>0;)i=i.childNodes[0];for(e=0;r[g.l]-e;i.firstChild===r[0]&&e++)i.appendChild(r[e]);var s=o?o.nextSibling:a.firstChild;return a.insertBefore(n,s),this},wrapInner:function(t){return this.each((function(){var e=N(this),r=e.contents();r[g.l]?r.wrapAll(t):e.append(t)}))},wrap:function(t){return this.each((function(){N(this).wrapAll(t)}))},css:function(e,n){var i,a,o,s=t.getComputedStyle;return b(e)==c?n===r?(i=this[0],o=s?s(i,null):i.currentStyle[e],s?null!=o?o.getPropertyValue(e):i[g.s][e]:o):this.each((function(){D(this,e,n)})):this.each((function(){for(a in e)D(this,a,e[a])}))},hasClass:function(t){for(var e,r,n=0,o=i+t+i;e=this[n++];){if((r=e.classList)&&r.contains(t))return!0;if(1===e.nodeType&&(i+x(e.className+a)+i).indexOf(o)>-1)return!0}return!1},addClass:function(t){var e,o,s,u,l,c,f,h,d=0,p=0;if(t)for(e=t.match(n)||[];o=this[d++];)if(h=o.classList,f===r&&(f=h!==r),f)for(;l=e[p++];)h.add(l);else if(u=o.className+a,s=1===o.nodeType&&i+x(u)+i){for(;l=e[p++];)s.indexOf(i+l+i)<0&&(s+=l+i);u!==(c=x(s))&&(o.className=c)}return this},removeClass:function(t){var e,o,s,u,l,c,f,h,d=0,p=0;if(t)for(e=t.match(n)||[];o=this[d++];)if(h=o.classList,f===r&&(f=h!==r),f)for(;l=e[p++];)h.remove(l);else if(u=o.className+a,s=1===o.nodeType&&i+x(u)+i){for(;l=e[p++];)for(;s.indexOf(i+l+i)>-1;)s=s.replace(i+l+i,i);u!==(c=x(s))&&(o.className=c)}return this},hide:function(){return this.each((function(){this[g.s].display="none"}))},show:function(){return this.each((function(){this[g.s].display="block"}))},attr:function(t,e){for(var n,i=0;n=this[i++];){if(e===r)return n.getAttribute(t);n.setAttribute(t,e)}return this},removeAttr:function(t){return this.each((function(){this.removeAttribute(t)}))},offset:function(){var r=this[0][g.bCR](),n=t.pageXOffset||e.documentElement[o],i=t.pageYOffset||e.documentElement[p];return{top:r.top+i,left:r.left+n}},position:function(){var t=this[0];return{top:t.offsetTop,left:t.offsetLeft}},scrollLeft:function(t){for(var e,n=0;e=this[n++];){if(t===r)return e[o];e[o]=t}return this},scrollTop:function(t){for(var e,n=0;e=this[n++];){if(t===r)return e[p];e[p]=t}return this},val:function(t){var e=this[0];return t?(e.value=t,this):e.value},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){return N(this[t>=0?t:this[g.l]+t])},find:function(t){var e,r=[];return this.each((function(){var n=this.querySelectorAll(t);for(e=0;e<n[g.l];e++)r.push(n[e])})),N(r)},children:function(t){var e,r,n,i=[];return this.each((function(){for(r=this.children,n=0;n<r[g.l];n++)e=r[n],t?(e.matches&&e.matches(t)||C(e,t))&&i.push(e):i.push(e)})),N(i)},parent:function(t){var e,r=[];return this.each((function(){e=this.parentNode,t&&!N(e).is(t)||r.push(e)})),N(r)},is:function(t){var e,r;for(r=0;r<this[g.l];r++){if(e=this[r],":visible"===t)return F(e);if(":hidden"===t)return!F(e);if(e.matches&&e.matches(t)||C(e,t))return!0}return!1},contents:function(){var t,e,r=[];return this.each((function(){for(t=this.childNodes,e=0;e<t[g.l];e++)r.push(t[e])})),N(r)},each:function(t){return L(this,t)},animate:function(t,e,r,n){return this.each((function(){M(this,t,e,r,n)}))},stop:function(t,e){return this.each((function(){!function(t,e,r){for(var n,i,a,o=0;o<v[g.l];o++)if((n=v[o]).el===t){if(n.q[g.l]>0){if((i=n.q[0]).stop=!0,m.cAF()(i.frame),n.q.splice(0,1),r)for(a in i.props)O(t,a,i.props[a]);e?n.q=[]:P(n,!1)}break}}(this,t,e)}))}},w(N,{extend:w,inArray:S,isEmptyObject:_,isPlainObject:k,each:L}),N}(),w=(n=[],i="__overlayScrollbars__",function(t,e){var r=arguments[g.l];if(r<1)return n;if(e)t[i]=e,n.push(t);else{var a=m.inA(t,n);if(a>-1){if(!(r>1))return n[a][i];delete t[i],n.splice(a,1)}}}),S=function(){var n,i,o,d,E,S,A,_,k,R,x,C=[],I=(d=m.type,E=[f,h,c,l,s,u,p],R={className:["os-theme-dark",[p,c]],resize:["none","n:none b:both h:horizontal v:vertical"],sizeAutoCapable:A=[!0,f],clipAlways:A,normalizeRTL:A,paddingAbsolute:_=[!1,f],autoUpdate:[null,[p,f]],autoUpdateInterval:[33,S=h],updateOnLoad:[["img"],[c,l,p]],nativeScrollbarsOverlaid:{showNativeScrollbars:_,initialize:A},overflowBehavior:{x:["scroll","v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden"],y:["scroll","v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden"]},scrollbars:{visibility:["auto","v:visible h:hidden a:auto"],autoHide:["never","n:never s:scroll l:leave m:move"],autoHideDelay:[800,S],dragScrolling:A,clickScrolling:_,touchSupport:A,snapHandle:_},textarea:{dynWidth:_,dynHeight:_,inheritedAttrs:[["style","class"],[c,l,p]]},callbacks:{onInitialized:k=[null,[p,u]],onInitializationWithdrawn:k,onDestroyed:k,onScrollStart:k,onScroll:k,onScrollStop:k,onOverflowChanged:k,onOverflowAmountChanged:k,onDirectionChanged:k,onContentSizeChanged:k,onHostSizeChanged:k,onUpdated:k}},{_defaults:(x=function(t){return function e(r){var n,i,a;for(n in r)r[g.hOP](n)&&(i=r[n],(a=d(i))==l?r[n]=i[t?1:0]:a==s&&(r[n]=e(i)));return r}(T.extend(!0,{},R))})(),_template:x(!0),_validate:function(e,n,i,a){var o={},u={},l=T.extend(!0,{},e),f=T.inArray,h=T.isEmptyObject;return function t(e,n,a,o,u,l){for(var p in n)if(n[g.hOP](p)&&e[g.hOP](p)){var v,y,b,w,S,A,_,k,L=!1,R=!1,x=n[p],C=d(x),I=C==s,D=m.isA(x)?x:[x],P=a[p],O=e[p],M=d(O),F=l?l+".":"",N='The option "'+F+p+"\" wasn't set, because",U=[],B=[];if(P=P===r?{}:P,I&&M==s)o[p]={},u[p]={},t(O,x,P,o[p],u[p],F+p),T.each([e,o,u],(function(t,e){h(e[p])&&delete e[p]}));else if(!I){for(A=0;A<D[g.l];A++)if(S=D[A],b=(C=d(S))==c&&-1===f(S,E))for(U.push(c),v=S.split(" "),B=B.concat(v),_=0;_<v[g.l];_++){for(w=(y=v[_].split(":"))[0],k=0;k<y[g.l];k++)if(O===y[k]){L=!0;break}if(L)break}else if(U.push(S),M===S){L=!0;break}L?((R=O!==P)&&(o[p]=O),(b?f(P,y)<0:R)&&(u[p]=b?w:O)):i&&console.warn(N+" it doesn't accept the type [ "+M.toUpperCase()+' ] with the value of "'+O+'".\r\nAccepted types are: [ '+U.join(", ").toUpperCase()+" ]."+(B[length]>0?"\r\nValid strings are: [ "+B.join(", ").split(":").join(", ")+" ].":"")),delete e[p]}}}(l,n,a||{},o,u),!h(l)&&i&&console.warn("The following options are discarded due to invalidity:\r\n"+t.JSON.stringify(l,null,2)),{_default:o,_prepared:u}}});function D(){i||(i=new P(I._defaults)),o||(o=new O(i))}function P(e){var r=this,n="overflow",i="hidden",a=T("body"),o=T('<div id="os-dummy-scrollbar-size"><div></div></div>'),s=o[0],u=T(o.children("div").eq(0));a.append(o),o.hide().show();var l=h(s),c={x:0===l.x,y:0===l.y},f=function(){var e,r=t.navigator.userAgent,n="indexOf",i="substring",a=r[n]("MSIE "),o=r[n]("Trident/"),s=r[n]("Edge/"),u=r[n]("rv:"),l=parseInt;return a>0?e=l(r[i](a+5,r[n](".",a)),10):o>0?e=l(r[i](u+3,r[n](".",u)),10):s>0&&(e=l(r[i](s+5,r[n](".",s)),10)),e}();function h(t){return{x:t[g.oH]-t[g.cH],y:t[g.oW]-t[g.cW]}}T.extend(r,{defaultOptions:e,msie:f,autoUpdateLoop:!1,autoUpdateRecommended:!m.mO(),nativeScrollbarSize:l,nativeScrollbarIsOverlaid:c,nativeScrollbarStyling:function(){var e=!1;o.addClass("os-viewport-native-scrollbars-invisible");try{e="none"===o.css("scrollbar-width")&&(f>9||!f)||"none"===t.getComputedStyle(s,"::-webkit-scrollbar").getPropertyValue("display")}catch(t){}return e}(),overlayScrollbarDummySize:{x:30,y:30},cssCalc:v._cssPropertyValue("width","calc","(1px)")||null,restrictedMeasuring:function(){o.css(n,i);var t=s[g.sW],e=s[g.sH];o.css(n,"visible");var r=s[g.sW],a=s[g.sH];return t-r!=0||e-a!=0}(),rtlScrollBehavior:function(){o.css({"overflow-y":i,"overflow-x":"scroll",direction:"rtl"}).scrollLeft(0);var t=o.offset(),e=u.offset();o.scrollLeft(-999);var r=u.offset();return{i:t.left===e.left,n:e.left!==r.left}}(),supportTransform:!!v._cssProperty("transform"),supportTransition:!!v._cssProperty("transition"),supportPassiveEvents:function(){var e=!1;try{t.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return e}(),supportResizeObserver:!!m.rO(),supportMutationObserver:!!m.mO()}),o.removeAttr(g.s).remove(),function(){if(!c.x||!c.y){var e=y.abs,n=m.wW(),i=m.wH(),s=u();T(t).on("resize",(function(){if(w().length>0){var t=m.wW(),l=m.wH(),c=t-n,f=l-i;if(0===c&&0===f)return;var d,p=y.round(t/(n/100)),g=y.round(l/(i/100)),v=e(c),b=e(f),E=e(p),S=e(g),A=u(),_=v>2&&b>2,k=(x=S,!((C=e(E))!==(I=e(x))&&C+1!==I&&C-1!==I)),L=_&&k&&A!==s&&s>0,R=r.nativeScrollbarSize;L&&(a.append(o),d=r.nativeScrollbarSize=h(o[0]),o.remove(),R.x===d.x&&R.y===d.y||T.each(w(),(function(){w(this)&&w(this).update("zoom")}))),n=t,i=l,s=A}var x,C,I}))}function u(){var e=t.screen.deviceXDPI||0,r=t.screen.logicalXDPI||1;return t.devicePixelRatio||e/r}}()}function O(t){var e,n=T.inArray,i=m.now,a="autoUpdate",o=a+"Interval",s=g.l,u=[],l=[],c=!1,f=33,h=i(),d=function t(){if(u[s]>0&&c){e=m.rAF()((function(){t()}));var n,d,p,g,v,b,E=i(),T=E-h;if(T>f){h=E-T%f,n=33;for(var w=0;w<u[s];w++)(d=u[w])!==r&&(g=(p=d.options())[a],v=y.max(1,p[o]),b=i(),(!0===g||null===g)&&b-l[w]>v&&(d.update("auto"),l[w]=new Date(b+=v)),n=y.max(1,y.min(n,v)));f=n}}else f=33};this.add=function(e){-1===n(e,u)&&(u.push(e),l.push(i()),u[s]>0&&!c&&(c=!0,t.autoUpdateLoop=c,d()))},this.remove=function(i){var a=n(i,u);a>-1&&(l.splice(a,1),u.splice(a,1),0===u[s]&&c&&(c=!1,t.autoUpdateLoop=c,e!==r&&(m.cAF()(e),e=-1)))}}function M(i,o,d,p,E){var S=m.type,A=T.inArray,_=T.each,k=new n,L=T[g.p];if(di(i)){if(w(i)){var R=w(i);return R.options(o),R}var x,C,D,P,O,M,F,N,U,B,j,G,H,K,V,q,z,W,Y,X,$,Q,Z,J,tt,et,rt,nt,it,at,ot,st,ut,lt,ct,ft,ht,dt,pt,gt,vt,mt,yt,bt,Et,Tt,wt,St,At,_t,kt,Lt,Rt,xt,Ct,It,Dt,Pt,Ot,Mt,Ft,Nt,Ut,Bt,jt,Gt,Ht,Kt,Vt,qt,zt,Wt,Yt,Xt,$t,Qt,Zt,Jt,te,ee,re,ne,ie,ae,oe,se,ue,le,ce,fe,he,de,pe,ge,ve,me,ye,be,Ee,Te,we,Se,Ae,_e,ke,Le,Re,xe,Ce,Ie,De,Pe,Oe,Me,Fe,Ne,Ue,Be,je,Ge,He={},Ke={},Ve={},qe={},ze={},We="-hidden",Ye="margin-",Xe="padding-",$e="border-",Qe="top",Ze="right",Je="bottom",tr="left",er="min-",rr="max-",nr="width",ir="height",ar="float",or="",sr="auto",ur="sync",lr="scroll",cr="100%",fr="x",hr="y",dr=".",pr=" ",gr="scrollbar",vr="-horizontal",mr="-vertical",yr=lr+"Left",br=lr+"Top",Er="mousedown touchstart",Tr="mouseup touchend touchcancel",wr="mousemove touchmove",Sr="mouseenter",Ar="mouseleave",_r="keydown",kr="keyup",Lr="selectstart",Rr="transitionend webkitTransitionEnd oTransitionEnd",xr="__overlayScrollbarsRO__",Cr="os-",Ir="os-html",Dr="os-host",Pr=Dr+"-foreign",Or=Dr+"-textarea",Mr=Dr+"-"+gr+vr+We,Fr=Dr+"-"+gr+mr+We,Nr=Dr+"-transition",Ur=Dr+"-rtl",Br=Dr+"-resize-disabled",jr=Dr+"-scrolling",Gr=Dr+"-overflow",Hr=(Gr=Dr+"-overflow")+"-x",Kr=Gr+"-y",Vr="os-textarea",qr=Vr+"-cover",zr="os-padding",Wr="os-viewport",Yr=Wr+"-native-scrollbars-invisible",Xr=Wr+"-native-scrollbars-overlaid",$r="os-content",Qr="os-content-arrange",Zr="os-content-glue",Jr="os-size-auto-observer",tn="os-resize-observer",en="os-resize-observer-item",rn=en+"-final",nn="os-text-inherit",an=Cr+gr,on=an+"-track",sn=on+"-off",un=an+"-handle",ln=un+"-off",cn=an+"-unusable",fn=an+"-"+sr+We,hn=an+"-corner",dn=hn+"-resize",pn=dn+"-both",gn=dn+vr,vn=dn+mr,mn=an+vr,yn=an+mr,bn="os-dragging",En="os-theme-none",Tn=[Yr,Xr,sn,ln,cn,fn,dn,pn,gn,vn,bn].join(pr),wn=[],Sn=[g.ti],An={},_n={},kn=42,Ln="load",Rn=[],xn={},Cn=["wrap","cols","rows"],In=[g.i,g.c,g.s,"open"].concat(Sn),Dn=[];return k.sleep=function(){it=!0},k.update=function(t){var e,n,i,a,o;if(!V)return S(t)==c?t===sr?(e=function(){if(!it&&!Le){var t,e,n,i=[],a=[{_elem:gt,_attrs:In.concat(":visible")},{_elem:q?pt:r,_attrs:Cn}];return _(a,(function(r,a){(t=a._elem)&&_(a._attrs,(function(r,a){e=":"===a.charAt(0)?t.is(a):t.attr(a),n=xn[a],wi(e,n)&&i.push(a),xn[a]=e}))})),Wn(i),i[g.l]>0}}(),n=function(){if(it)return!1;var t,e,r,n,i=vi(),a=q&&qt&&!me?pt.val().length:0,o=!Le&&qt&&!q,s={};return o&&(t=Et.css(ar),s[ar]=nt?Ze:tr,s[nr]=sr,Et.css(s)),n={w:i[g.sW]+a,h:i[g.sH]+a},o&&(s[ar]=t,s[nr]=cr,Et.css(s)),e=qn(),r=wi(n,se),se=n,r||e}(),(i=e||n)&&Xn({_contentSizeChanged:n,_changedOptions:K?r:st})):t===ur?Le?(a=_e(Se.takeRecords()),o=ke(Ae.takeRecords())):a=k.update(sr):"zoom"===t&&Xn({_hostSizeChanged:!0,_contentSizeChanged:!0}):(t=it||t,it=!1,k.update(ur)&&!t||Xn({_force:t})),$n(),i||a||o},k.options=function(t,e){var r,n={};if(T.isEmptyObject(t)||!T.isPlainObject(t)){if(S(t)!=c)return ot;if(!(arguments.length>1))return bi(ot,t);Ei(n,t,e),r=Qn(n)}else r=Qn(t);T.isEmptyObject(r)||Xn({_changedOptions:r})},k.destroy=function(){if(!V){for(var t in E.remove(k),Nn(),Mn(mt),Mn(vt),An)k.removeExt(t);for(;Dn[g.l]>0;)Dn.pop()();Vn(!0),wt&&Li(wt),Tt&&Li(Tt),$&&Li(vt),Jn(!0),si(!0),Zn(!0);for(var e=0;e<Rn[g.l];e++)T(Rn[e]).off(Ln,Kn);Rn=r,V=!0,it=!0,w(i,0),ui("onDestroyed")}},k.scroll=function(t,e,n,i){if(0===arguments.length||t===r){var a=Ke,o=Ve,d=pe&&nt&&D.i,p=pe&&nt&&D.n,v=a._currentScroll,E=a._currentScrollRatio,w=a._maxScroll;return E=d?1-E:E,v=d?w-v:v,w*=p?-1:1,{position:{x:v*=p?-1:1,y:o._currentScroll},ratio:{x:E,y:o._currentScrollRatio},max:{x:w,y:o._maxScroll},handleOffset:{x:a._handleOffset,y:o._handleOffset},handleLength:{x:a._handleLength,y:o._handleLength},handleLengthRatio:{x:a._handleLengthRatio,y:o._handleLengthRatio},trackLength:{x:a._trackLength,y:o._trackLength},snappedHandleOffset:{x:a._snappedHandleOffset,y:o._snappedHandleOffset},isRTL:nt,isRTLNormalized:pe}}k.update(ur);var _,L,R,x,C,I,P,O,M,F=pe,N=[fr,tr,"l"],U=[hr,Qe,"t"],j=["+=","-=","*=","/="],G=S(e)==s,H=G?e.complete:i,K={},V={},q="end",z="begin",W="center",Y="nearest",X="always",$="never",Q="ifneeded",Z=g.l,J=[fr,hr,"xy","yx"],tt=[z,q,W,Y],et=[X,$,Q],rt=t[g.hOP]("el"),it=rt?t.el:t,at=!!(it instanceof T||b)&&it instanceof b,ot=!at&&di(it),st=function(){L&&ii(!0),R&&ii(!1)},ut=S(H)!=u?r:function(){st(),H()};function lt(t,e){for(_=0;_<e[Z];_++)if(t===e[_])return!0;return!1}function ct(t,e){var r=t?N:U;if(e=S(e)==c||S(e)==h?[e,e]:e,m.isA(e))return t?e[0]:e[1];if(S(e)==s)for(_=0;_<r[Z];_++)if(r[_]in e)return e[r[_]]}function ft(t,e){var n,i,a,o,s=S(e)==c,u=t?Ke:Ve,l=u._currentScroll,f=u._maxScroll,d=" * ",p=nt&&t,g=p&&D.n&&!F,v="replace",m=eval;if(s?(e[Z]>2&&(o=e.substr(0,2),A(o,j)>-1&&(n=o)),e=(e=n?e.substr(2):e)[v](/min/g,0)[v](/</g,0)[v](/max/g,(g?"-":or)+cr)[v](/>/g,(g?"-":or)+cr)[v](/px/g,or)[v](/%/g,d+f*(p&&D.n?-1:1)/100)[v](/vw/g,d+qe.w)[v](/vh/g,d+qe.h),i=pi(isNaN(e)?pi(m(e),!0).toFixed():e)):i=e,i!==r&&!isNaN(i)&&S(i)==h){var b=F&&p,E=l*(b&&D.n?-1:1),T=b&&D.i,w=b&&D.n;switch(E=T?f-E:E,n){case"+=":a=E+i;break;case"-=":a=E-i;break;case"*=":a=E*i;break;case"/=":a=E/i;break;default:a=i}a=T?f-a:a,a*=w?-1:1,a=p&&D.n?y.min(0,y.max(f,a)):y.max(0,y.min(f,a))}return a===l?r:a}function ht(t,e,r,n){var i,a,o=[r,r],u=S(t);if(u==e)t=[t,t];else if(u==l){if((i=t[Z])>2||i<1)t=o;else for(1===i&&(t[1]=r),_=0;_<i;_++)if(a=t[_],S(a)!=e||!lt(a,n)){t=o;break}}else t=u==s?[t[fr]||r,t[hr]||r]:o;return{x:t[0],y:t[1]}}function dt(t){var e,r,n=[],i=[Qe,Ze,Je,tr];for(_=0;_<t[Z]&&_!==i[Z];_++)e=t[_],(r=S(e))==f?n.push(e?pi(M.css(Ye+i[_])):0):n.push(r==h?e:0);return n}if(at||ot){var pt,gt=rt?t.margin:0,vt=rt?t.axis:0,mt=rt?t.scroll:0,Et=rt?t.block:0,Tt=[0,0,0,0],wt=S(gt);if((M=at?it:T(it))[Z]>0){gt=wt==h||wt==f?dt([gt,gt,gt,gt]):wt==l?2===(pt=gt[Z])?dt([gt[0],gt[1],gt[0],gt[1]]):pt>=4?dt(gt):Tt:wt==s?dt([gt[Qe],gt[Ze],gt[Je],gt[tr]]):Tt,C=lt(vt,J)?vt:"xy",I=ht(mt,c,X,et),P=ht(Et,c,z,tt),O=gt;var St={l:Ke._currentScroll,t:Ve._currentScroll},At=yt.offset(),_t=M.offset(),kt={x:I.x==$||C==hr,y:I.y==$||C==fr};_t[Qe]-=O[0],_t[tr]-=O[3];var Lt={x:y.round(_t[tr]-At[tr]+St.l),y:y.round(_t[Qe]-At[Qe]+St.t)};if(nt&&(D.n||D.i||(Lt.x=y.round(At[tr]-_t[tr]+St.l)),D.n&&F&&(Lt.x*=-1),D.i&&F&&(Lt.x=y.round(At[tr]-_t[tr]+(Ke._maxScroll-St.l)))),P.x!=z||P.y!=z||I.x==Q||I.y==Q||nt){var Rt=M[0],xt=B?Rt[g.bCR]():{width:Rt[g.oW],height:Rt[g.oH]},Ct={w:xt[nr]+O[3]+O[1],h:xt[ir]+O[0]+O[2]},It=function(t){var e=oi(t),r=e._w_h,n=e._left_top,i=e._x_y,a=P[i]==(t&&nt?z:q),o=P[i]==W,s=P[i]==Y,u=I[i]==$,l=I[i]==Q,c=qe[r],f=At[n],h=Ct[r],d=_t[n],p=o?2:1,g=d+h/2,v=f+c/2,m=h<=c&&d>=f&&d+h<=f+c;u?kt[i]=!0:kt[i]||((s||l)&&(kt[i]=!!l&&m,a=h<c?g>v:g<v),Lt[i]-=a||o?(c/p-h/p)*(t&&nt&&F?-1:1):0)};It(!0),It(!1)}kt.y&&delete Lt.y,kt.x&&delete Lt.x,t=Lt}}K[yr]=ft(!0,ct(!0,t)),K[br]=ft(!1,ct(!1,t)),L=K[yr]!==r,R=K[br]!==r,(L||R)&&(e>0||G)?G?(e.complete=ut,bt.animate(K,e)):(x={duration:e,complete:ut},m.isA(n)||T.isPlainObject(n)?(V[yr]=n[0]||n.x,V[br]=n[1]||n.y,x.specialEasing=V):x.easing=n,bt.animate(K,x)):(L&&bt[yr](K[yr]),R&&bt[br](K[br]),st())},k.scrollStop=function(t,e,r){return bt.stop(t,e,r),k},k.getElements=function(t){var e={target:Pt,host:Ot,padding:Nt,viewport:Ut,content:Bt,scrollbarHorizontal:{scrollbar:_t[0],track:kt[0],handle:Lt[0]},scrollbarVertical:{scrollbar:Rt[0],track:xt[0],handle:Ct[0]},scrollbarCorner:At[0]};return S(t)==c?bi(e,t):e},k.getState=function(t){function e(t){if(!T.isPlainObject(t))return t;var e=Si({},t),r=function(t,r){e[g.hOP](t)&&(e[r]=e[t],delete e[t])};return r("w",nr),r("h",ir),delete e.c,e}var r={destroyed:!!e(V),sleeping:!!e(it),autoUpdate:e(!Le),widthAuto:e(qt),heightAuto:e(zt),padding:e(Yt),overflowAmount:e(ne),hideOverflow:e(Vt),hasOverflow:e(Kt),contentScrollSize:e(Gt),viewportSize:e(qe),hostSize:e(jt),documentMixed:e(W)};return S(t)==c?bi(r,t):r},k.ext=function(t){var e,r="added removed on contract".split(" "),n=0;if(S(t)==c){if(An[g.hOP](t))for(e=Si({},An[t]);n<r.length;n++)delete e[r[n]]}else for(n in e={},An)e[n]=Si({},k.ext(n));return e},k.addExt=function(e,r){var i,a,o,s,l=n.extension(e),c=!0;if(l){if(An[g.hOP](e))return k.ext(e);if((i=l.extensionFactory.call(k,Si({},l.defaultOptions),T,m))&&(o=i.contract,S(o)==u&&(s=o(t),c=S(s)==f?s:c),c))return An[e]=i,a=i.added,S(a)==u&&a(r),k.ext(e)}else console.warn('A extension with the name "'+e+"\" isn't registered.")},k.removeExt=function(t){var e,r=An[t];return!!r&&(delete An[t],e=r.removed,S(e)==u&&e(),!0)},n.valid(function(t,n,i){var o,s;return at=p.defaultOptions,M=p.nativeScrollbarStyling,N=Si({},p.nativeScrollbarSize),x=Si({},p.nativeScrollbarIsOverlaid),C=Si({},p.overlayScrollbarDummySize),D=Si({},p.rtlScrollBehavior),Qn(Si({},at,n)),F=p.cssCalc,O=p.msie,P=p.autoUpdateRecommended,U=p.supportTransition,B=p.supportTransform,j=p.supportPassiveEvents,G=p.supportResizeObserver,H=p.supportMutationObserver,p.restrictedMeasuring,ft=T(t.ownerDocument),Dt=ft[0],ct=T(Dt.defaultView||Dt.parentWindow),It=ct[0],ht=Ri(ft,"html"),dt=Ri(ht,"body"),pt=T(t),Pt=pt[0],q=pt.is("textarea"),z=pt.is("body"),W=Dt!==e,Y=q?pt.hasClass(Vr)&&pt.parent().hasClass($r):pt.hasClass(Dr)&&pt.children(dr+zr)[g.l],x.x&&x.y&&!st.nativeScrollbarsOverlaid.initialize?(ui("onInitializationWithdrawn"),Y&&(Zn(!0),Jn(!0),si(!0)),V=!0,it=!0,k):(z&&((o={}).l=y.max(pt[yr](),ht[yr](),ct[yr]()),o.t=y.max(pt[br](),ht[br](),ct[br]()),s=function(){bt.removeAttr(g.ti),Pn(bt,Er,s,!0,!0)}),Zn(),Jn(),si(),function(){var t,e,n=[112,113,114,115,116,117,118,119,120,121,123,33,34,37,38,39,40,16,17,18,19,20,144],i=[],o="focus";function s(e){Yn(),k.update(sr),e&&P&&clearInterval(t)}q?(O>9||!P?On(pt,"input",s):On(pt,[_r,kr],[function(e){var r=e.keyCode;A(r,n)<0&&(i[g.l]||(s(),t=setInterval(s,1e3/60)),A(r,i)<0&&i.push(r))},function(t){var e=t.keyCode,r=A(e,i);A(e,n)<0&&(r>-1&&i.splice(r,1),i[g.l]||s(!0))}]),On(pt,[lr,"drop",o,o+"out"],[function(t){return pt[yr](D.i&&pe?9999999:0),pt[br](0),m.prvD(t),m.stpP(t),!1},function(t){setTimeout((function(){V||s()}),50)},function(){Re=!0,Ai(gt,o)},function(){Re=!1,i=[],_i(gt,o),s(!0)}])):On(Et,Rr,(function(t){!0!==ae&&function(t){if(!K)return!0;var e="flex-grow",r="flex-shrink",n="flex-basis",i=[nr,er+nr,rr+nr,Ye+tr,Ye+Ze,tr,Ze,"font-weight","word-spacing",e,r,n],a=[Xe+tr,Xe+Ze,$e+tr+nr,$e+Ze+nr],o=[ir,er+ir,rr+ir,Ye+Qe,Ye+Je,Qe,Je,"line-height",e,r,n],s=[Xe+Qe,Xe+Je,$e+Qe+nr,$e+Je+nr],c="s"===re.x||"v-s"===re.x,f=!1,h=function(t,e){for(var r=0;r<t[g.l];r++)if(t[r]===e)return!0;return!1};return("s"===re.y||"v-s"===re.y)&&((f=h(o,t))||X||(f=h(s,t))),c&&!f&&((f=h(i,t))||X||(f=h(a,t))),f}((t=t.originalEvent||t).propertyName)&&k.update(sr)})),On(bt,lr,(function(t){it||(e!==r?clearTimeout(e):((Pe||Oe)&&ri(!0),gi()||Ai(gt,jr),ui("onScrollStart",t)),Ne||(ii(!0),ii(!1)),ui("onScroll",t),e=setTimeout((function(){V||(clearTimeout(e),e=r,(Pe||Oe)&&ri(!1),gi()||_i(gt,jr),ui("onScrollStop",t))}),175))}),!0)}(),ti(!0),ti(!1),function(){var t,e=It.top!==It,n={},i={},a={};function o(t){if(u(t)){var e=l(t),r={};(je||Be)&&(r[nr]=i.w+(e.x-n.x)*a.x),(Ge||Be)&&(r[ir]=i.h+(e.y-n.y)*a.y),gt.css(r),m.stpP(t)}else s(t)}function s(e){var n=e!==r;Pn(ft,[Lr,wr,Tr],[Hn,o,s],!0),_i(dt,bn),At.releaseCapture&&At.releaseCapture(),n&&(t&&Fn(),k.update(sr)),t=!1}function u(t){var e=(t.originalEvent||t).touches!==r;return!it&&!V&&(1===m.mBtn(t)||e)}function l(t){return O&&e?{x:t.screenX,y:t.screenY}:m.page(t)}On(At,Er,(function(e){u(e)&&!Ue&&(Le&&(t=!0,Nn()),n=l(e),i.w=Ot[g.oW]-(X?0:Q),i.h=Ot[g.oH]-(X?0:Z),a=hi(),Pn(ft,[Lr,wr,Tr],[Hn,o,s]),Ai(dt,bn),At.setCapture&&At.setCapture(),m.prvD(e),m.stpP(e))}))}(),function(){if(H){var t,e,r,n,i,o,s,l,c,f,d=m.mO(),p=m.now();ke=function(t){var e=!1;return K&&!it&&(_(t,(function(){return!(e=function(t){var e=t.attributeName,r=t.target,n=t.type,i="closest";if(r===Bt)return null===e;if("attributes"===n&&(e===g.c||e===g.s)&&!q){if(e===g.c&&T(r).hasClass(Dr))return zn(t.oldValue,r.className);if(a(r[i])!=u)return!0;if(null!==r[i](dr+tn)||null!==r[i](dr+an)||null!==r[i](dr+hn))return!1}return!0}(this))})),e&&(l=m.now(),c=zt||qt,f=function(){V||(p=l,q&&Yn(),c?Xn():k.update(sr))},clearTimeout(s),l-p>11||!c?f():s=setTimeout(f,11))),e},Se=new d(_e=function(a){var s,u=!1,l=!1,c=[];return K&&!it&&(_(a,(function(){t=(s=this).target,e=s.attributeName,r=e===g.c,n=s.oldValue,i=t.className,Y&&r&&!l&&n.indexOf(Pr)>-1&&i.indexOf(Pr)<0&&(o=fi(!0),Ot.className=i.split(pr).concat(n.split(pr).filter((function(t){return t.match(o)}))).join(pr),u=l=!0),u||(u=r?zn(n,i):e!==g.s||n!==t[g.s].cssText),c.push(e)})),Wn(c),u&&k.update(l||sr)),u}),Ae=new d(ke)}}(),Mn(mt,Un),z&&(bt[yr](o.l)[br](o.t),e.activeElement==t&&Ut.focus&&(bt.attr(g.ti,"-1"),Ut.focus(),Pn(bt,Er,s,!1,!0))),k.update(sr),K=!0,ui("onInitialized"),_(wn,(function(t,e){ui(e.n,e.a)})),wn=[],S(i)==c&&(i=[i]),m.isA(i)?_(i,(function(t,e){k.addExt(e)})):T.isPlainObject(i)&&_(i,(function(t,e){k.addExt(t,e)})),setTimeout((function(){U&&!V&&Ai(gt,Nr)}),333),k)}(i,o,d))&&w(i,k),k}function Pn(t,e,r,n,i){var a=m.isA(e)&&m.isA(r),o=n?"removeEventListener":"addEventListener",s=n?"off":"on",u=!a&&e.split(pr),l=0,c=T.isPlainObject(i),f=j&&(c?i._passive:i)||!1,h=c&&(i._capture||!1),d=j?{passive:f,capture:h}:h;if(a)for(;l<e[g.l];l++)Pn(t,e[l],r[l],n,i);else for(;l<u[g.l];l++)j?t[0][o](u[l],r,d):t[s](u[l],r)}function On(t,e,r,n){Pn(t,e,r,!1,n),Dn.push(m.bind(Pn,0,t,e,r,!0,n))}function Mn(t,e){if(t){var n=m.rO(),i="animationstart mozAnimationStart webkitAnimationStart MSAnimationStart",a="childNodes",o=3333333,u=function(){t[br](o)[yr](nt?D.n?-3333333:D.i?0:o:o),e()};if(e){if(G)((F=t.addClass("observed").append(mi(tn)).contents()[0])[xr]=new n(u)).observe(F);else if(O>9||!P){t.prepend(mi(tn,mi({c:en,dir:"ltr"},mi(en,mi(rn))+mi(en,mi({c:rn,style:"width: 200%; height: 200%"})))));var l,c,f,h,d=t[0][a][0][a][0],v=T(d[a][1]),y=T(d[a][0]),b=T(y[0][a][0]),E=d[g.oW],w=d[g.oH],S=p.nativeScrollbarSize,A=function(){y[yr](o)[br](o),v[yr](o)[br](o)},_=function(){c=0,l&&(E=f,w=h,u())},k=function(t){return f=d[g.oW],h=d[g.oH],l=f!=E||h!=w,t&&l&&!c?(m.cAF()(c),c=m.rAF()(_)):t||_(),A(),t&&(m.prvD(t),m.stpP(t)),!1},L={},R={};li(R,or,[2*-(S.y+1),-2*S.x,-2*S.y,2*-(S.x+1)]),T(d).css(R),y.on(lr,k),v.on(lr,k),t.on(i,(function(){k(!1)})),L[nr]=o,L[ir]=o,b.css(L),A()}else{var x=Dt.attachEvent,C=O!==r;if(x)t.prepend(mi(tn)),Ri(t,dr+tn)[0].attachEvent("onresize",u);else{var I=Dt.createElement(s);I.setAttribute(g.ti,"-1"),I.setAttribute(g.c,tn),I.onload=function(){var t=this.contentDocument.defaultView;t.addEventListener("resize",u),t.document.documentElement.style.display="none"},I.type="text/html",C&&t.prepend(I),I.data="about:blank",C||t.prepend(I),t.on(i,u)}}if(t[0]===Ft){var M=function(){var t=gt.css("direction"),e={},r=0,n=!1;return t!==Zt&&("ltr"===t?(e[tr]=0,e[Ze]=sr,r=o):(e[tr]=sr,e[Ze]=0,r=D.n?-3333333:D.i?0:o),mt.children().eq(0).css(e),mt[yr](r)[br](o),Zt=t,n=!0),n};M(),On(t,lr,(function(t){return M()&&Xn(),m.prvD(t),m.stpP(t),!1}))}}else if(G){var F,N=(F=t.contents()[0])[xr];N&&(N.disconnect(),delete F[xr])}else Li(t.children(dr+tn).eq(0))}}function Fn(){H&&!Le&&(Se.observe(Ot,{attributes:!0,attributeOldValue:!0,attributeFilter:In}),Ae.observe(q?Pt:Bt,{attributes:!0,attributeOldValue:!0,subtree:!q,childList:!q,characterData:!q,attributeFilter:q?Cn:In}),Le=!0)}function Nn(){H&&Le&&(Se.disconnect(),Ae.disconnect(),Le=!1)}function Un(){if(!it){var t,e={w:Ft[g.sW],h:Ft[g.sH]};t=wi(e,ue),ue=e,t&&Xn({_hostSizeChanged:!0})}}function Bn(){Me&&ri(!0)}function jn(){Me&&!dt.hasClass(bn)&&ri(!1)}function Gn(){Oe&&(ri(!0),clearTimeout(Ce),Ce=setTimeout((function(){Oe&&!V&&ri(!1)}),100))}function Hn(t){return m.prvD(t),!1}function Kn(t){var e=T(t.target);Ti((function(t,r){e.is(r)&&Xn({_contentSizeChanged:!0})}))}function Vn(t){t||Vn(!0),Pn(gt,wr.split(pr)[0],Gn,!Oe||t,!0),Pn(gt,[Sr,Ar],[Bn,jn],!Me||t,!0),K||t||gt.one("mouseover",Bn)}function qn(){var t={};return z&&Tt&&(t.w=pi(Tt.css(er+nr)),t.h=pi(Tt.css(er+ir)),t.c=wi(t,we),t.f=!0),we=t,!!t.c}function zn(t,e){var r,n,i=a(e)==c?e.split(pr):[],o=function(t,e){var r,n,i=[],a=[];for(r=0;r<t.length;r++)i[t[r]]=!0;for(r=0;r<e.length;r++)i[e[r]]?delete i[e[r]]:i[e[r]]=!0;for(n in i)a.push(n);return a}(a(t)==c?t.split(pr):[],i),s=A(En,o);if(s>-1&&o.splice(s,1),o[g.l]>0)for(n=fi(!0,!0),r=0;r<o.length;r++)if(!o[r].match(n))return!0;return!1}function Wn(t){_(t=t||Sn,(function(t,e){if(m.inA(e,Sn)>-1){var r=pt.attr(e);S(r)==c?bt.attr(e,r):bt.removeAttr(e)}}))}function Yn(){if(!it){var t,e,r,n,i=!me,a=qe.w,o=qe.h,s={},u=qt||i;return s[er+nr]=or,s[er+ir]=or,s[nr]=sr,pt.css(s),t=Pt[g.oW],e=u?y.max(t,Pt[g.sW]-1):1,s[nr]=qt?sr:cr,s[er+nr]=cr,s[ir]=sr,pt.css(s),r=Pt[g.oH],n=y.max(r,Pt[g.sH]-1),s[nr]=e,s[ir]=n,St.css(s),s[er+nr]=a,s[er+ir]=o,pt.css(s),{_originalWidth:t,_originalHeight:r,_dynamicWidth:e,_dynamicHeight:n}}}function Xn(t){clearTimeout(lt),t=t||{},_n._hostSizeChanged|=t._hostSizeChanged,_n._contentSizeChanged|=t._contentSizeChanged,_n._force|=t._force;var e,n=m.now(),i=!!_n._hostSizeChanged,a=!!_n._contentSizeChanged,o=!!_n._force,s=t._changedOptions,u=kn>0&&K&&!V&&!o&&!s&&n-ut<kn&&!zt&&!qt;if(u&&(lt=setTimeout(Xn,kn)),!(V||u||it&&!s||K&&!o&&(e=gt.is(":hidden"))||"inline"===gt.css("display"))){ut=n,_n={},!M||x.x&&x.y?N=Si({},p.nativeScrollbarSize):(N.x=0,N.y=0),ze={x:3*(N.x+(x.x?0:3)),y:3*(N.y+(x.y?0:3))},s=s||{};var l=function(){return wi.apply(this,[].slice.call(arguments).concat([o]))},c={x:bt[yr](),y:bt[br]()},f=st.scrollbars,h=st.textarea,d=f.visibility,b=l(d,le),w=f.autoHide,S=l(w,ce),A=f.clickScrolling,_=l(A,fe),L=f.dragScrolling,R=l(L,he),I=st.className,O=l(I,ge),U=st.resize,B=l(U,de)&&!z,j=st.paddingAbsolute,G=l(j,Jt),H=st.clipAlways,W=l(H,te),Y=st.sizeAutoCapable&&!z,at=l(Y,oe),ot=st.nativeScrollbarsOverlaid.showNativeScrollbars,ct=l(ot,ie),ft=st.autoUpdate,ht=l(ft,ae),dt=st.overflowBehavior,_t=l(dt,re,o),kt=h.dynWidth,Lt=l(Te,kt),Rt=h.dynHeight,xt=l(Ee,Rt);if(De="n"===w,Pe="s"===w,Oe="m"===w,Me="l"===w,Ie=f.autoHideDelay,ve=ge,Ue="n"===U,Be="b"===U,je="h"===U,Ge="v"===U,pe=st.normalizeRTL,ot=ot&&x.x&&x.y,le=d,ce=w,fe=A,he=L,ge=I,de=U,Jt=j,te=H,oe=Y,ie=ot,ae=ft,re=Si({},dt),Te=kt,Ee=Rt,Kt=Kt||{x:!1,y:!1},O&&(_i(gt,ve+pr+En),Ai(gt,I!==r&&null!==I&&I.length>0?I:En)),ht&&(!0===ft||null===ft&&P?(Nn(),E.add(k)):(E.remove(k),Fn())),at)if(Y)if(wt?wt.show():(wt=T(mi(Zr)),yt.before(wt)),$)vt.show();else{vt=T(mi(Jr)),Mt=vt[0],wt.before(vt);var Ct={w:-1,h:-1};Mn(vt,(function(){var t={w:Mt[g.oW],h:Mt[g.oH]};wi(t,Ct)&&(K&&zt&&t.h>0||qt&&t.w>0||K&&!zt&&0===t.h||!qt&&0===t.w)&&Xn(),Ct=t})),$=!0,null!==F&&vt.css(ir,F+"(100% + 1px)")}else $&&vt.hide(),wt&&wt.hide();o&&(mt.find("*").trigger(lr),$&&vt.find("*").trigger(lr)),e=e===r?gt.is(":hidden"):e;var It,Dt=!!q&&"off"!==pt.attr("wrap"),Ft=l(Dt,me),Zt=gt.css("direction"),se=l(Zt,Qt),ue=gt.css("box-sizing"),Se=l(ue,Wt),Ae=ci(Xe);try{It=$?Mt[g.bCR]():null}catch(t){return}X="border-box"===ue;var _e=(nt="rtl"===Zt)?tr:Ze,ke=nt?Ze:tr,xe=!1,Ce=!(!$||"none"===gt.css(ar))&&0===y.round(It.right-It.left)&&(!!j||Ot[g.cW]-Q>0);if(Y&&!Ce){var Fe=Ot[g.oW],Ne=wt.css(nr);wt.css(nr,sr);var Ke=Ot[g.oW];wt.css(nr,Ne),(xe=Fe!==Ke)||(wt.css(nr,Fe+1),Ke=Ot[g.oW],wt.css(nr,Ne),xe=Fe!==Ke)}var Ve=(Ce||xe)&&Y&&!e,We=l(Ve,qt),ur=!Ve&&qt,fr=!(!$||!Y||e)&&0===y.round(It.bottom-It.top),hr=l(fr,zt),dr=!fr&&zt,gr=ci($e,"-"+nr,!(Ve&&X||!X),!(fr&&X||!X)),vr=ci(Ye),mr={},Er={},Tr=function(){return{w:Ot[g.cW],h:Ot[g.cH]}},wr=function(){return{w:Nt[g.oW]+y.max(0,Bt[g.cW]-Bt[g.sW]),h:Nt[g.oH]+y.max(0,Bt[g.cH]-Bt[g.sH])}},Sr=Q=Ae.l+Ae.r,Ar=Z=Ae.t+Ae.b;if(Sr*=j?1:0,Ar*=j?1:0,Ae.c=l(Ae,Yt),J=gr.l+gr.r,tt=gr.t+gr.b,gr.c=l(gr,Xt),et=vr.l+vr.r,rt=vr.t+vr.b,vr.c=l(vr,$t),me=Dt,Qt=Zt,Wt=ue,qt=Ve,zt=fr,Yt=Ae,Xt=gr,$t=vr,se&&$&&vt.css(ar,ke),Ae.c||se||G||We||hr||Se||at){var _r={},kr={},Lr=[Ae.t,Ae.r,Ae.b,Ae.l];li(Er,Ye,[-Ae.t,-Ae.r,-Ae.b,-Ae.l]),j?(li(_r,or,Lr),li(q?kr:mr,Xe)):(li(_r,or),li(q?kr:mr,Xe,Lr)),yt.css(_r),pt.css(kr)}qe=wr();var Rr=!!q&&Yn(),xr=q&&l(Rr,be),Cr=q&&Rr?{w:kt?Rr._dynamicWidth:Rr._originalWidth,h:Rt?Rr._dynamicHeight:Rr._originalHeight}:{};if(be=Rr,fr&&(hr||G||Se||Ae.c||gr.c)?mr[ir]=sr:(hr||G)&&(mr[ir]=cr),Ve&&(We||G||Se||Ae.c||gr.c||se)?(mr[nr]=sr,Er[rr+nr]=cr):(We||G)&&(mr[nr]=cr,mr[ar]=or,Er[rr+nr]=or),Ve?(Er[nr]=sr,mr[nr]=v._cssPropertyValue(nr,"max-content intrinsic")||sr,mr[ar]=ke):Er[nr]=or,Er[ir]=fr?Cr.h||Bt[g.cH]:or,Y&&wt.css(Er),Et.css(mr),mr={},Er={},i||a||xr||se||Se||G||We||Ve||hr||fr||ct||_t||W||B||b||S||R||_||Lt||xt||Ft){var Ir="overflow",Dr=Ir+"-x",Pr=Ir+"-y";if(!M){var Or={},Mr=Kt.y&&Vt.ys&&!ot?x.y?bt.css(_e):-N.y:0,Fr=Kt.x&&Vt.xs&&!ot?x.x?bt.css(Je):-N.x:0;li(Or,or),bt.css(Or)}var Nr=vi(),Vr={w:Cr.w||Nr[g.cW],h:Cr.h||Nr[g.cH]},qr={w:Nr[g.sW],h:Nr[g.sH]};M||(Or[Je]=dr?or:Fr,Or[_e]=ur?or:Mr,bt.css(Or)),qe=wr();var zr=Tr(),Wr={w:zr.w-et-J-(X?0:Q),h:zr.h-rt-tt-(X?0:Z)},Xr={w:y.max((Ve?Vr.w:qr.w)+Sr,Wr.w),h:y.max((fr?Vr.h:qr.h)+Ar,Wr.h)};if(Xr.c=l(Xr,ee),ee=Xr,Y){(Xr.c||fr||Ve)&&(Er[nr]=Xr.w,Er[ir]=Xr.h,q||(Vr={w:Nr[g.cW],h:Nr[g.cH]}));var $r={},tn=function(t){var e=oi(t),r=e._w_h,n=e._width_height,i=t?Ve:fr,a=t?J:tt,o=t?Q:Z,s=t?et:rt,u=qe[r]-a-s-(X?0:o);(!i||!i&&gr.c)&&(Er[n]=Wr[r]-1),!(i&&Vr[r]<u)||t&&q&&Dt||(q&&($r[n]=pi(St.css(n))-1),Er[n]-=1),Vr[r]>0&&(Er[n]=y.max(1,Er[n]))};tn(!0),tn(!1),q&&St.css($r),wt.css(Er)}Ve&&(mr[nr]=cr),!Ve||X||Le||(mr[ar]="none"),Et.css(mr),mr={};var en={w:Nr[g.sW],h:Nr[g.sH]};en.c=a=l(en,Gt),Gt=en,qe=wr(),i=l(zr=Tr(),jt),jt=zr;var rn=q&&(0===qe.w||0===qe.h),nn=ne,an={},on={},sn={},un={},ln={},cn={},fn={},hn=Nt[g.bCR](),mn=function(t){var e=oi(t),r=oi(!t)._x_y,n=e._x_y,i=e._w_h,a=e._width_height,o=lr+e._Left_Top+"Max",s=hn[a]?y.abs(hn[a]-qe[i]):0,u=nn&&nn[n]>0&&0===Ut[o];an[n]="v-s"===dt[n],on[n]="v-h"===dt[n],sn[n]="s"===dt[n],un[n]=y.max(0,y.round(100*(en[i]-qe[i]))/100),un[n]*=rn||u&&s>0&&s<1?0:1,ln[n]=un[n]>0,cn[n]=an[n]||on[n]?ln[r]&&!an[r]&&!on[r]:ln[n],cn[n+"s"]=!!cn[n]&&(sn[n]||an[n]),fn[n]=ln[n]&&cn[n+"s"]};if(mn(!0),mn(!1),un.c=l(un,ne),ne=un,ln.c=l(ln,Kt),Kt=ln,cn.c=l(cn,Vt),Vt=cn,x.x||x.y){var yn,bn={},Tn={},wn=o;(ln.x||ln.y)&&(Tn.w=x.y&&ln.y?en.w+C.y:or,Tn.h=x.x&&ln.x?en.h+C.x:or,wn=l(Tn,Ht),Ht=Tn),(ln.c||cn.c||en.c||se||We||hr||Ve||fr||ct)&&(mr[Ye+ke]=mr[$e+ke]=or,yn=function(t){var e=oi(t),r=oi(!t),n=e._x_y,i=t?Je:_e,a=t?fr:Ve;x[n]&&ln[n]&&cn[n+"s"]?(mr[Ye+i]=a?ot?or:C[n]:or,mr[$e+i]=t&&a||ot?or:C[n]+"px solid transparent"):(Tn[r._w_h]=mr[Ye+i]=mr[$e+i]=or,wn=!0)},M?ki(bt,Yr,!ot):(yn(!0),yn(!1))),ot&&(Tn.w=Tn.h=or,wn=!0),wn&&!M&&(bn[nr]=cn.y?Tn.w:or,bn[ir]=cn.x?Tn.h:or,Tt||(Tt=T(mi(Qr)),bt.prepend(Tt)),Tt.css(bn)),Et.css(mr)}var Sn,An={};if(_r={},(i||ln.c||cn.c||en.c||_t||Se||ct||se||W||hr)&&(An[ke]=or,(Sn=function(t){var e=oi(t),r=oi(!t),n=e._x_y,i=e._X_Y,a=t?Je:_e,o=function(){An[a]=or,He[r._w_h]=0};ln[n]&&cn[n+"s"]?(An[Ir+i]=lr,ot||M?o():(An[a]=-(x[n]?C[n]:N[n]),He[r._w_h]=x[n]?C[r._x_y]:0)):(An[Ir+i]=or,o())})(!0),Sn(!1),!M&&(qe.h<ze.x||qe.w<ze.y)&&(ln.x&&cn.x&&!x.x||ln.y&&cn.y&&!x.y)?(An[Xe+Qe]=ze.x,An[Ye+Qe]=-ze.x,An[Xe+ke]=ze.y,An[Ye+ke]=-ze.y):An[Xe+Qe]=An[Ye+Qe]=An[Xe+ke]=An[Ye+ke]=or,An[Xe+_e]=An[Ye+_e]=or,ln.x&&cn.x||ln.y&&cn.y||rn?q&&rn&&(_r[Dr]=_r[Pr]="hidden"):(!H||on.x||an.x||on.y||an.y)&&(q&&(_r[Dr]=_r[Pr]=or),An[Dr]=An[Pr]="visible"),yt.css(_r),bt.css(An),An={},(ln.c||Se||We||hr)&&(!x.x||!x.y))){var Ln=Bt[g.s];Ln.webkitTransform="scale(1)",Ln.display="run-in",Bt[g.oH],Ln.display=or,Ln.webkitTransform=or}if(mr={},se||We||hr)if(nt&&Ve){var Rn=Et.css(ar),xn=y.round(Et.css(ar,or).css(tr,or).position().left);Et.css(ar,Rn),xn!==y.round(Et.position().left)&&(mr[tr]=xn)}else mr[tr]=or;if(Et.css(mr),q&&a){var Cn=function(){var t=Pt.selectionStart;if(t!==r){var e,n,i=pt.val(),a=i[g.l],o=i.split("\n"),s=o[g.l],u=i.substr(0,t).split("\n"),l=0,c=0,f=u[g.l],h=u[u[g.l]-1][g.l];for(n=0;n<o[g.l];n++)(e=o[n][g.l])>c&&(l=n+1,c=e);return{_cursorRow:f,_cursorColumn:h,_rows:s,_columns:c,_widestRow:l,_cursorPosition:t,_cursorMax:a}}}();if(Cn){var In=ye===r||Cn._rows!==ye._rows,Dn=Cn._cursorRow,Pn=Cn._cursorColumn,On=Cn._widestRow,Un=Cn._rows,Bn=Cn._columns,jn=Cn._cursorPosition>=Cn._cursorMax&&Re,Gn={x:Dt||Pn!==Bn||Dn!==On?-1:ne.x,y:(Dt?jn||In&&nn&&c.y===nn.y:(jn||In)&&Dn===Un)?ne.y:-1};c.x=Gn.x>-1?nt&&pe&&D.i?0:Gn.x:c.x,c.y=Gn.y>-1?Gn.y:c.y}ye=Cn}nt&&D.i&&x.y&&ln.x&&pe&&(c.x+=He.w||0),Ve&&gt[yr](0),fr&&gt[br](0),bt[yr](c.x)[br](c.y);var Hn="v"===d,Kn="h"===d,zn="a"===d,Wn=function(t,e){e=e===r?t:e,ei(!0,t,fn.x),ei(!1,e,fn.y)};ki(gt,Gr,cn.x||cn.y),ki(gt,Hr,cn.x),ki(gt,Kr,cn.y),se&&!z&&ki(gt,Ur,nt),z&&Ai(gt,Br),B&&(ki(gt,Br,Ue),ki(At,dn,!Ue),ki(At,pn,Be),ki(At,gn,je),ki(At,vn,Ge)),(b||_t||cn.c||ln.c||ct)&&(ot?ct&&(_i(gt,jr),ot&&Wn(!1)):zn?Wn(fn.x,fn.y):Hn?Wn(!0):Kn&&Wn(!1)),(S||ct)&&(Vn(!Me&&!Oe),ri(De,!De)),(i||un.c||hr||We||B||Se||G||ct||se)&&(ni(!0),ii(!0),ni(!1),ii(!1)),_&&ai(!0,A),R&&ai(!1,L),ui("onDirectionChanged",{isRTL:nt,dir:Zt},se),ui("onHostSizeChanged",{width:jt.w,height:jt.h},i),ui("onContentSizeChanged",{width:Gt.w,height:Gt.h},a),ui("onOverflowChanged",{x:ln.x,y:ln.y,xScrollable:cn.xs,yScrollable:cn.ys,clipped:cn.x||cn.y},ln.c||cn.c),ui("onOverflowAmountChanged",{x:un.x,y:un.y},un.c)}z&&we&&(Kt.c||we.c)&&(we.f||qn(),x.y&&Kt.x&&Et.css(er+nr,we.w+C.y),x.x&&Kt.y&&Et.css(er+ir,we.h+C.x),we.c=!1),K&&s.updateOnLoad&&$n(),ui("onUpdated",{forced:o})}}function $n(){q||Ti((function(t,e){Et.find(e).each((function(t,e){m.inA(e,Rn)<0&&(Rn.push(e),T(e).off(Ln,Kn).on(Ln,Kn))}))}))}function Qn(t){var e=I._validate(t,I._template,!0,ot);return ot=Si({},ot,e._default),st=Si({},st,e._prepared),e._prepared}function Zn(t){var e="parent",n=Vr+pr+nn,i=q?pr+nn:or,a=st.textarea.inheritedAttrs,o={},s=function(){var e=t?pt:gt;_(o,(function(t,r){S(r)==c&&(t==g.c?e.addClass(r):e.attr(t,r))}))},u=[Dr,Pr,Or,Br,Ur,Mr,Fr,Nr,jr,Gr,Hr,Kr,En,Vr,nn,ge].join(pr),l={};gt=gt||(q?Y?pt[e]()[e]()[e]()[e]():T(mi(Or)):pt),Et=Et||yi($r+i),bt=bt||yi(Wr+i),yt=yt||yi(zr+i),mt=mt||yi("os-resize-observer-host"),St=St||(q?yi(qr):r),Y&&Ai(gt,Pr),t&&_i(gt,u),a=S(a)==c?a.split(pr):a,m.isA(a)&&q&&_(a,(function(e,r){S(r)==c&&(o[r]=t?gt.attr(r):pt.attr(r))})),t?(Y&&K?(mt.children().remove(),_([yt,bt,Et,St],(function(t,e){e&&_i(e.removeAttr(g.s),Tn)})),Ai(gt,q?Or:Dr)):(Li(mt),Et.contents().unwrap().unwrap().unwrap(),q&&(pt.unwrap(),Li(gt),Li(St),s())),q&&pt.removeAttr(g.s),z&&_i(ht,Ir)):(q&&(st.sizeAutoCapable||(l[nr]=pt.css(nr),l[ir]=pt.css(ir)),Y||pt.addClass(nn).wrap(gt),gt=pt[e]().css(l)),Y||(Ai(pt,q?n:Dr),gt.wrapInner(Et).wrapInner(bt).wrapInner(yt).prepend(mt),Et=Ri(gt,dr+$r),bt=Ri(gt,dr+Wr),yt=Ri(gt,dr+zr),q&&(Et.prepend(St),s())),M&&Ai(bt,Yr),x.x&&x.y&&Ai(bt,Xr),z&&Ai(ht,Ir),Ft=mt[0],Ot=gt[0],Nt=yt[0],Ut=bt[0],Bt=Et[0],Wn())}function Jn(t){var e,r,n=function(e){var r=yi(an+pr+(e?mn:yn),!0),n=yi(on,r),i=yi(un,r);return Y||t||(r.append(n),n.append(i)),{_scrollbar:r,_track:n,_handle:i}};function i(t){var e=oi(t),r=e._scrollbar,i=e._track,a=e._handle;Y&&K?_([r,i,a],(function(t,e){_i(e.removeAttr(g.s),Tn)})):Li(r||n(t)._scrollbar)}t?(i(!0),i()):(e=n(!0),r=n(),_t=e._scrollbar,kt=e._track,Lt=e._handle,Rt=r._scrollbar,xt=r._track,Ct=r._handle,Y||(yt.after(Rt),yt.after(_t)))}function ti(t){var e,n,i,a,o=oi(t),s=o._info,u=It.top!==It,l=o._x_y,c=o._X_Y,f=lr+o._Left_Top,h="active",d="snapHandle",p="click",v=1,b=[16,17];function E(t){return O&&u?t["screen"+c]:m.page(t)[l]}function T(t){return st.scrollbars[t]}function w(){v=.5}function S(){v=1}function _(t){m.stpP(t)}function L(t){A(t.keyCode,b)>-1&&w()}function R(t){A(t.keyCode,b)>-1&&S()}function x(t){var e=(t.originalEvent||t).touches!==r;return!(it||V||gi()||!he||e&&!T("touchSupport"))&&(1===m.mBtn(t)||e)}function C(e){if(x(e)){var r=s._trackLength,o=s._handleLength,u=s._maxScroll*((E(e)-i)*a/(r-o));u=isFinite(u)?u:0,nt&&t&&!D.i&&(u*=-1),bt[f](y.round(n+u)),Ne&&ii(t,n+u),j||m.prvD(e)}else I(e)}function I(s){if(s=s||s.originalEvent,Pn(ft,[wr,Tr,_r,kr,Lr],[C,I,L,R,Hn],!0),m.rAF()((function(){Pn(ft,p,_,!0,{_capture:!0})})),Ne&&ii(t,!0),Ne=!1,_i(dt,bn),_i(o._handle,h),_i(o._track,h),_i(o._scrollbar,h),n=r,i=r,a=1,S(),e!==r&&(k.scrollStop(),clearTimeout(e),e=r),s){var u=Ot[g.bCR]();s.clientX>=u.left&&s.clientX<=u.right&&s.clientY>=u.top&&s.clientY<=u.bottom||jn(),(Pe||Oe)&&ri(!1)}}function P(e){n=bt[f](),n=isNaN(n)?0:n,(nt&&t&&!D.n||!nt)&&(n=n<0?0:n),a=hi()[l],i=E(e),Ne=!T(d),Ai(dt,bn),Ai(o._handle,h),Ai(o._scrollbar,h),Pn(ft,[wr,Tr,Lr],[C,I,Hn]),m.rAF()((function(){Pn(ft,p,_,!1,{_capture:!0})})),!O&&W||m.prvD(e),m.stpP(e)}On(o._handle,Er,(function(t){x(t)&&P(t)})),On(o._track,[Er,Sr,Ar],[function(n){if(x(n)){var u,c=o._info._handleLength/Math.round(y.min(1,qe[o._w_h]/Gt[o._w_h])*o._info._trackLength),p=y.round(qe[o._w_h]*c),g=270*c,b=400*c,E=o._track.offset()[o._left_top],S=n.ctrlKey,A=n.shiftKey,_=A&&S,C=!0,O=function(e){Ne&&ii(t,e)},M=function(){O(),P(n)};S&&w(),a=hi()[l],i=m.page(n)[l],Ne=!T(d),Ai(dt,bn),Ai(o._track,h),Ai(o._scrollbar,h),Pn(ft,[Tr,_r,kr,Lr],[I,L,R,Hn]),function n(){if(!V){var o=(i-E)*a,c=s._handleOffset,h=s._trackLength,d=s._handleLength,m=s._maxScroll,T=s._currentScroll,w=g*v,S=C?y.max(b,w):w,L=m*((o-d/2)/(h-d)),R=nt&&t&&(!D.i&&!D.n||pe),x=R?c<o:c>o,I={},P={easing:"linear",step:function(e){Ne&&(bt[f](e),ii(t,e))}};L=isFinite(L)?L:0,L=nt&&t&&!D.i?m-L:L,A?(bt[f](L),_?(L=bt[f](),bt[f](T),L=R&&D.i?m-L:L,L=R&&D.n?-L:L,I[l]=L,k.scroll(I,Si(P,{duration:130,complete:M}))):M()):(u=C?x:u,(R?u?c+d>=o:c<=o:u?c<=o:c+d>=o)?(clearTimeout(e),k.scrollStop(),e=r,O(!0)):(e=setTimeout(n,S),I[l]=(u?"-=":"+=")+p,k.scroll(I,Si(P,{duration:w}))),C=!1)}}(),m.prvD(n),m.stpP(n)}},function(t){Fe=!0,(Pe||Oe)&&ri(!0)},function(t){Fe=!1,(Pe||Oe)&&ri(!1)}]),On(o._scrollbar,Er,(function(t){m.stpP(t)})),U&&On(o._scrollbar,Rr,(function(e){e.target===o._scrollbar[0]&&(ni(t),ii(t))}))}function ei(t,e,r){var n=t?_t:Rt;ki(gt,t?Mr:Fr,!e),ki(n,cn,!r)}function ri(t,e){if(clearTimeout(xe),t)_i(_t,fn),_i(Rt,fn);else{var r,n="active",i=function(){Fe||V||(!(r=Lt.hasClass(n)||Ct.hasClass(n))&&(Pe||Oe||Me)&&Ai(_t,fn),!r&&(Pe||Oe||Me)&&Ai(Rt,fn))};Ie>0&&!0!==e?xe=setTimeout(i,Ie):i()}}function ni(t){var e={},r=oi(t),n=r._info,i=1e6,a=y.min(1,qe[r._w_h]/Gt[r._w_h]);e[r._width_height]=y.floor(100*a*i)/i+"%",gi()||r._handle.css(e),n._handleLength=r._handle[0]["offset"+r._Width_Height],n._handleLengthRatio=a}function ii(t,e){var n,i,a=S(e)==f,o=nt&&t,s=oi(t),u=s._info,l="translate(",c=v._cssProperty("transform"),h=v._cssProperty("transition"),d=t?bt[yr]():bt[br](),p=e===r||a?d:e,m=u._handleLength,b=s._track[0]["offset"+s._Width_Height],E=b-m,T={},w=(Ut[lr+s._Width_Height]-Ut["client"+s._Width_Height])*(D.n&&o?-1:1),A=function(t){return isNaN(t/w)?0:y.max(0,y.min(1,t/w))},_=function(t){var e=E*t;return e=isNaN(e)?0:e,e=o&&!D.i?b-m-e:e,y.max(0,e)},k=A(d),L=_(A(p)),R=_(k);u._maxScroll=w,u._currentScroll=d,u._currentScrollRatio=k,B?(n=o?-(b-m-L):L,i=t?l+n+"px, 0)":l+"0, "+n+"px)",T[c]=i,U&&(T[h]=a&&y.abs(L-u._handleOffset)>1?function(t){var e=v._cssProperty("transition"),r=t.css(e);if(r)return r;for(var n,i,a,o="\\s*(([^,(]+(\\(.+?\\))?)+)[\\s,]*",s=new RegExp(o),u=new RegExp("^("+o+")+$"),l="property duration timing-function delay".split(" "),c=[],f=0,h=function(t){if(n=[],!t.match(u))return t;for(;t.match(s);)n.push(RegExp.$1),t=t.replace(s,or);return n};f<l[g.l];f++)for(i=h(t.css(e+"-"+l[f])),a=0;a<i[g.l];a++)c[a]=(c[a]?c[a]+pr:or)+i[a];return c.join(", ")}(s._handle)+", "+(c+pr+250)+"ms":or)):T[s._left_top]=L,gi()||(s._handle.css(T),B&&U&&a&&s._handle.one(Rr,(function(){V||s._handle.css(h,or)}))),u._handleOffset=L,u._snappedHandleOffset=R,u._trackLength=b}function ai(t,e){var r=e?"removeClass":"addClass",n=t?xt:Ct,i=t?sn:ln;(t?kt:Lt)[r](i),n[r](i)}function oi(t){return{_width_height:t?nr:ir,_Width_Height:t?"Width":"Height",_left_top:t?tr:Qe,_Left_Top:t?"Left":"Top",_x_y:t?fr:hr,_X_Y:t?"X":"Y",_w_h:t?"w":"h",_l_t:t?"l":"t",_track:t?kt:xt,_handle:t?Lt:Ct,_scrollbar:t?_t:Rt,_info:t?Ke:Ve}}function si(t){At=At||yi(hn,!0),t?Y&&K?_i(At.removeAttr(g.s),Tn):Li(At):Y||gt.append(At)}function ui(t,e,r){if(!1!==r)if(K){var n,i=st.callbacks[t],a=t;"on"===a.substr(0,2)&&(a=a.substr(2,1).toLowerCase()+a.substr(3)),S(i)==u&&i.call(k,e),_(An,(function(){S((n=this).on)==u&&n.on(a,e)}))}else V||wn.push({n:t,a:e})}function li(t,e,r){r=r||[or,or,or,or],t[(e=e||or)+Qe]=r[0],t[e+Ze]=r[1],t[e+Je]=r[2],t[e+tr]=r[3]}function ci(t,e,r,n){return e=e||or,t=t||or,{t:n?0:pi(gt.css(t+Qe+e)),r:r?0:pi(gt.css(t+Ze+e)),b:n?0:pi(gt.css(t+Je+e)),l:r?0:pi(gt.css(t+tr+e))}}function fi(t,e){var r,n,i,o=function(t,e){if(i="",e&&a(t)==c)for(n=t.split(pr),r=0;r<n[g.l];r++)i+="|"+n[r]+"$";return i};return new RegExp("(^"+Dr+"([-_].+|)$)"+o(ge,t)+o(ve,e),"g")}function hi(){var t=Nt[g.bCR]();return{x:B&&1/(y.round(t.width)/Nt[g.oW])||1,y:B&&1/(y.round(t.height)/Nt[g.oH])||1}}function di(e){var r="ownerDocument",n="HTMLElement",i=e&&e[r]&&e[r].parentWindow||t;return a(i[n])==s?e instanceof i[n]:e&&a(e)==s&&null!==e&&1===e.nodeType&&a(e.nodeName)==c}function pi(t,e){var r=e?parseFloat(t):parseInt(t,10);return isNaN(r)?0:r}function gi(){return ie&&x.x&&x.y}function vi(){return q?St[0]:Bt}function mi(t,e){return"<div "+(t?S(t)==c?'class="'+t+'"':function(){var e,r=or;if(T.isPlainObject(t))for(e in t)r+=("c"===e?"class":e)+'="'+t[e]+'" ';return r}():or)+">"+(e||or)+"</div>"}function yi(t,e){var r=S(e)==f,n=r?gt:e||gt;return Y&&!n[g.l]?null:Y?n[r?"children":"find"](dr+t.replace(/\s/g,dr)).eq(0):T(mi(t))}function bi(t,e){for(var r,n=e.split(dr),i=0;i<n.length;i++){if(!t[g.hOP](n[i]))return;r=t[n[i]],i<n.length&&S(r)==s&&(t=r)}return r}function Ei(t,e,r){for(var n=e.split(dr),i=n.length,a=0,o={},s=o;a<i;a++)o=o[n[a]]=a+1<i?{}:r;T.extend(t,s,!0)}function Ti(t){var e=st.updateOnLoad;e=S(e)==c?e.split(pr):e,m.isA(e)&&!V&&_(e,t)}function wi(t,e,r){if(r)return r;if(S(t)!=s||S(e)!=s)return t!==e;for(var n in t)if("c"!==n){if(!t[g.hOP](n)||!e[g.hOP](n))return!0;if(wi(t[n],e[n]))return!0}return!1}function Si(){return T.extend.apply(this,[!0].concat([].slice.call(arguments)))}function Ai(t,e){return L.addClass.call(t,e)}function _i(t,e){return L.removeClass.call(t,e)}function ki(t,e,r){return r?Ai(t,e):_i(t,e)}function Li(t){return L.remove.call(t)}function Ri(t,e){return L.find.call(t,e).eq(0)}}return n=t.OverlayScrollbars=function(t,e,a){if(0===arguments[g.l])return this;var s,l,c=[],f=T.isPlainObject(e);return t?(t=t[g.l]!=r?t:[t[0]||t],D(),t[g.l]>0&&(f?T.each(t,(function(t,n){(s=n)!==r&&c.push(M(s,e,a,i,o))})):T.each(t,(function(t,i){s=w(i),("!"===e&&n.valid(s)||m.type(e)==u&&e(i,s)||e===r)&&c.push(s)})),l=1===c[g.l]?c[0]:c),l):f||!e?l:c},n.globals=function(){D();var t=T.extend(!0,{},i);return delete t.msie,t},n.defaultOptions=function(t){D();var e=i.defaultOptions;if(t===r)return T.extend(!0,{},e);i.defaultOptions=T.extend(!0,{},e,I._validate(t,I._template,!0,e)._default)},n.valid=function(t){return t instanceof n&&!t.getState().destroyed},n.extension=function(t,e,r){var n=m.type(t)==c,i=arguments[g.l],a=0;if(i<1||!n)return T.extend(!0,{length:C[g.l]},C);if(n)if(m.type(e)==u)C.push({name:t,extensionFactory:e,defaultOptions:r});else for(;a<C[g.l];a++)if(C[a].name===t){if(!(i>1))return T.extend(!0,{},C[a]);C.splice(a,1)}},n}();return b&&b.fn&&(b.fn.overlayScrollbars=function(t,e){var r=this;return b.isPlainObject(t)?(b.each(r,(function(){S(this,t,e)})),r):S(r,t)}),S}(i,i.document,void 0)}.call(e,r,e,t),void 0===n||(t.exports=n)},3845:function(t,e,r){var n,i,a,o=["premium","referrerPolicy"];function s(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===y(e)?e:String(e)}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}"object"==("undefined"==typeof navigator?"undefined":y(navigator))&&(a=function(){"use strict";function t(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={addCSS:!0,thumbWidth:15,watch:!0},f=function(t){return null!=t?t.constructor:null},p=function(t,e){return!!(t&&e&&t instanceof e)},g=function(t){return null==t},m=function(t){return f(t)===Object},b=function(t){return f(t)===String},E=function(t){return Array.isArray(t)},T=function(t){return p(t,NodeList)},w_string=b,w_array=E,w_nodeList=T,w_element=function(t){return p(t,Element)},w_event=function(t){return p(t,Event)},w_empty=function(t){return g(t)||(b(t)||E(t)||T(t))&&!t.length||m(t)&&!Object.keys(t).length},S=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),w_element(e)?this.element=e:w_string(e)&&(this.element=document.querySelector(e)),w_element(this.element)&&w_empty(this.element.rangeTouch)&&(this.config=a({},l,{},r),this.init())}return function(t,r,n){r&&e(t.prototype,r),n&&e(t,n)}(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var e=this,r=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(t){e.element[r](t,(function(t){return e.set(t)}),!1)}))}},{key:"get",value:function(e){if(!t.enabled||!w_event(e))return null;var r,n=e.target,i=e.changedTouches[0],a=parseFloat(n.getAttribute("min"))||0,o=parseFloat(n.getAttribute("max"))||100,s=parseFloat(n.getAttribute("step"))||1,u=n.getBoundingClientRect(),l=100/u.width*(this.config.thumbWidth/2)/100;return 0>(r=100/u.width*(i.clientX-u.left))?r=0:100<r&&(r=100),50>r?r-=(100-2*r)*l:50<r&&(r+=2*(r-50)*l),a+function(t,e){if(1>e){var r=function(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(r))}return Math.round(t/e)*e}(r/100*(o-a),s)}},{key:"set",value:function(e){t.enabled&&w_event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(t,e){if(t&&e){var r=new Event(e,{bubbles:!0});t.dispatchEvent(r)}}(e.target,"touchend"===e.type?"change":"input"))}}],[{key:"setup",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(w_empty(e)||w_string(e)?n=Array.from(document.querySelectorAll(w_string(e)?e:'input[type="range"]')):w_element(e)?n=[e]:w_nodeList(e)?n=Array.from(e):w_array(e)&&(n=e.filter(w_element)),w_empty(n))return null;var i=a({},l,{},r);if(w_string(e)&&i.watch){var o=new MutationObserver((function(r){Array.from(r).forEach((function(r){Array.from(r.addedNodes).forEach((function(r){w_element(r)&&function(t,e){return function(){return Array.from(document.querySelectorAll(e)).includes(this)}.call(t,e)}(r,e)&&new t(r,i)}))}))}));o.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(e){return new t(e,r)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}(),A=function(t){return null!=t?t.constructor:null},_=function(t,e){return Boolean(t&&e&&t instanceof e)},k=function(t){return null==t},L=function(t){return A(t)===Object},R=function(t){return A(t)===String},x=function(t){return"function"==typeof t},C=function(t){return Array.isArray(t)},I=function(t){return _(t,NodeList)},D=function(t){return k(t)||(R(t)||C(t)||I(t))&&!t.length||L(t)&&!Object.keys(t).length},P=k,O=L,M=function(t){return A(t)===Number&&!Number.isNaN(t)},F=R,N=function(t){return A(t)===Boolean},U=x,B=C,j=I,G=function(t){return null!==t&&"object"==y(t)&&1===t.nodeType&&"object"==y(t.style)&&"object"==y(t.ownerDocument)},H=function(t){return _(t,Event)},K=function(t){return _(t,KeyboardEvent)},V=function(t){return _(t,TextTrack)||!k(t)&&R(t.kind)},q=function(t){if(_(t,window.URL))return!0;if(!R(t))return!1;var e=t;t.startsWith("http://")&&t.startsWith("https://")||(e="http://".concat(t));try{return!D(new URL(e).hostname)}catch(t){return!1}},z=D,W=function(){var t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},r=Object.keys(e).find((function(e){return void 0!==t.style[e]}));return!!F(r)&&e[r]}();function Y(t,e){setTimeout((function(){try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch(t){}}),e)}var X={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function $(t,e){return e.split(".").reduce((function(t,e){return t&&t[e]}),t)}function Q(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!r.length)return t;var i=r.shift();return O(i)?(Object.keys(i).forEach((function(e){O(i[e])?(Object.keys(t).includes(e)||Object.assign(t,v({},e,{})),Q(t[e],i[e])):Object.assign(t,v({},e,i[e]))})),Q.apply(void 0,[t].concat(r))):t}function Z(t,e){var r=t.length?t:[t];Array.from(r).reverse().forEach((function(t,r){var n=r>0?e.cloneNode(!0):e,i=t.parentNode,a=t.nextSibling;n.appendChild(t),a?i.insertBefore(n,a):i.appendChild(n)}))}function J(t,e){G(t)&&!z(e)&&Object.entries(e).filter((function(t){var e=d(t,2)[1];return!P(e)})).forEach((function(e){var r=d(e,2),n=r[0],i=r[1];return t.setAttribute(n,i)}))}function tt(t,e,r){var n=document.createElement(t);return O(e)&&J(n,e),F(r)&&(n.innerText=r),n}function et(t,e,r,n){G(e)&&e.appendChild(tt(t,r,n))}function rt(t){j(t)||B(t)?Array.from(t).forEach(rt):G(t)&&G(t.parentNode)&&t.parentNode.removeChild(t)}function nt(t){if(G(t))for(var e=t.childNodes.length;e>0;)t.removeChild(t.lastChild),e-=1}function it(t,e){return G(e)&&G(e.parentNode)&&G(t)?(e.parentNode.replaceChild(t,e),t):null}function at(t,e){if(!F(t)||z(t))return{};var r={},n=Q({},e);return t.split(",").forEach((function(t){var e=t.trim(),i=e.replace(".",""),a=e.replace(/[[\]]/g,"").split("="),o=d(a,1)[0],s=a.length>1?a[1].replace(/["']/g,""):"";switch(e.charAt(0)){case".":F(n.class)?r.class="".concat(n.class," ").concat(i):r.class=i;break;case"#":r.id=e.replace("#","");break;case"[":r[o]=s}})),Q(n,r)}function ot(t,e){if(G(t)){var r=e;N(r)||(r=!t.hidden),t.hidden=r}}function st(t,e,r){if(j(t))return Array.from(t).map((function(t){return st(t,e,r)}));if(G(t)){var n="toggle";return void 0!==r&&(n=r?"add":"remove"),t.classList[n](e),t.classList.contains(e)}return!1}function ut(t,e){return G(t)&&t.classList.contains(e)}function lt(t,e){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function ct(t){return this.elements.container.querySelectorAll(t)}function ft(t){return this.elements.container.querySelector(t)}function ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];G(t)&&t.focus({preventScroll:!0,focusVisible:e})}var dt={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},pt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(t,e){var r=pt[t]||"html5"!==e;return{api:r,ui:r&&pt.rangeInput}},pip:!(X.isIPhone||!U(tt("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||tt("video").disablePictureInPicture)),airplay:U(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(t){if(z(t))return!1;var e=d(t.split("/"),1)[0],r=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(dt).includes(r)&&(r+='; codecs="'.concat(dt[t],'"'));try{return Boolean(r&&this.media.canPlayType(r).replace(/no/,""))}catch(t){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:function(){var t=document.createElement("input");return t.type="range","range"===t.type}(),touch:"ontouchstart"in document.documentElement,transitions:!1!==W,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},gt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t=!0,null}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function vt(t,e,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t&&"addEventListener"in t&&!z(e)&&U(r)){var s=e.split(" "),u=o;gt&&(u={passive:a,capture:o}),s.forEach((function(e){n&&n.eventListeners&&i&&n.eventListeners.push({element:t,type:e,callback:r,options:u}),t[i?"addEventListener":"removeEventListener"](e,r,u)}))}}function mt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vt.call(this,t,e,r,!0,n,i)}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vt.call(this,t,e,r,!1,n,i)}function bt(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function o(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];yt(t,r,o,i,a),n.apply(e,u)};vt.call(this,t,r,o,!0,i,a)}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(G(t)&&!z(e)){var i=new CustomEvent(e,{bubbles:r,detail:h(h({},n),{},{plyr:this})});t.dispatchEvent(i)}}function Tt(){this&&this.eventListeners&&(this.eventListeners.forEach((function(t){var e=t.element,r=t.type,n=t.callback,i=t.options;e.removeEventListener(r,n,i)})),this.eventListeners=[])}function wt(){var t=this;return new Promise((function(e){return t.ready?setTimeout(e,0):mt.call(t,t.elements.container,"ready",e)})).then((function(){}))}function St(t){(function(t){return _(t,Promise)&&x(t.then)})(t)&&t.then(null,(function(){}))}function At(t){return B(t)?t.filter((function(e,r){return t.indexOf(e)===r})):t}function _t(t,e){return B(t)&&t.length?t.reduce((function(t,r){return Math.abs(r-e)<Math.abs(t-e)?r:t})):null}function kt(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}var Lt=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((function(t,e){var r=d(e,2),n=r[0],i=r[1];return h(h({},t),{},v({},n/i,[n,i]))}),{});function Rt(t){return!!(B(t)||F(t)&&t.includes(":"))&&(B(t)?t:t.split(":")).map(Number).every(M)}function xt(t){if(!B(t)||!t.every(M))return null;var e=d(t,2),r=e[0],n=e[1],i=function t(e,r){return 0===r?e:t(r,e%r)}(r,n);return[r/i,n/i]}function Ct(t){var e=function(t){return Rt(t)?t.split(":").map(Number):null},r=e(t);if(null===r&&(r=e(this.config.ratio)),null===r&&!z(this.embed)&&B(this.embed.ratio)&&(r=this.embed.ratio),null===r&&this.isHTML5){var n=this.media;r=[n.videoWidth,n.videoHeight]}return xt(r)}function It(t){if(!this.isVideo)return{};var e=this.elements.wrapper,r=Ct.call(this,t);if(!B(r))return{};var n=d(xt(r),2),i=n[0],a=n[1],o=100/i*a;if(kt("aspect-ratio: ".concat(i,"/").concat(a))?e.style.aspectRatio="".concat(i,"/").concat(a):e.style.paddingBottom="".concat(o,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var s=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),u=(s-o)/(s/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(u,"%)")}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:o,ratio:r}}function Dt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,n=t/e,i=_t(Object.keys(Lt),n);return Math.abs(i-n)<=r?Lt[i]:[t,e]}var Pt={getSources:function(){var t=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(e){var r=e.getAttribute("type");return!!z(r)||pt.mime.call(t,r)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:Pt.getSources.call(this).map((function(t){return Number(t.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var t=this;t.options.speed=t.config.speed.options,z(this.config.ratio)||It.call(t),Object.defineProperty(t.media,"quality",{get:function(){var e=Pt.getSources.call(t).find((function(e){return e.getAttribute("src")===t.source}));return e&&Number(e.getAttribute("size"))},set:function(e){if(t.quality!==e){if(t.config.quality.forced&&U(t.config.quality.onChange))t.config.quality.onChange(e);else{var r=Pt.getSources.call(t).find((function(t){return Number(t.getAttribute("size"))===e}));if(!r)return;var n=t.media,i=n.currentTime,a=n.paused,o=n.preload,s=n.readyState,u=n.playbackRate;t.media.src=r.getAttribute("src"),("none"!==o||s)&&(t.once("loadedmetadata",(function(){t.speed=u,t.currentTime=i,a||St(t.play())})),t.media.load())}Et.call(t,t.media,"qualitychange",!1,{quality:e})}}})}},cancelRequests:function(){this.isHTML5&&(rt(Pt.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ot(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return z(t)?t:t.toString().replace(/{(\d+)}/g,(function(t,e){return r[e].toString()}))}var Mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),r.toString())},Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.toString().replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}))};function Nt(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}var Ut={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(z(t)||z(e))return"";var r=$(e.i18n,t);if(z(r))return Object.keys(Ut).includes(t)?Ut[t]:"";var n={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(n).forEach((function(t){var e=d(t,2),n=e[0],i=e[1];r=Mt(r,n,i)})),r},jt=function(){function e(r){var n=this;u(this,e),t(this,"get",(function(t){if(!e.supported||!n.enabled)return null;var r=window.localStorage.getItem(n.key);if(z(r))return null;var i=JSON.parse(r);return F(t)&&t.length?i[t]:i})),t(this,"set",(function(t){if(e.supported&&n.enabled&&O(t)){var r=n.get();z(r)&&(r={}),Q(r,t);try{window.localStorage.setItem(n.key,JSON.stringify(r))}catch(t){}}})),this.enabled=r.config.storage.enabled,this.key=r.config.storage.key}return c(e,null,[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}}]),e}();function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(r,n){try{var i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",(function(){if("text"===e)try{r(JSON.parse(i.responseText))}catch(t){r(i.responseText)}else r(i.response)})),i.addEventListener("error",(function(){throw new Error(i.status)})),i.open("GET",t,!0),i.responseType=e,i.send()}catch(t){n(t)}}))}function Ht(t,e){if(F(t)){var r="cache",n=F(e),i=function(){return null!==document.getElementById(e)},a=function(t,e){t.innerHTML=e,n&&i()||document.body.insertAdjacentElement("afterbegin",t)};if(!n||!i()){var o=jt.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),n&&s.setAttribute("id",e),o){var u=window.localStorage.getItem("".concat(r,"-").concat(e));if(null!==u){var l=JSON.parse(u);a(s,l.content)}}Gt(t).then((function(t){if(!z(t)){if(o)try{window.localStorage.setItem("".concat(r,"-").concat(e),JSON.stringify({content:t}))}catch(t){}a(s,t)}})).catch((function(){}))}}}var Kt=function(t){return Math.trunc(t/60/60%60,10)},Vt=function(t){return Math.trunc(t/60%60,10)},qt=function(t){return Math.trunc(t%60,10)};function zt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!M(t))return zt(void 0,e,r);var n=function(t){return"0".concat(t).slice(-2)},i=Kt(t),a=Vt(t),o=qt(t);return i=e||i>0?"".concat(i,":"):"","".concat(r&&t>0?"-":"").concat(i).concat(n(a),":").concat(n(o))}var Wt={getIconUrl:function(){var t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,r=t.host!==e||X.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:r}},findElements:function(){try{return this.elements.controls=ft.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:ct.call(this,this.config.selectors.buttons.play),pause:ft.call(this,this.config.selectors.buttons.pause),restart:ft.call(this,this.config.selectors.buttons.restart),rewind:ft.call(this,this.config.selectors.buttons.rewind),fastForward:ft.call(this,this.config.selectors.buttons.fastForward),mute:ft.call(this,this.config.selectors.buttons.mute),pip:ft.call(this,this.config.selectors.buttons.pip),airplay:ft.call(this,this.config.selectors.buttons.airplay),settings:ft.call(this,this.config.selectors.buttons.settings),captions:ft.call(this,this.config.selectors.buttons.captions),fullscreen:ft.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ft.call(this,this.config.selectors.progress),this.elements.inputs={seek:ft.call(this,this.config.selectors.inputs.seek),volume:ft.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ft.call(this,this.config.selectors.display.buffer),currentTime:ft.call(this,this.config.selectors.display.currentTime),duration:ft.call(this,this.config.selectors.display.duration)},G(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon:function(t,e){var r="http://www.w3.org/2000/svg",n=Wt.getIconUrl.call(this),i="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),a=document.createElementNS(r,"svg");J(a,Q(e,{"aria-hidden":"true",focusable:"false"}));var o=document.createElementNS(r,"use"),s="".concat(i,"-").concat(t);return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",s),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),a.appendChild(o),a},createLabel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Bt(t,this.config);return tt("span",h(h({},e),{},{class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),r)},createBadge:function(t){if(z(t))return null;var e=tt("span",{class:this.config.classNames.menu.value});return e.appendChild(tt("span",{class:this.config.classNames.menu.badge},t)),e},createButton:function(t,e){var r=this,n=Q({},e),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.toString();return e=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return t=Mt(t,"-"," "),t=Mt(t,"_"," "),t=Ft(t),Mt(t," ","")}(e),e.charAt(0).toLowerCase()+e.slice(1)}(t),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(t){Object.keys(n).includes(t)&&(a[t]=n[t],delete n[t])})),"button"!==a.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((function(t){return t===r.config.classNames.control}))||Q(n,{class:"".concat(n.class," ").concat(this.config.classNames.control)}):n.class=this.config.classNames.control,t){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),i="play",a.label="play",a.icon="play";break;default:z(a.label)&&(a.label=i),z(a.icon)&&(a.icon=t)}var o=tt(a.element);return a.toggle?(o.appendChild(Wt.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),o.appendChild(Wt.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),o.appendChild(Wt.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),o.appendChild(Wt.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(o.appendChild(Wt.createIcon.call(this,a.icon)),o.appendChild(Wt.createLabel.call(this,a.label))),Q(n,at(this.config.selectors.buttons[i],n)),J(o,n),"play"===i?(B(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(o)):this.elements.buttons[i]=o,o},createRange:function(t,e){var r=tt("input",Q(at(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Bt(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=r,Wt.updateRangeFill.call(this,r),S.setup(r),r},createProgress:function(t,e){var r=tt("progress",Q(at(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if("volume"!==t){r.appendChild(tt("span",null,"0"));var n={played:"played",buffer:"buffered"}[t],i=n?Bt(n,this.config):"";r.innerText="% ".concat(i.toLowerCase())}return this.elements.display[t]=r,r},createTime:function(t,e){var r=at(this.config.selectors.display[t],e),n=tt("div",Q(r,{class:"".concat(r.class?r.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Bt(t,this.config),role:"timer"}),"00:00");return this.elements.display[t]=n,n},bindMenuItemShortcuts:function(t,e){var r=this;mt.call(this,t,"keydown keyup",(function(n){if([" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)&&(n.preventDefault(),n.stopPropagation(),"keydown"!==n.type)){var i,a=lt(t,'[role="menuitemradio"]');!a&&[" ","ArrowRight"].includes(n.key)?Wt.showMenuPanel.call(r,e,!0):" "!==n.key&&("ArrowDown"===n.key||a&&"ArrowRight"===n.key?(i=t.nextElementSibling,G(i)||(i=t.parentNode.firstElementChild)):(i=t.previousElementSibling,G(i)||(i=t.parentNode.lastElementChild)),ht.call(r,i,!0))}}),!1),mt.call(this,t,"keyup",(function(t){"Return"===t.key&&Wt.focusFirstMenuItem.call(r,null,!0)}))},createMenuItem:function(t){var e=this,r=t.value,n=t.list,i=t.type,a=t.title,o=t.badge,s=void 0===o?null:o,u=t.checked,l=void 0!==u&&u,c=at(this.config.selectors.inputs[i]),f=tt("button",Q(c,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(c.class?c.class:"").trim(),"aria-checked":l,value:r})),h=tt("span");h.innerHTML=a,G(s)&&h.appendChild(s),f.appendChild(h),Object.defineProperty(f,"checked",{enumerable:!0,get:function(){return"true"===f.getAttribute("aria-checked")},set:function(t){t&&Array.from(f.parentNode.children).filter((function(t){return lt(t,'[role="menuitemradio"]')})).forEach((function(t){return t.setAttribute("aria-checked","false")})),f.setAttribute("aria-checked",t?"true":"false")}}),this.listeners.bind(f,"click keyup",(function(t){if(!K(t)||" "===t.key){switch(t.preventDefault(),t.stopPropagation(),f.checked=!0,i){case"language":e.currentTrack=Number(r);break;case"quality":e.quality=r;break;case"speed":e.speed=parseFloat(r)}Wt.showMenuPanel.call(e,"home",K(t))}}),i,!1),Wt.bindMenuItemShortcuts.call(this,f,i),n.appendChild(f)},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return M(t)?zt(t,Kt(this.duration)>0,e):t},updateTimeDisplay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];G(t)&&M(e)&&(t.innerText=Wt.formatTime(e,r))},updateVolume:function(){this.supported.ui&&(G(this.elements.inputs.volume)&&Wt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),G(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;G(t)&&(t.value=e,Wt.updateRangeFill.call(this,t))},updateProgress:function(t){var e=this;if(this.supported.ui&&H(t)){var r,n,i=0;if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":r=this.currentTime,n=this.duration,i=0===r||0===n||Number.isNaN(r)||Number.isNaN(n)?0:(r/n*100).toFixed(2),"timeupdate"===t.type&&Wt.setRange.call(this,this.elements.inputs.seek,i);break;case"playing":case"progress":!function(t,r){var n=M(r)?r:0,i=G(t)?t:e.elements.display.buffer;if(G(i)){i.value=n;var a=i.getElementsByTagName("span")[0];G(a)&&(a.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(t){var e=H(t)?t.target:t;if(G(e)&&"range"===e.getAttribute("type")){if(lt(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);var r=Wt.formatTime(this.currentTime),n=Wt.formatTime(this.duration),i=Bt("seekLabel",this.config);e.setAttribute("aria-valuetext",i.replace("{currentTime}",r).replace("{duration}",n))}else if(lt(e,this.config.selectors.inputs.volume)){var a=100*e.value;e.setAttribute("aria-valuenow",a),e.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else e.setAttribute("aria-valuenow",e.value);(X.isWebKit||X.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip:function(t){var e,r;if(this.config.tooltips.seek&&G(this.elements.inputs.seek)&&G(this.elements.display.seekTooltip)&&0!==this.duration){var n=this.elements.display.seekTooltip,i="".concat(this.config.classNames.tooltip,"--visible"),a=function(t){return st(n,i,t)};if(this.touch)a(!1);else{var o=0,s=this.elements.progress.getBoundingClientRect();if(H(t))o=100/s.width*(t.pageX-s.left);else{if(!ut(n,i))return;o=parseFloat(n.style.left,10)}o<0?o=0:o>100&&(o=100);var u=this.duration/100*o;n.innerText=Wt.formatTime(u);var l=null===(e=this.config.markers)||void 0===e||null===(r=e.points)||void 0===r?void 0:r.find((function(t){return t.time===Math.round(u)}));l&&n.insertAdjacentHTML("afterbegin","".concat(l.label,"<br>")),n.style.left="".concat(o,"%"),H(t)&&["mouseenter","mouseleave"].includes(t.type)&&a("mouseenter"===t.type)}}},timeUpdate:function(t){var e=!G(this.elements.display.duration)&&this.config.invertTime;Wt.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&"timeupdate"===t.type&&this.media.seeking||Wt.updateProgress.call(this,t)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return ot(this.elements.display.currentTime,!0),void ot(this.elements.progress,!0);G(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var t=G(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&Wt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&Wt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Wt.setMarkers.call(this),Wt.updateSeekTooltip.call(this)}},toggleMenuButton:function(t,e){ot(this.elements.settings.buttons[t],!e)},updateSetting:function(t,e,r){var n=this.elements.settings.panels[t],i=null,a=e;if("captions"===t)i=this.currentTrack;else{if(i=z(r)?this[t]:r,z(i)&&(i=this.config[t].default),!z(this.options[t])&&!this.options[t].includes(i))return void this.debug.warn("Unsupported value of '".concat(i,"' for ").concat(t));if(!this.config[t].options.includes(i))return void this.debug.warn("Disabled value of '".concat(i,"' for ").concat(t))}if(G(a)||(a=n&&n.querySelector('[role="menu"]')),G(a)){this.elements.settings.buttons[t].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Wt.getLabel.call(this,t,i);var o=a&&a.querySelector('[value="'.concat(i,'"]'));G(o)&&(o.checked=!0)}},getLabel:function(t,e){switch(t){case"speed":return 1===e?Bt("normal",this.config):"".concat(e,"&times;");case"quality":if(M(e)){var r=Bt("qualityLabel.".concat(e),this.config);return r.length?r:"".concat(e,"p")}return Ft(e);case"captions":return $t.getLabel.call(this);default:return null}},setQualityMenu:function(t){var e=this;if(G(this.elements.settings.panels.quality)){var r="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');B(t)&&(this.options.quality=At(t).filter((function(t){return e.config.quality.options.includes(t)})));var i=!z(this.options.quality)&&this.options.quality.length>1;if(Wt.toggleMenuButton.call(this,r,i),nt(n),Wt.checkMenu.call(this),i){var a=function(t){var r=Bt("qualityBadge.".concat(t),e.config);return r.length?Wt.createBadge.call(e,r):null};this.options.quality.sort((function(t,r){var n=e.config.quality.options;return n.indexOf(t)>n.indexOf(r)?1:-1})).forEach((function(t){Wt.createMenuItem.call(e,{value:t,list:n,type:r,title:Wt.getLabel.call(e,"quality",t),badge:a(t)})})),Wt.updateSetting.call(this,r,n)}}},setCaptionsMenu:function(){var t=this;if(G(this.elements.settings.panels.captions)){var e="captions",r=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=$t.getTracks.call(this),i=Boolean(n.length);if(Wt.toggleMenuButton.call(this,e,i),nt(r),Wt.checkMenu.call(this),i){var a=n.map((function(e,n){return{value:n,checked:t.captions.toggled&&t.currentTrack===n,title:$t.getLabel.call(t,e),badge:e.language&&Wt.createBadge.call(t,e.language.toUpperCase()),list:r,type:"language"}}));a.unshift({value:-1,checked:!this.captions.toggled,title:Bt("disabled",this.config),list:r,type:"language"}),a.forEach(Wt.createMenuItem.bind(this)),Wt.updateSetting.call(this,e,r)}}},setSpeedMenu:function(){var t=this;if(G(this.elements.settings.panels.speed)){var e="speed",r=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(e){return e>=t.minimumSpeed&&e<=t.maximumSpeed}));var n=!z(this.options.speed)&&this.options.speed.length>1;Wt.toggleMenuButton.call(this,e,n),nt(r),Wt.checkMenu.call(this),n&&(this.options.speed.forEach((function(n){Wt.createMenuItem.call(t,{value:n,list:r,type:e,title:Wt.getLabel.call(t,"speed",n)})})),Wt.updateSetting.call(this,e,r))}},checkMenu:function(){var t=this.elements.settings.buttons,e=!z(t)&&Object.values(t).some((function(t){return!t.hidden}));ot(this.elements.settings.menu,!e)},focusFirstMenuItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var r=t;G(r)||(r=Object.values(this.elements.settings.panels).find((function(t){return!t.hidden})));var n=r.querySelector('[role^="menuitem"]');ht.call(this,n,e)}},toggleMenu:function(t){var e=this.elements.settings.popup,r=this.elements.buttons.settings;if(G(e)&&G(r)){var n=e.hidden,i=n;if(N(t))i=t;else if(K(t)&&"Escape"===t.key)i=!1;else if(H(t)){var a=U(t.composedPath)?t.composedPath()[0]:t.target,o=e.contains(a);if(o||!o&&t.target!==r&&i)return}r.setAttribute("aria-expanded",i),ot(e,!i),st(this.elements.container,this.config.classNames.menu.open,i),i&&K(t)?Wt.focusFirstMenuItem.call(this,null,!0):i||n||ht.call(this,r,K(t))}},getMenuSize:function(t){var e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);var r=e.scrollWidth,n=e.scrollHeight;return rt(e),{width:r,height:n}},showMenuPanel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(e));if(G(n)){var i=n.parentNode,a=Array.from(i.children).find((function(t){return!t.hidden}));if(pt.transitions&&!pt.reducedMotion){i.style.width="".concat(a.scrollWidth,"px"),i.style.height="".concat(a.scrollHeight,"px");var o=Wt.getMenuSize.call(this,n),s=function e(r){r.target===i&&["width","height"].includes(r.propertyName)&&(i.style.width="",i.style.height="",yt.call(t,i,W,e))};mt.call(this,i,W,s),i.style.width="".concat(o.width,"px"),i.style.height="".concat(o.height,"px")}ot(a,!0),ot(n,!1),Wt.focusFirstMenuItem.call(this,n,r)}},setDownloadUrl:function(){var t=this.elements.buttons.download;G(t)&&t.setAttribute("href",this.download)},create:function(t){var e=this,r=Wt.bindMenuItemShortcuts,n=Wt.createButton,i=Wt.createProgress,a=Wt.createRange,o=Wt.createTime,s=Wt.setQualityMenu,u=Wt.setSpeedMenu,l=Wt.showMenuPanel;this.elements.controls=null,B(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));var c=tt("div",at(this.config.selectors.controls.wrapper));this.elements.controls=c;var f={class:"plyr__controls__item"};return At(B(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&c.appendChild(n.call(e,"restart",f)),"rewind"===s&&c.appendChild(n.call(e,"rewind",f)),"play"===s&&c.appendChild(n.call(e,"play",f)),"fast-forward"===s&&c.appendChild(n.call(e,"fast-forward",f)),"progress"===s){var u=tt("div",{class:"".concat(f.class," plyr__progress__container")}),h=tt("div",at(e.config.selectors.progress));if(h.appendChild(a.call(e,"seek",{id:"plyr-seek-".concat(t.id)})),h.appendChild(i.call(e,"buffer")),e.config.tooltips.seek){var d=tt("span",{class:e.config.classNames.tooltip},"00:00");h.appendChild(d),e.elements.display.seekTooltip=d}e.elements.progress=h,u.appendChild(e.elements.progress),c.appendChild(u)}if("current-time"===s&&c.appendChild(o.call(e,"currentTime",f)),"duration"===s&&c.appendChild(o.call(e,"duration",f)),"mute"===s||"volume"===s){var p=e.elements.volume;if(G(p)&&c.contains(p)||(p=tt("div",Q({},f,{class:"".concat(f.class," plyr__volume").trim()})),e.elements.volume=p,c.appendChild(p)),"mute"===s&&p.appendChild(n.call(e,"mute")),"volume"===s&&!X.isIos&&!X.isIPadOS){var g={max:1,step:.05,value:e.config.volume};p.appendChild(a.call(e,"volume",Q(g,{id:"plyr-volume-".concat(t.id)})))}}if("captions"===s&&c.appendChild(n.call(e,"captions",f)),"settings"===s&&!z(e.config.settings)){var v=tt("div",Q({},f,{class:"".concat(f.class," plyr__menu").trim(),hidden:""}));v.appendChild(n.call(e,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(t.id),"aria-expanded":!1}));var m=tt("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(t.id),hidden:""}),y=tt("div"),b=tt("div",{id:"plyr-settings-".concat(t.id,"-home")}),E=tt("div",{role:"menu"});b.appendChild(E),y.appendChild(b),e.elements.settings.panels.home=b,e.config.settings.forEach((function(n){var i=tt("button",Q(at(e.config.selectors.buttons.settings),{type:"button",class:"".concat(e.config.classNames.control," ").concat(e.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));r.call(e,i,n),mt.call(e,i,"click",(function(){l.call(e,n,!1)}));var a=tt("span",null,Bt(n,e.config)),o=tt("span",{class:e.config.classNames.menu.value});o.innerHTML=t[n],a.appendChild(o),i.appendChild(a),E.appendChild(i);var s=tt("div",{id:"plyr-settings-".concat(t.id,"-").concat(n),hidden:""}),u=tt("button",{type:"button",class:"".concat(e.config.classNames.control," ").concat(e.config.classNames.control,"--back")});u.appendChild(tt("span",{"aria-hidden":!0},Bt(n,e.config))),u.appendChild(tt("span",{class:e.config.classNames.hidden},Bt("menuBack",e.config))),mt.call(e,s,"keydown",(function(t){"ArrowLeft"===t.key&&(t.preventDefault(),t.stopPropagation(),l.call(e,"home",!0))}),!1),mt.call(e,u,"click",(function(){l.call(e,"home",!1)})),s.appendChild(u),s.appendChild(tt("div",{role:"menu"})),y.appendChild(s),e.elements.settings.buttons[n]=i,e.elements.settings.panels[n]=s})),m.appendChild(y),v.appendChild(m),c.appendChild(v),e.elements.settings.popup=m,e.elements.settings.menu=v}if("pip"===s&&pt.pip&&c.appendChild(n.call(e,"pip",f)),"airplay"===s&&pt.airplay&&c.appendChild(n.call(e,"airplay",f)),"download"===s){var T=Q({},f,{element:"a",href:e.download,target:"_blank"});e.isHTML5&&(T.download="");var w=e.config.urls.download;!q(w)&&e.isEmbed&&Q(T,{icon:"logo-".concat(e.provider),label:e.provider}),c.appendChild(n.call(e,"download",T))}"fullscreen"===s&&c.appendChild(n.call(e,"fullscreen",f))})),this.isHTML5&&s.call(this,Pt.getQualityOptions.call(this)),u.call(this),c},inject:function(){var t=this;if(this.config.loadSprite){var e=Wt.getIconUrl.call(this);e.cors&&Ht(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var r=null;this.elements.controls=null;var n,i={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;if(U(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),G(this.config.controls)||F(this.config.controls)?r=this.config.controls:(r=Wt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:$t.getLabel.call(this)}),a=!1),a&&F(this.config.controls)&&(r=function(t){var e=t;return Object.entries(i).forEach((function(t){var r=d(t,2),n=r[0],i=r[1];e=Mt(e,"{".concat(n,"}"),i)})),e}(r)),F(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),G(n)||(n=this.elements.container),n[G(r)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",r),G(this.elements.controls)||Wt.findElements.call(this),!z(this.elements.buttons)){var o=function(e){var r=t.config.classNames.controlPressed;e.setAttribute("aria-pressed","false"),Object.defineProperty(e,"pressed",{configurable:!0,enumerable:!0,get:function(){return ut(e,r)},set:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];st(e,r,t),e.setAttribute("aria-pressed",t?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(t){B(t)||j(t)?Array.from(t).filter(Boolean).forEach(o):o(t)}))}if(X.isEdge&&Y(n),this.config.tooltips.controls){var s=this.config,u=s.classNames,l=s.selectors,c="".concat(l.controls.wrapper," ").concat(l.labels," .").concat(u.hidden),f=ct.call(this,c);Array.from(f).forEach((function(e){st(e,t.config.classNames.hidden,!1),st(e,t.config.classNames.tooltip,!0)}))}},setMediaMetadata:function(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(t){}},setMarkers:function(){var t,e,r=this;if(this.duration&&!this.elements.markers){var n=null===(t=this.config.markers)||void 0===t||null===(e=t.points)||void 0===e?void 0:e.filter((function(t){var e=t.time;return e>0&&e<r.duration}));if(null!=n&&n.length){var i=document.createDocumentFragment(),a=document.createDocumentFragment(),o=null,s="".concat(this.config.classNames.tooltip,"--visible"),u=function(t){return st(o,s,t)};n.forEach((function(t){var e=tt("span",{class:r.config.classNames.marker},""),n=t.time/r.duration*100+"%";o&&(e.addEventListener("mouseenter",(function(){t.label||(o.style.left=n,o.innerHTML=t.label,u(!0))})),e.addEventListener("mouseleave",(function(){u(!1)}))),e.addEventListener("click",(function(){r.currentTime=t.time})),e.style.left=n,a.appendChild(e)})),i.appendChild(a),this.config.tooltips.seek||(o=tt("span",{class:this.config.classNames.tooltip},""),i.appendChild(o)),this.elements.markers={points:a,tip:o},this.elements.progress.appendChild(i)}}}};function Yt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t;if(e){var n=document.createElement("a");n.href=r,r=n.href}try{return new URL(r)}catch(t){return null}}function Xt(t){var e=new URLSearchParams;return O(t)&&Object.entries(t).forEach((function(t){var r=d(t,2),n=r[0],i=r[1];e.set(n,i)})),e}var $t={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!pt.textTracks)B(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Wt.setCaptionsMenu.call(this);else{var t,e;if(G(this.elements.captions)||(this.elements.captions=tt("div",at(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),t=this.elements.captions,e=this.elements.wrapper,G(t)&&G(e)&&e.parentNode.insertBefore(t,e.nextSibling)),X.isIE&&window.URL){var r=this.media.querySelectorAll("track");Array.from(r).forEach((function(t){var e=t.getAttribute("src"),r=Yt(e);null!==r&&r.hostname!==window.location.href.hostname&&["http:","https:"].includes(r.protocol)&&Gt(e,"blob").then((function(e){t.setAttribute("src",window.URL.createObjectURL(e))})).catch((function(){rt(t)}))}))}var n=At((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(t){return t.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(i=d(n,1)[0]);var a=this.storage.get("captions");if(N(a)||(a=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:a,language:i,languages:n}),this.isHTML5){var o=this.config.captions.update?"addtrack removetrack":"removetrack";mt.call(this,this.media.textTracks,o,$t.update.bind(this))}setTimeout($t.update.bind(this),0)}},update:function(){var t=this,e=$t.getTracks.call(this,!0),r=this.captions,n=r.active,i=r.language,a=r.meta,o=r.currentTrackNode,s=Boolean(e.find((function(t){return t.language===i})));this.isHTML5&&this.isVideo&&e.filter((function(t){return!a.get(t)})).forEach((function(e){t.debug.log("Track added",e),a.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),mt.call(t,e,"cuechange",(function(){return $t.updateCues.call(t)}))})),(s&&this.language!==i||!e.includes(o))&&($t.setLanguage.call(this,i),$t.toggle.call(this,n&&s)),this.elements&&st(this.elements.container,this.config.classNames.captions.enabled,!z(e)),B(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Wt.setCaptionsMenu.call(this)},toggle:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,i=this.config.classNames.captions.active,a=P(t)?!n:t;if(a!==n){if(r||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!r){var o=$t.getTracks.call(this),u=$t.findTrack.call(this,[this.captions.language].concat(s(this.captions.languages)),!0);return this.captions.language=u.language,void $t.set.call(this,o.indexOf(u))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),st(this.elements.container,i,a),this.captions.toggled=a,Wt.updateSetting.call(this,"captions"),Et.call(this,this.media,a?"captionsenabled":"captionsdisabled")}setTimeout((function(){a&&e.captions.toggled&&(e.captions.currentTrackNode.mode="hidden")}))}},set:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=$t.getTracks.call(this);if(-1!==t)if(M(t))if(t in r){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;var n=r[t],i=n||{},a=i.language;this.captions.currentTrackNode=n,Wt.updateSetting.call(this,"captions"),e||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),Et.call(this,this.media,"languagechange")}$t.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&$t.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else $t.toggle.call(this,!1,e)},setLanguage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(F(t)){var r=t.toLowerCase();this.captions.language=r;var n=$t.getTracks.call(this),i=$t.findTrack.call(this,[r]);$t.set.call(this,n.indexOf(i),e)}else this.debug.warn("Invalid language argument",t)},getTracks:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter((function(r){return!t.isHTML5||e||t.captions.meta.has(r)})).filter((function(t){return["captions","subtitles"].includes(t.kind)}))},findTrack:function(t){var e,r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$t.getTracks.call(this),a=function(t){return Number((r.captions.meta.get(t)||{}).default)},o=Array.from(i).sort((function(t,e){return a(e)-a(t)}));return t.every((function(t){return!(e=o.find((function(e){return e.language===t})))})),e||(n?o[0]:void 0)},getCurrentTrack:function(){return $t.getTracks.call(this)[this.currentTrack]},getLabel:function(t){var e=t;return!V(e)&&pt.textTracks&&this.captions.toggled&&(e=$t.getCurrentTrack.call(this)),V(e)?z(e.label)?z(e.language)?Bt("enabled",this.config):t.language.toUpperCase():e.label:Bt("disabled",this.config)},updateCues:function(t){if(this.supported.ui)if(G(this.elements.captions))if(P(t)||Array.isArray(t)){var e=t;if(!e){var r=$t.getCurrentTrack.call(this);e=Array.from((r||{}).activeCues||[]).map((function(t){return t.getCueAsHTML()})).map(Nt)}var n=e.map((function(t){return t.trim()})).join("\n");if(n!==this.elements.captions.innerHTML){nt(this.elements.captions);var i=tt("span",at(this.config.selectors.caption));i.innerHTML=n,this.elements.captions.appendChild(i),Et.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",t);else this.debug.warn("No captions element to render to")}},Qt={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Zt="picture-in-picture",Jt={html5:"html5",youtube:"youtube",vimeo:"vimeo"},ee=function(){},re=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,t),this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}return c(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):ee}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):ee}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):ee}}]),t}(),ne=function(){function e(r){var n=this;u(this,e),t(this,"onChange",(function(){if(n.supported){var t=n.player.elements.buttons.fullscreen;G(t)&&(t.pressed=n.active);var e=n.target===n.player.media?n.target:n.player.elements.container;Et.call(n.player,e,n.active?"enterfullscreen":"exitfullscreen",!0)}})),t(this,"toggleFallback",(function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r?n.scrollPosition={x:null!==(t=window.scrollX)&&void 0!==t?t:0,y:null!==(e=window.scrollY)&&void 0!==e?e:0}:window.scrollTo(n.scrollPosition.x,n.scrollPosition.y),document.body.style.overflow=r?"hidden":"",st(n.target,n.player.config.classNames.fullscreen.fallback,r),X.isIos){var i=document.head.querySelector('meta[name="viewport"]'),a="viewport-fit=cover";i||(i=document.createElement("meta")).setAttribute("name","viewport");var o=F(i.content)&&i.content.includes(a);r?(n.cleanupViewport=!o,o||(i.content+=",".concat(a))):n.cleanupViewport&&(i.content=i.content.split(",").filter((function(t){return t.trim()!==a})).join(","))}n.onChange()})),t(this,"trapFocus",(function(t){if(!X.isIos&&!X.isIPadOS&&n.active&&"Tab"===t.key){var e=document.activeElement,r=ct.call(n.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),i=d(r,1)[0],a=r[r.length-1];e!==a||t.shiftKey?e===i&&t.shiftKey&&(a.focus(),t.preventDefault()):(i.focus(),t.preventDefault())}})),t(this,"update",(function(){var t;n.supported?(t=n.forceFallback?"Fallback (forced)":e.nativeSupported?"Native":"Fallback",n.player.debug.log("".concat(t," fullscreen enabled"))):n.player.debug.log("Fullscreen not supported and fallback disabled"),st(n.player.elements.container,n.player.config.classNames.fullscreen.enabled,n.supported)})),t(this,"enter",(function(){n.supported&&(X.isIos&&n.player.config.fullscreen.iosNative?n.player.isVimeo?n.player.embed.requestFullscreen():n.target.webkitEnterFullscreen():!e.nativeSupported||n.forceFallback?n.toggleFallback(!0):n.prefix?z(n.prefix)||n.target["".concat(n.prefix,"Request").concat(n.property)]():n.target.requestFullscreen({navigationUI:"hide"}))})),t(this,"exit",(function(){if(n.supported)if(X.isIos&&n.player.config.fullscreen.iosNative)n.player.isVimeo?n.player.embed.exitFullscreen():n.target.webkitEnterFullscreen(),St(n.player.play());else if(!e.nativeSupported||n.forceFallback)n.toggleFallback(!1);else if(n.prefix){if(!z(n.prefix)){var t="moz"===n.prefix?"Cancel":"Exit";document["".concat(n.prefix).concat(t).concat(n.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),t(this,"toggle",(function(){n.active?n.exit():n.enter()})),this.player=r,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===r.config.fullscreen.fallback,this.player.elements.fullscreen=r.config.fullscreen.container&&function(t,e){return(Element.prototype.closest||function(){var t=this;do{if(lt.matches(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}).call(t,e)}(this.player.elements.container,r.config.fullscreen.container),mt.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),mt.call(this.player,this.player.elements.container,"dblclick",(function(t){G(n.player.elements.controls)&&n.player.elements.controls.contains(t.target)||n.player.listeners.proxy(t,n.toggle,"fullscreen")})),mt.call(this,this.player.elements.container,"keydown",(function(t){return n.trapFocus(t)})),this.update()}return c(e,[{key:"useNative",get:function(){return e.nativeSupported&&!this.forceFallback}},{key:"supported",get:function(){return[this.player.config.fullscreen.enabled,this.player.isVideo,e.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||e.nativeSupported||!X.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}},{key:"active",get:function(){if(!this.supported)return!1;if(!e.nativeSupported||this.forceFallback)return ut(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?this.target.getRootNode()["".concat(this.prefix).concat(this.property,"Element")]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){var t;return X.isIos&&this.player.config.fullscreen.iosNative?this.player.media:null!==(t=this.player.elements.fullscreen)&&void 0!==t?t:this.player.elements.container}}],[{key:"nativeSupported",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(U(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].some((function(e){return!(!U(document["".concat(e,"ExitFullscreen")])&&!U(document["".concat(e,"CancelFullScreen")])||(t=e,0))})),t}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),e}();function ie(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(r,n){var i=new Image,a=function(){delete i.onload,delete i.onerror,(i.naturalWidth>=e?r:n)(i)};Object.assign(i,{onload:a,onerror:a,src:t})}))}var ae={addStyleHook:function(){st(this.elements.container,this.config.selectors.container.replace(".",""),!0),st(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var t=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void ae.toggleNativeControls.call(this,!0);G(this.elements.controls)||(Wt.inject.call(this),this.listeners.controls()),ae.toggleNativeControls.call(this),this.isHTML5&&$t.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Wt.updateVolume.call(this),Wt.timeUpdate.call(this),Wt.durationUpdate.call(this),ae.checkPlaying.call(this),st(this.elements.container,this.config.classNames.pip.supported,pt.pip&&this.isHTML5&&this.isVideo),st(this.elements.container,this.config.classNames.airplay.supported,pt.airplay&&this.isHTML5),st(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){Et.call(t,t.media,"ready")}),0),ae.setTitle.call(this),this.poster&&ae.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&Wt.durationUpdate.call(this),this.config.mediaMetadata&&Wt.setMediaMetadata.call(this)},setTitle:function(){var t=Bt("play",this.config);if(F(this.config.title)&&!z(this.config.title)&&(t+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(e){e.setAttribute("aria-label",t)})),this.isEmbed){var e=ft.call(this,"iframe");if(!G(e))return;var r=z(this.config.title)?"video":this.config.title,n=Bt("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",r))}},togglePoster:function(t){st(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),wt.call(this).then((function(){return ie(t)})).catch((function(r){throw t===e.poster&&ae.togglePoster.call(e,!1),r})).then((function(){if(t!==e.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(e.elements.poster.style,{backgroundImage:"url('".concat(t,"')"),backgroundSize:""}),ae.togglePoster.call(e,!0),t})))},checkPlaying:function(t){var e=this;st(this.elements.container,this.config.classNames.playing,this.playing),st(this.elements.container,this.config.classNames.paused,this.paused),st(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(t){Object.assign(t,{pressed:e.playing}),t.setAttribute("aria-label",Bt(e.playing?"pause":"play",e.config))})),H(t)&&"timeupdate"===t.type||ae.toggleControls.call(this)},checkLoading:function(t){var e=this;this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){st(e.elements.container,e.config.classNames.loading,e.loading),ae.toggleControls.call(e)}),this.loading?250:0)},toggleControls:function(t){var e=this.elements.controls;if(e&&this.config.hideControls){var r=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(t||this.loading||this.paused||e.pressed||e.hover||r))}},migrateStyles:function(){var t=this;Object.values(h({},this.media.style)).filter((function(t){return!z(t)&&F(t)&&t.startsWith("--plyr")})).forEach((function(e){t.elements.container.style.setProperty(e,t.media.style.getPropertyValue(e)),t.media.style.removeProperty(e)})),z(this.media.style)&&this.media.removeAttribute("style")}},oe=function(){function e(r){var n=this;u(this,e),t(this,"firstTouch",(function(){var t=n.player,e=t.elements;t.touch=!0,st(e.container,t.config.classNames.isTouch,!0)})),t(this,"global",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=n.player;e.config.keyboard.global&&vt.call(e,window,"keydown keyup",n.handleKey,t,!1),vt.call(e,document.body,"click",n.toggleMenu,t),bt.call(e,document.body,"touchstart",n.firstTouch)})),t(this,"container",(function(){var t=n.player,e=t.config,r=t.elements,i=t.timers;!e.keyboard.global&&e.keyboard.focused&&mt.call(t,r.container,"keydown keyup",n.handleKey,!1),mt.call(t,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(e){var n=r.controls;n&&"enterfullscreen"===e.type&&(n.pressed=!1,n.hover=!1);var a=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(ae.toggleControls.call(t,!0),a=t.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((function(){return ae.toggleControls.call(t,!1)}),a)}));var a=function(){if(t.isVimeo&&!t.config.vimeo.premium){var e=r.wrapper,n=t.fullscreen.active,i=d(Ct.call(t),2),a=i[0],o=i[1],s=kt("aspect-ratio: ".concat(a," / ").concat(o));if(n){var u=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],l=u[1],c=u[0]/l>a/o;s?(e.style.width=c?"auto":"100%",e.style.height=c?"100%":"auto"):(e.style.maxWidth=c?l/o*a+"px":null,e.style.margin=c?"0 auto":null)}else s?(e.style.width=null,e.style.height=null):(e.style.maxWidth=null,e.style.margin=null)}},o=function(){clearTimeout(i.resized),i.resized=setTimeout(a,50)};mt.call(t,r.container,"enterfullscreen exitfullscreen",(function(e){t.fullscreen.target===r.container&&(!t.isEmbed&&z(t.config.ratio)||(a(),("enterfullscreen"===e.type?mt:yt).call(t,window,"resize",o)))}))})),t(this,"media",(function(){var t=n.player,e=t.elements;if(mt.call(t,t.media,"timeupdate seeking seeked",(function(e){return Wt.timeUpdate.call(t,e)})),mt.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return Wt.durationUpdate.call(t,e)})),mt.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),mt.call(t,t.media,"progress playing seeking seeked",(function(e){return Wt.updateProgress.call(t,e)})),mt.call(t,t.media,"volumechange",(function(e){return Wt.updateVolume.call(t,e)})),mt.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return ae.checkPlaying.call(t,e)})),mt.call(t,t.media,"waiting canplay seeked playing",(function(e){return ae.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var r=ft.call(t,".".concat(t.config.classNames.video));if(!G(r))return;mt.call(t,e.container,"click",(function(i){([e.container,r].includes(i.target)||r.contains(i.target))&&(t.touch&&t.config.hideControls||(t.ended?(n.proxy(i,t.restart,"restart"),n.proxy(i,(function(){St(t.play())}),"play")):n.proxy(i,(function(){St(t.togglePlay())}),"play")))}))}t.supported.ui&&t.config.disableContextMenu&&mt.call(t,e.wrapper,"contextmenu",(function(t){t.preventDefault()}),!1),mt.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),mt.call(t,t.media,"ratechange",(function(){Wt.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),mt.call(t,t.media,"qualitychange",(function(e){Wt.updateSetting.call(t,"quality",null,e.detail.quality)})),mt.call(t,t.media,"ready qualitychange",(function(){Wt.setDownloadUrl.call(t)}));var i=t.config.events.concat(["keyup","keydown"]).join(" ");mt.call(t,t.media,i,(function(r){var n=r.detail,i=void 0===n?{}:n;"error"===r.type&&(i=t.media.error),Et.call(t,e.container,r.type,!0,i)}))})),t(this,"proxy",(function(t,e,r){var i=n.player,a=i.config.listeners[r],o=!0;U(a)&&(o=a.call(i,t)),!1!==o&&U(e)&&e.call(i,t)})),t(this,"bind",(function(t,e,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=n.player,s=o.config.listeners[i],u=U(s);mt.call(o,t,e,(function(t){return n.proxy(t,r,i)}),a&&!u)})),t(this,"controls",(function(){var t=n.player,e=t.elements,r=X.isIE?"change":"input";if(e.buttons.play&&Array.from(e.buttons.play).forEach((function(e){n.bind(e,"click",(function(){St(t.togglePlay())}),"play")})),n.bind(e.buttons.restart,"click",t.restart,"restart"),n.bind(e.buttons.rewind,"click",(function(){t.lastSeekTime=Date.now(),t.rewind()}),"rewind"),n.bind(e.buttons.fastForward,"click",(function(){t.lastSeekTime=Date.now(),t.forward()}),"fastForward"),n.bind(e.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),n.bind(e.buttons.captions,"click",(function(){return t.toggleCaptions()})),n.bind(e.buttons.download,"click",(function(){Et.call(t,t.media,"download")}),"download"),n.bind(e.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),n.bind(e.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),n.bind(e.buttons.airplay,"click",t.airplay,"airplay"),n.bind(e.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),Wt.toggleMenu.call(t,e)}),null,!1),n.bind(e.buttons.settings,"keyup",(function(e){[" ","Enter"].includes(e.key)&&("Enter"!==e.key?(e.preventDefault(),e.stopPropagation(),Wt.toggleMenu.call(t,e)):Wt.focusFirstMenuItem.call(t,null,!0))}),null,!1),n.bind(e.settings.menu,"keydown",(function(e){"Escape"===e.key&&Wt.toggleMenu.call(t,e)})),n.bind(e.inputs.seek,"mousedown mousemove",(function(t){var r=e.progress.getBoundingClientRect(),n=100/r.width*(t.pageX-r.left);t.currentTarget.setAttribute("seek-value",n)})),n.bind(e.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var r=e.currentTarget,n="play-on-seeked";if(!K(e)||["ArrowLeft","ArrowRight"].includes(e.key)){t.lastSeekTime=Date.now();var i=r.hasAttribute(n),a=["mouseup","touchend","keyup"].includes(e.type);i&&a?(r.removeAttribute(n),St(t.play())):!a&&t.playing&&(r.setAttribute(n,""),t.pause())}})),X.isIos){var i=ct.call(t,'input[type="range"]');Array.from(i).forEach((function(t){return n.bind(t,r,(function(t){return Y(t.target)}))}))}n.bind(e.inputs.seek,r,(function(e){var r=e.currentTarget,n=r.getAttribute("seek-value");z(n)&&(n=r.value),r.removeAttribute("seek-value"),t.currentTime=n/r.max*t.duration}),"seek"),n.bind(e.progress,"mouseenter mouseleave mousemove",(function(e){return Wt.updateSeekTooltip.call(t,e)})),n.bind(e.progress,"mousemove touchmove",(function(e){var r=t.previewThumbnails;r&&r.loaded&&r.startMove(e)})),n.bind(e.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),n.bind(e.progress,"mousedown touchstart",(function(e){var r=t.previewThumbnails;r&&r.loaded&&r.startScrubbing(e)})),n.bind(e.progress,"mouseup touchend",(function(e){var r=t.previewThumbnails;r&&r.loaded&&r.endScrubbing(e)})),X.isWebKit&&Array.from(ct.call(t,'input[type="range"]')).forEach((function(e){n.bind(e,"input",(function(e){return Wt.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!G(e.display.duration)&&n.bind(e.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,Wt.timeUpdate.call(t))})),n.bind(e.inputs.volume,r,(function(e){t.volume=e.target.value}),"volume"),n.bind(e.controls,"mouseenter mouseleave",(function(r){e.controls.hover=!t.touch&&"mouseenter"===r.type})),e.fullscreen&&Array.from(e.fullscreen.children).filter((function(t){return!t.contains(e.container)})).forEach((function(r){n.bind(r,"mouseenter mouseleave",(function(r){e.controls&&(e.controls.hover=!t.touch&&"mouseenter"===r.type)}))})),n.bind(e.controls,"mousedown mouseup touchstart touchend touchcancel",(function(t){e.controls.pressed=["mousedown","touchstart"].includes(t.type)})),n.bind(e.controls,"focusin",(function(){var r=t.config,i=t.timers;st(e.controls,r.classNames.noTransition,!0),ae.toggleControls.call(t,!0),setTimeout((function(){st(e.controls,r.classNames.noTransition,!1)}),0);var a=n.touch?3e3:4e3;clearTimeout(i.controls),i.controls=setTimeout((function(){return ae.toggleControls.call(t,!1)}),a)})),n.bind(e.inputs.volume,"wheel",(function(e){var r=e.webkitDirectionInvertedFromDevice,n=[e.deltaX,-e.deltaY].map((function(t){return r?-t:t})),i=d(n,2),a=i[0],o=i[1],s=Math.sign(Math.abs(a)>Math.abs(o)?a:o);t.increaseVolume(s/50);var u=t.media.volume;(1===s&&u<1||-1===s&&u>0)&&e.preventDefault()}),"volume",!1)})),this.player=r,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}return c(e,[{key:"handleKey",value:function(t){var e,r=this.player,n=r.elements,i=t.key,a=t.type,o=t.altKey,s=t.ctrlKey,u=t.metaKey,l=t.shiftKey,c="keydown"===a,f=c&&i===this.lastKey;if(!(o||s||u||l)&&i)if(c){var h=document.activeElement;if(G(h)){var d=r.config.selectors.editable;if(h!==n.inputs.seek&&lt(h,d))return;if(" "===t.key&&lt(h,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(t.preventDefault(),t.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":f||(e=parseInt(i,10),r.currentTime=r.duration/10*e);break;case" ":case"k":f||St(r.togglePlay());break;case"ArrowUp":r.increaseVolume(.1);break;case"ArrowDown":r.decreaseVolume(.1);break;case"m":f||(r.muted=!r.muted);break;case"ArrowRight":r.forward();break;case"ArrowLeft":r.rewind();break;case"f":r.fullscreen.toggle();break;case"c":f||r.toggleCaptions();break;case"l":r.loop=!r.loop}"Escape"===i&&!r.fullscreen.usingNative&&r.fullscreen.active&&r.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(t){Wt.toggleMenu.call(this.player,t)}}]),e}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var se=function(t,e){return function(t,e){t.exports=function(){var t=function(){},e={},r={},n={};function i(t,e){if(t){var i=n[t];if(r[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function a(e,r){e.call&&(e={success:e}),r.length?(e.error||t)(r):(e.success||t)(e)}function o(e,r,n,i){var a,s,u=document,l=n.async,c=(n.numRetries||0)+1,f=n.before||t,h=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((s=u.createElement("link")).rel="stylesheet",s.href=d,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=u.createElement("img")).src=d:((s=u.createElement("script")).src=e,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(t){var u=t.type[0];if(a)try{s.sheet.cssText.length||(u="e")}catch(t){18!=t.code&&(u="e")}if("e"==u){if((i+=1)<c)return o(e,r,n,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";r(e,u,t.defaultPrevented)},!1!==f(e,s)&&u.head.appendChild(s)}function s(t,e,r){var n,i,a=(t=t.push?t:[t]).length,s=a,u=[];for(n=function(t,r,n){if("e"==r&&u.push(t),"b"==r){if(!n)return;u.push(t)}--a||e(u)},i=0;i<s;i++)o(t[i],n,r)}function u(t,r,n){var o,u;if(r&&r.trim&&(o=r),u=(o?n:r)||{},o){if(o in e)throw"LoadJS";e[o]=!0}function l(e,r){s(t,(function(t){a(u,t),e&&a({success:e,error:r},t),i(o,t)}),u)}if(u.returnPromise)return new Promise(l);l()}return u.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,a,o,s=[],u=t.length,l=u;for(i=function(t,r){r.length&&s.push(t),--l||e(s)};u--;)a=t[u],(o=r[a])?i(a,o):(n[a]=n[a]||[]).push(i)}(t,(function(t){a(e,t)})),u},u.done=function(t){i(t,[])},u.reset=function(){e={},r={},n={}},u.isDefined=function(t){return t in e},u}()}(e={exports:{}}),e.exports}();function ue(t){return new Promise((function(e,r){se(t,{success:e,error:r})}))}function le(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,Et.call(this,this.media,t?"play":"pause"))}var ce={setup:function(){var t=this;st(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,It.call(t),O(window.Vimeo)?ce.ready.call(t):ue(t.config.urls.vimeo.sdk).then((function(){ce.ready.call(t)})).catch((function(e){t.debug.warn("Vimeo SDK (player.js) failed to load",e)}))},ready:function(){var t=this,e=this,r=e.config.vimeo,n=r.premium,i=r.referrerPolicy,a=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(r,o),s=e.media.getAttribute("src"),u="";z(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),u=e.media.getAttribute(e.config.attributes.embed.hash)):u=function(t){var e=t.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&5===e.length?e[4]:null}(s);var l=u?{h:u}:{};n&&Object.assign(a,{controls:!1,sidedock:!1});var c,f=Xt(h(h({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline},l),a)),p=z(c=s)?null:M(Number(c))?c:c.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:c,g=tt("iframe"),v=Ot(e.config.urls.vimeo.iframe,p,f);if(g.setAttribute("src",v),g.setAttribute("allowfullscreen",""),g.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),z(i)||g.setAttribute("referrerPolicy",i),n||!r.customControls)g.setAttribute("data-poster",e.poster),e.media=it(g,e.media);else{var m=tt("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});m.appendChild(g),e.media=it(m,e.media)}r.customControls||Gt(Ot(e.config.urls.vimeo.api,v)).then((function(t){!z(t)&&t.thumbnail_url&&ae.setPoster.call(e,t.thumbnail_url).catch((function(){}))})),e.embed=new window.Vimeo.Player(g,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=function(){return le.call(e,!0),e.embed.play()},e.media.pause=function(){return le.call(e,!1),e.embed.pause()},e.media.stop=function(){e.pause(),e.currentTime=0};var y=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:function(){return y},set:function(t){var r=e.embed,n=e.media,i=e.paused,a=e.volume,o=i&&!r.hasPlayed;n.seeking=!0,Et.call(e,n,"seeking"),Promise.resolve(o&&r.setVolume(0)).then((function(){return r.setCurrentTime(t)})).then((function(){return o&&r.pause()})).then((function(){return o&&r.setVolume(a)})).catch((function(){}))}});var b=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:function(){return b},set:function(t){e.embed.setPlaybackRate(t).then((function(){b=t,Et.call(e,e.media,"ratechange")})).catch((function(){e.options.speed=[1]}))}});var E=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return E},set:function(t){e.embed.setVolume(t).then((function(){E=t,Et.call(e,e.media,"volumechange")}))}});var T=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return T},set:function(t){var r=!!N(t)&&t;e.embed.setMuted(!!r||e.config.muted).then((function(){T=r,Et.call(e,e.media,"volumechange")}))}});var w,S=e.config.loop;Object.defineProperty(e.media,"loop",{get:function(){return S},set:function(t){var r=N(t)?t:e.config.loop.active;e.embed.setLoop(r).then((function(){S=r}))}}),e.embed.getVideoUrl().then((function(t){w=t,Wt.setDownloadUrl.call(e)})).catch((function(e){t.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:function(){return w}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((function(r){var n=d(r,2),i=n[0],a=n[1];e.embed.ratio=Dt(i,a),It.call(t)})),e.embed.setAutopause(e.config.autopause).then((function(t){e.config.autopause=t})),e.embed.getVideoTitle().then((function(r){e.config.title=r,ae.setTitle.call(t)})),e.embed.getCurrentTime().then((function(t){y=t,Et.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((function(t){e.media.duration=t,Et.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((function(t){e.media.textTracks=t,$t.setup.call(e)})),e.embed.on("cuechange",(function(t){var r=t.cues,n=(void 0===r?[]:r).map((function(t){return function(t){var e=document.createDocumentFragment(),r=document.createElement("div");return e.appendChild(r),r.innerHTML=t,e.firstChild.innerText}(t.text)}));$t.updateCues.call(e,n)})),e.embed.on("loaded",(function(){e.embed.getPaused().then((function(t){le.call(e,!t),t||Et.call(e,e.media,"playing")})),G(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(function(){Et.call(e,e.media,"waiting")})),e.embed.on("bufferend",(function(){Et.call(e,e.media,"playing")})),e.embed.on("play",(function(){le.call(e,!0),Et.call(e,e.media,"playing")})),e.embed.on("pause",(function(){le.call(e,!1)})),e.embed.on("timeupdate",(function(t){e.media.seeking=!1,y=t.seconds,Et.call(e,e.media,"timeupdate")})),e.embed.on("progress",(function(t){e.media.buffered=t.percent,Et.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&Et.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((function(t){t!==e.media.duration&&(e.media.duration=t,Et.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(function(){e.media.seeking=!1,Et.call(e,e.media,"seeked")})),e.embed.on("ended",(function(){e.media.paused=!0,Et.call(e,e.media,"ended")})),e.embed.on("error",(function(t){e.media.error=t,Et.call(e,e.media,"error")})),r.customControls&&setTimeout((function(){return ae.build.call(e)}),0)}};function fe(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,Et.call(this,this.media,t?"play":"pause"))}function he(t){return t.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var de={setup:function(){var t=this;if(st(this.elements.wrapper,this.config.classNames.embed,!0),O(window.YT)&&U(window.YT.Player))de.ready.call(this);else{var e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){U(e)&&e(),de.ready.call(t)},ue(this.config.urls.youtube.sdk).catch((function(e){t.debug.warn("YouTube API failed to load",e)}))}},getTitle:function(t){var e=this;Gt(Ot(this.config.urls.youtube.api,t)).then((function(t){if(O(t)){var r=t.title,n=t.height,i=t.width;e.config.title=r,ae.setTitle.call(e),e.embed.ratio=Dt(i,n)}It.call(e)})).catch((function(){It.call(e)}))},ready:function(){var t=this,e=t.config.youtube,r=t.media&&t.media.getAttribute("id");if(z(r)||!r.startsWith("youtube-")){var n=t.media.getAttribute("src");z(n)&&(n=t.media.getAttribute(this.config.attributes.embed.id));var i,a=z(i=n)?null:i.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:i,o=tt("div",{id:"".concat(t.provider,"-").concat(Math.floor(1e4*Math.random())),"data-poster":e.customControls?t.poster:void 0});if(t.media=it(o,t.media),e.customControls){var s=function(t){return"https://i.ytimg.com/vi/".concat(a,"/").concat(t,"default.jpg")};ie(s("maxres"),121).catch((function(){return ie(s("sd"),121)})).catch((function(){return ie(s("hq"))})).then((function(e){return ae.setPoster.call(t,e.src)})).then((function(e){e.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}t.embed=new window.YT.Player(t.media,{videoId:a,host:he(e),playerVars:Q({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError:function(e){if(!t.media.error){var r=e.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[r]||"An unknown error occurred";t.media.error={code:r,message:n},Et.call(t,t.media,"error")}},onPlaybackRateChange:function(e){var r=e.target;t.media.playbackRate=r.getPlaybackRate(),Et.call(t,t.media,"ratechange")},onReady:function(r){if(!U(t.media.play)){var n=r.target;de.getTitle.call(t,a),t.media.play=function(){fe.call(t,!0),n.playVideo()},t.media.pause=function(){fe.call(t,!1),n.pauseVideo()},t.media.stop=function(){n.stopVideo()},t.media.duration=n.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(e){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,Et.call(t,t.media,"seeking"),n.seekTo(e)}}),Object.defineProperty(t.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(t){n.setPlaybackRate(t)}});var i=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return i},set:function(e){i=e,n.setVolume(100*i),Et.call(t,t.media,"volumechange")}});var o=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return o},set:function(e){var r=N(e)?e:o;o=r,n[r?"mute":"unMute"](),n.setVolume(100*i),Et.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}});var s=n.getAvailablePlaybackRates();t.options.speed=s.filter((function(e){return t.config.speed.options.includes(e)})),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),Et.call(t,t.media,"timeupdate"),Et.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval((function(){t.media.buffered=n.getVideoLoadedFraction(),(null===t.media.lastBuffered||t.media.lastBuffered<t.media.buffered)&&Et.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,1===t.media.buffered&&(clearInterval(t.timers.buffering),Et.call(t,t.media,"canplaythrough"))}),200),e.customControls&&setTimeout((function(){return ae.build.call(t)}),50)}},onStateChange:function(r){var n=r.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(r.data)&&(t.media.seeking=!1,Et.call(t,t.media,"seeked")),r.data){case-1:Et.call(t,t.media,"timeupdate"),t.media.buffered=n.getVideoLoadedFraction(),Et.call(t,t.media,"progress");break;case 0:fe.call(t,!1),t.media.loop?(n.stopVideo(),n.playVideo()):Et.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(fe.call(t,!0),Et.call(t,t.media,"playing"),t.timers.playing=setInterval((function(){Et.call(t,t.media,"timeupdate")}),50),t.media.duration!==n.getDuration()&&(t.media.duration=n.getDuration(),Et.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),fe.call(t,!1);break;case 3:Et.call(t,t.media,"waiting")}Et.call(t,t.elements.container,"statechange",!1,{code:r.data})}}})}}},pe={setup:function(){this.media?(st(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),st(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&st(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=tt("div",{class:this.config.classNames.video}),Z(this.media,this.elements.wrapper),this.elements.poster=tt("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Pt.setup.call(this):this.isYouTube?de.setup.call(this):this.isVimeo&&ce.setup.call(this)):this.debug.warn("No media element found!")}},ge=function(){function e(r){var n=this;u(this,e),t(this,"load",(function(){n.enabled&&(O(window.google)&&O(window.google.ima)?n.ready():ue(n.player.config.urls.googleIMA.sdk).then((function(){n.ready()})).catch((function(){n.trigger("error",new Error("Google IMA SDK failed to load"))})))})),t(this,"ready",(function(){var t;n.enabled||((t=n).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),n.startSafetyTimer(12e3,"ready()"),n.managerPromise.then((function(){n.clearSafetyTimer("onAdsManagerLoaded()")})),n.listeners(),n.setupIMA()})),t(this,"setupIMA",(function(){n.elements.container=tt("div",{class:n.player.config.classNames.ads}),n.player.elements.container.appendChild(n.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(n.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(n.player.config.playsinline),n.elements.displayContainer=new google.ima.AdDisplayContainer(n.elements.container,n.player.media),n.loader=new google.ima.AdsLoader(n.elements.displayContainer),n.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return n.onAdsManagerLoaded(t)}),!1),n.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return n.onAdError(t)}),!1),n.requestAds()})),t(this,"requestAds",(function(){var t=n.player.elements.container;try{var e=new google.ima.AdsRequest;e.adTagUrl=n.tagUrl,e.linearAdSlotWidth=t.offsetWidth,e.linearAdSlotHeight=t.offsetHeight,e.nonLinearAdSlotWidth=t.offsetWidth,e.nonLinearAdSlotHeight=t.offsetHeight,e.forceNonLinearFullSlot=!1,e.setAdWillPlayMuted(!n.player.muted),n.loader.requestAds(e)}catch(t){n.onAdError(t)}})),t(this,"pollCountdown",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(n.countdownTimer),void n.elements.container.removeAttribute("data-badge-text");n.countdownTimer=setInterval((function(){var t=zt(Math.max(n.manager.getRemainingTime(),0)),e="".concat(Bt("advertisement",n.player.config)," - ").concat(t);n.elements.container.setAttribute("data-badge-text",e)}),100)})),t(this,"onAdsManagerLoaded",(function(t){if(n.enabled){var e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e.enablePreloading=!0,n.manager=t.getAdsManager(n.player,e),n.cuePoints=n.manager.getCuePoints(),n.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return n.onAdError(t)})),Object.keys(google.ima.AdEvent.Type).forEach((function(t){n.manager.addEventListener(google.ima.AdEvent.Type[t],(function(t){return n.onAdEvent(t)}))})),n.trigger("loaded")}})),t(this,"addCuePoints",(function(){z(n.cuePoints)||n.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<n.player.duration){var e=n.player.elements.progress;if(G(e)){var r=100/n.player.duration*t,i=tt("span",{class:n.player.config.classNames.cues});i.style.left="".concat(r.toString(),"%"),e.appendChild(i)}}}))})),t(this,"onAdEvent",(function(t){var e=n.player.elements.container,r=t.getAd(),i=t.getAdData();switch(function(t){Et.call(n.player,n.player.media,"ads".concat(t.replace(/_/g,"").toLowerCase()))}(t.type),t.type){case google.ima.AdEvent.Type.LOADED:n.trigger("loaded"),n.pollCountdown(!0),r.isLinear()||(r.width=e.offsetWidth,r.height=e.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:n.manager.setVolume(n.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:n.player.ended?n.loadAds():n.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:n.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:n.pollCountdown(),n.resumeContent();break;case google.ima.AdEvent.Type.LOG:i.adError&&n.player.debug.warn("Non-fatal ad error: ".concat(i.adError.getMessage()))}})),t(this,"onAdError",(function(t){n.cancel(),n.player.debug.warn("Ads error",t)})),t(this,"listeners",(function(){var t,e=n.player.elements.container;n.player.on("canplay",(function(){n.addCuePoints()})),n.player.on("ended",(function(){n.loader.contentComplete()})),n.player.on("timeupdate",(function(){t=n.player.currentTime})),n.player.on("seeked",(function(){var e=n.player.currentTime;z(n.cuePoints)||n.cuePoints.forEach((function(r,i){t<r&&r<e&&(n.manager.discardAdBreak(),n.cuePoints.splice(i,1))}))})),window.addEventListener("resize",(function(){n.manager&&n.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)}))})),t(this,"play",(function(){var t=n.player.elements.container;n.managerPromise||n.resumeContent(),n.managerPromise.then((function(){n.manager.setVolume(n.player.volume),n.elements.displayContainer.initialize();try{n.initialized||(n.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),n.manager.start()),n.initialized=!0}catch(t){n.onAdError(t)}})).catch((function(){}))})),t(this,"resumeContent",(function(){n.elements.container.style.zIndex="",n.playing=!1,St(n.player.media.play())})),t(this,"pauseContent",(function(){n.elements.container.style.zIndex=3,n.playing=!0,n.player.media.pause()})),t(this,"cancel",(function(){n.initialized&&n.resumeContent(),n.trigger("error"),n.loadAds()})),t(this,"loadAds",(function(){n.managerPromise.then((function(){n.manager&&n.manager.destroy(),n.managerPromise=new Promise((function(t){n.on("loaded",t),n.player.debug.log(n.manager)})),n.initialized=!1,n.requestAds()})).catch((function(){}))})),t(this,"trigger",(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var a=n.events[t];B(a)&&a.forEach((function(t){U(t)&&t.apply(n,r)}))})),t(this,"on",(function(t,e){return B(n.events[t])||(n.events[t]=[]),n.events[t].push(e),n})),t(this,"startSafetyTimer",(function(t,e){n.player.debug.log("Safety timer invoked from: ".concat(e)),n.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),t)})),t(this,"clearSafetyTimer",(function(t){P(n.safetyTimer)||(n.player.debug.log("Safety timer cleared from: ".concat(t)),clearTimeout(n.safetyTimer),n.safetyTimer=null)})),this.player=r,this.config=r.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(t,e){n.on("loaded",t),n.on("error",e)})),this.load()}return c(e,[{key:"enabled",get:function(){var t=this.config;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!z(t.publisherId)||q(t.tagUrl))}},{key:"tagUrl",get:function(){var t=this.config;return q(t.tagUrl)?t.tagUrl:"https://go.aniview.com/api/adserver6/vast/?".concat(Xt({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId}))}}]),e}();function ve(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(t,e),r)}var me,ye=function(t){var e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(t){var r={};t.split(/\r\n|\n|\r/).forEach((function(t){if(M(r.startTime)){if(!z(t.trim())&&z(r.text)){var e,n,i=t.trim().split("#xywh=");e=d(i,1),r.text=e[0],i[1]&&(n=d(i[1].split(","),4),r.x=n[0],r.y=n[1],r.w=n[2],r.h=n[3])}}else{var a=t.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);a&&(r.startTime=60*Number(a[1]||0)*60+60*Number(a[2])+Number(a[3])+Number("0.".concat(a[4])),r.endTime=60*Number(a[6]||0)*60+60*Number(a[7])+Number(a[8])+Number("0.".concat(a[9])))}})),r.text&&e.push(r)})),e},be=function(t,e){var r={};return t>e.width/e.height?(r.width=e.width,r.height=1/t*e.width):(r.height=e.height,r.width=t*e.height),r},Ee=function(){function e(r){var n=this;u(this,e),t(this,"load",(function(){n.player.elements.display.seekTooltip&&(n.player.elements.display.seekTooltip.hidden=n.enabled),n.enabled&&n.getThumbnails().then((function(){n.enabled&&(n.render(),n.determineContainerAutoSizing(),n.listeners(),n.loaded=!0)}))})),t(this,"getThumbnails",(function(){return new Promise((function(t){var e=n.player.config.previewThumbnails.src;if(z(e))throw new Error("Missing previewThumbnails.src config attribute");var r=function(){n.thumbnails.sort((function(t,e){return t.height-e.height})),n.player.debug.log("Preview thumbnails",n.thumbnails),t()};if(U(e))e((function(t){n.thumbnails=t,r()}));else{var i=(F(e)?[e]:e).map((function(t){return n.getThumbnail(t)}));Promise.all(i).then(r)}}))})),t(this,"getThumbnail",(function(t){return new Promise((function(e){Gt(t).then((function(r){var i={frames:ye(r),height:null,urlPrefix:""};i.frames[0].text.startsWith("/")||i.frames[0].text.startsWith("http://")||i.frames[0].text.startsWith("https://")||(i.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));var a=new Image;a.onload=function(){i.height=a.naturalHeight,i.width=a.naturalWidth,n.thumbnails.push(i),e()},a.src=i.urlPrefix+i.frames[0].text}))}))})),t(this,"startMove",(function(t){if(n.loaded&&H(t)&&["touchmove","mousemove"].includes(t.type)&&n.player.media.duration){if("touchmove"===t.type)n.seekTime=n.player.media.duration*(n.player.elements.inputs.seek.value/100);else{var e,r,i=n.player.elements.progress.getBoundingClientRect(),a=100/i.width*(t.pageX-i.left);n.seekTime=n.player.media.duration*(a/100),n.seekTime<0&&(n.seekTime=0),n.seekTime>n.player.media.duration-1&&(n.seekTime=n.player.media.duration-1),n.mousePosX=t.pageX,n.elements.thumb.time.innerText=zt(n.seekTime);var o=null===(e=n.player.config.markers)||void 0===e||null===(r=e.points)||void 0===r?void 0:r.find((function(t){return t.time===Math.round(n.seekTime)}));o&&n.elements.thumb.time.insertAdjacentHTML("afterbegin","".concat(o.label,"<br>"))}n.showImageAtCurrentTime()}})),t(this,"endMove",(function(){n.toggleThumbContainer(!1,!0)})),t(this,"startScrubbing",(function(t){(P(t.button)||!1===t.button||0===t.button)&&(n.mouseDown=!0,n.player.media.duration&&(n.toggleScrubbingContainer(!0),n.toggleThumbContainer(!1,!0),n.showImageAtCurrentTime()))})),t(this,"endScrubbing",(function(){n.mouseDown=!1,Math.ceil(n.lastTime)===Math.ceil(n.player.media.currentTime)?n.toggleScrubbingContainer(!1):bt.call(n.player,n.player.media,"timeupdate",(function(){n.mouseDown||n.toggleScrubbingContainer(!1)}))})),t(this,"listeners",(function(){n.player.on("play",(function(){n.toggleThumbContainer(!1,!0)})),n.player.on("seeked",(function(){n.toggleThumbContainer(!1)})),n.player.on("timeupdate",(function(){n.lastTime=n.player.media.currentTime}))})),t(this,"render",(function(){n.elements.thumb.container=tt("div",{class:n.player.config.classNames.previewThumbnails.thumbContainer}),n.elements.thumb.imageContainer=tt("div",{class:n.player.config.classNames.previewThumbnails.imageContainer}),n.elements.thumb.container.appendChild(n.elements.thumb.imageContainer);var t=tt("div",{class:n.player.config.classNames.previewThumbnails.timeContainer});n.elements.thumb.time=tt("span",{},"00:00"),t.appendChild(n.elements.thumb.time),n.elements.thumb.imageContainer.appendChild(t),G(n.player.elements.progress)&&n.player.elements.progress.appendChild(n.elements.thumb.container),n.elements.scrubbing.container=tt("div",{class:n.player.config.classNames.previewThumbnails.scrubbingContainer}),n.player.elements.wrapper.appendChild(n.elements.scrubbing.container)})),t(this,"destroy",(function(){n.elements.thumb.container&&n.elements.thumb.container.remove(),n.elements.scrubbing.container&&n.elements.scrubbing.container.remove()})),t(this,"showImageAtCurrentTime",(function(){n.mouseDown?n.setScrubbingContainerSize():n.setThumbContainerSizeAndPos();var t=n.thumbnails[0].frames.findIndex((function(t){return n.seekTime>=t.startTime&&n.seekTime<=t.endTime})),e=t>=0,r=0;n.mouseDown||n.toggleThumbContainer(e),e&&(n.thumbnails.forEach((function(e,i){n.loadedImages.includes(e.frames[t].text)&&(r=i)})),t!==n.showingThumb&&(n.showingThumb=t,n.loadImage(r)))})),t(this,"loadImage",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=n.showingThumb,r=n.thumbnails[t],i=r.urlPrefix,a=r.frames[e],o=r.frames[e].text,s=i+o;if(n.currentImageElement&&n.currentImageElement.dataset.filename===o)n.showImage(n.currentImageElement,a,t,e,o,!1),n.currentImageElement.dataset.index=e,n.removeOldImages(n.currentImageElement);else{n.loadingImage&&n.usingSprites&&(n.loadingImage.onload=null);var u=new Image;u.src=s,u.dataset.index=e,u.dataset.filename=o,n.showingThumbFilename=o,n.player.debug.log("Loading image: ".concat(s)),u.onload=function(){return n.showImage(u,a,t,e,o,!0)},n.loadingImage=u,n.removeOldImages(u)}})),t(this,"showImage",(function(t,e,r,i,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];n.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(i,". qual: ").concat(r,". newimg: ").concat(o)),n.setImageSizeAndOffset(t,e),o&&(n.currentImageContainer.appendChild(t),n.currentImageElement=t,n.loadedImages.includes(a)||n.loadedImages.push(a)),n.preloadNearby(i,!0).then(n.preloadNearby(i,!1)).then(n.getHigherQuality(r,t,e,a))})),t(this,"removeOldImages",(function(t){Array.from(n.currentImageContainer.children).forEach((function(e){if("img"===e.tagName.toLowerCase()){var r=n.usingSprites?500:1e3;if(e.dataset.index!==t.dataset.index&&!e.dataset.deleting){e.dataset.deleting=!0;var i=n.currentImageContainer;setTimeout((function(){i.removeChild(e),n.player.debug.log("Removing thumb: ".concat(e.dataset.filename))}),r)}}}))})),t(this,"preloadNearby",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(r){setTimeout((function(){var i=n.thumbnails[0].frames[t].text;if(n.showingThumbFilename===i){var a;a=e?n.thumbnails[0].frames.slice(t):n.thumbnails[0].frames.slice(0,t).reverse();var o=!1;a.forEach((function(t){var e=t.text;if(e!==i&&!n.loadedImages.includes(e)){o=!0,n.player.debug.log("Preloading thumb filename: ".concat(e));var a=n.thumbnails[0].urlPrefix+e,s=new Image;s.src=a,s.onload=function(){n.player.debug.log("Preloaded thumb filename: ".concat(e)),n.loadedImages.includes(e)||n.loadedImages.push(e),r()}}})),o||r()}}),300)}))})),t(this,"getHigherQuality",(function(t,e,r,i){if(t<n.thumbnails.length-1){var a=e.naturalHeight;n.usingSprites&&(a=r.h),a<n.thumbContainerHeight&&setTimeout((function(){n.showingThumbFilename===i&&(n.player.debug.log("Showing higher quality thumb for: ".concat(i)),n.loadImage(t+1))}),300)}})),t(this,"toggleThumbContainer",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.player.config.classNames.previewThumbnails.thumbContainerShown;n.elements.thumb.container.classList.toggle(r,t),!t&&e&&(n.showingThumb=null,n.showingThumbFilename=null)})),t(this,"toggleScrubbingContainer",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=n.player.config.classNames.previewThumbnails.scrubbingContainerShown;n.elements.scrubbing.container.classList.toggle(e,t),t||(n.showingThumb=null,n.showingThumbFilename=null)})),t(this,"determineContainerAutoSizing",(function(){(n.elements.thumb.imageContainer.clientHeight>20||n.elements.thumb.imageContainer.clientWidth>20)&&(n.sizeSpecifiedInCSS=!0)})),t(this,"setThumbContainerSizeAndPos",(function(){var t=n.elements.thumb.imageContainer;if(n.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){var e=Math.floor(t.clientHeight*n.thumbAspectRatio);t.style.width="".concat(e,"px")}else if(t.clientHeight<20&&t.clientWidth>20){var r=Math.floor(t.clientWidth/n.thumbAspectRatio);t.style.height="".concat(r,"px")}}else{var i=Math.floor(n.thumbContainerHeight*n.thumbAspectRatio);t.style.height="".concat(n.thumbContainerHeight,"px"),t.style.width="".concat(i,"px")}n.setThumbContainerPos()})),t(this,"setThumbContainerPos",(function(){var t=n.player.elements.progress.getBoundingClientRect(),e=n.player.elements.container.getBoundingClientRect(),r=n.elements.thumb.container,i=e.left-t.left+10,a=e.right-t.left-r.clientWidth-10,o=n.mousePosX-t.left-r.clientWidth/2,s=ve(o,i,a);r.style.left="".concat(s,"px"),r.style.setProperty("--preview-arrow-offset",o-s+"px")})),t(this,"setScrubbingContainerSize",(function(){var t=be(n.thumbAspectRatio,{width:n.player.media.clientWidth,height:n.player.media.clientHeight}),e=t.width,r=t.height;n.elements.scrubbing.container.style.width="".concat(e,"px"),n.elements.scrubbing.container.style.height="".concat(r,"px")})),t(this,"setImageSizeAndOffset",(function(t,e){if(n.usingSprites){var r=n.thumbContainerHeight/e.h;t.style.height=t.naturalHeight*r+"px",t.style.width=t.naturalWidth*r+"px",t.style.left="-".concat(e.x*r,"px"),t.style.top="-".concat(e.y*r,"px")}})),this.player=r,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return c(e,[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?be(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}]),e}(),Te={insertElements:function(t,e){var r=this;F(e)?et(t,this.media,{src:e}):B(e)&&e.forEach((function(e){et(t,r.media,e)}))},change:function(t){var e=this;$(t,"sources.length")?(Pt.cancelRequests.call(this),this.destroy.call(this,(function(){e.options.quality=[],rt(e.media),e.media=null,G(e.elements.container)&&e.elements.container.removeAttribute("class");var r=t.sources,n=t.type,i=d(r,1)[0],a=i.provider,o=void 0===a?Jt.html5:a,s=i.src,u="html5"===o?n:"div",l="html5"===o?{}:{src:s};Object.assign(e,{provider:o,type:n,supported:pt.check(n,o,e.config.playsinline),media:tt(u,l)}),e.elements.container.appendChild(e.media),N(t.autoplay)&&(e.config.autoplay=t.autoplay),e.isHTML5&&(e.config.crossorigin&&e.media.setAttribute("crossorigin",""),e.config.autoplay&&e.media.setAttribute("autoplay",""),z(t.poster)||(e.poster=t.poster),e.config.loop.active&&e.media.setAttribute("loop",""),e.config.muted&&e.media.setAttribute("muted",""),e.config.playsinline&&e.media.setAttribute("playsinline","")),ae.addStyleHook.call(e),e.isHTML5&&Te.insertElements.call(e,"source",r),e.config.title=t.title,pe.setup.call(e),e.isHTML5&&Object.keys(t).includes("tracks")&&Te.insertElements.call(e,"track",t.tracks),(e.isHTML5||e.isEmbed&&!e.supported.ui)&&ae.build.call(e),e.isHTML5&&e.media.load(),z(t.previewThumbnails)||(Object.assign(e.config.previewThumbnails,t.previewThumbnails),e.previewThumbnails&&e.previewThumbnails.loaded&&(e.previewThumbnails.destroy(),e.previewThumbnails=null),e.config.previewThumbnails.enabled&&(e.previewThumbnails=new Ee(e))),e.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},we=function(){function e(r,n){var i=this;if(u(this,e),t(this,"play",(function(){return U(i.media.play)?(i.ads&&i.ads.enabled&&i.ads.managerPromise.then((function(){return i.ads.play()})).catch((function(){return St(i.media.play())})),i.media.play()):null})),t(this,"pause",(function(){return i.playing&&U(i.media.pause)?i.media.pause():null})),t(this,"togglePlay",(function(t){return(N(t)?t:!i.playing)?i.play():i.pause()})),t(this,"stop",(function(){i.isHTML5?(i.pause(),i.restart()):U(i.media.stop)&&i.media.stop()})),t(this,"restart",(function(){i.currentTime=0})),t(this,"rewind",(function(t){i.currentTime-=M(t)?t:i.config.seekTime})),t(this,"forward",(function(t){i.currentTime+=M(t)?t:i.config.seekTime})),t(this,"increaseVolume",(function(t){var e=i.media.muted?0:i.volume;i.volume=e+(M(t)?t:0)})),t(this,"decreaseVolume",(function(t){i.increaseVolume(-t)})),t(this,"airplay",(function(){pt.airplay&&i.media.webkitShowPlaybackTargetPicker()})),t(this,"toggleControls",(function(t){if(i.supported.ui&&!i.isAudio){var e=ut(i.elements.container,i.config.classNames.hideControls),r=void 0===t?void 0:!t,n=st(i.elements.container,i.config.classNames.hideControls,r);if(n&&B(i.config.controls)&&i.config.controls.includes("settings")&&!z(i.config.settings)&&Wt.toggleMenu.call(i,!1),n!==e){var a=n?"controlshidden":"controlsshown";Et.call(i,i.media,a)}return!n}return!1})),t(this,"on",(function(t,e){mt.call(i,i.elements.container,t,e)})),t(this,"once",(function(t,e){bt.call(i,i.elements.container,t,e)})),t(this,"off",(function(t,e){yt(i.elements.container,t,e)})),t(this,"destroy",(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.ready){var r=function(){document.body.style.overflow="",i.embed=null,e?(Object.keys(i.elements).length&&(rt(i.elements.buttons.play),rt(i.elements.captions),rt(i.elements.controls),rt(i.elements.wrapper),i.elements.buttons.play=null,i.elements.captions=null,i.elements.controls=null,i.elements.wrapper=null),U(t)&&t()):(Tt.call(i),Pt.cancelRequests.call(i),it(i.elements.original,i.elements.container),Et.call(i,i.elements.original,"destroyed",!0),U(t)&&t.call(i.elements.original),i.ready=!1,setTimeout((function(){i.elements=null,i.media=null}),200))};i.stop(),clearTimeout(i.timers.loading),clearTimeout(i.timers.controls),clearTimeout(i.timers.resized),i.isHTML5?(ae.toggleNativeControls.call(i,!0),r()):i.isYouTube?(clearInterval(i.timers.buffering),clearInterval(i.timers.playing),null!==i.embed&&U(i.embed.destroy)&&i.embed.destroy(),r()):i.isVimeo&&(null!==i.embed&&i.embed.unload().then(r),setTimeout(r,200))}})),t(this,"supports",(function(t){return pt.mime.call(i,t)})),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=pt.touch,this.media=r,F(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||j(this.media)||B(this.media))&&(this.media=this.media[0]),this.config=Q({},Qt,e.defaults,n||{},function(){try{return JSON.parse(i.media.getAttribute("data-plyr-config"))}catch(t){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new re(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",pt),!P(this.media)&&G(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(pt.check().api){var a=this.media.cloneNode(!0);a.autoplay=!1,this.elements.original=a;var o=this.media.tagName.toLowerCase(),s=null,l=null;switch(o){case"div":if(s=this.media.querySelector("iframe"),G(s)){if(l=Yt(s.getAttribute("src")),this.provider=function(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?Jt.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?Jt.vimeo:null}(l.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",l.search.length){var c=["1","true"];c.includes(l.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(l.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(l.searchParams.get("playsinline")),this.config.youtube.hl=l.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(z(this.provider)||!Object.values(Jt).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type="video";break;case"video":case"audio":this.type=o,this.provider=Jt.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=pt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new oe(this),this.storage=new jt(this),this.media.plyr=this,G(this.elements.container)||(this.elements.container=tt("div"),Z(this.media,this.elements.container)),ae.migrateStyles.call(this),ae.addStyleHook.call(this),pe.setup.call(this),this.config.debug&&mt.call(this,this.elements.container,this.config.events.join(" "),(function(t){i.debug.log("event: ".concat(t.type))})),this.fullscreen=new ne(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ae.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new ge(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return St(i.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Ee(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return c(e,[{key:"isHTML5",get:function(){return this.provider===Jt.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Jt.youtube}},{key:"isVimeo",get:function(){return this.provider===Jt.vimeo}},{key:"isVideo",get:function(){return"video"===this.type}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",get:function(){return Number(this.media.currentTime)},set:function(t){if(this.duration){var e=M(t)&&t>0;this.media.currentTime=e?Math.min(t,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}}},{key:"buffered",get:function(){var t=this.media.buffered;return M(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var t=parseFloat(this.config.duration),e=(this.media||{}).duration,r=M(e)&&e!==1/0?e:0;return t||r}},{key:"volume",get:function(){return Number(this.media.volume)},set:function(t){var e=t;F(e)&&(e=Number(e)),M(e)||(e=this.storage.get("volume")),M(e)||(e=this.config.volume),e>1&&(e=1),e<0&&(e=0),this.config.volume=e,this.media.volume=e,!z(t)&&this.muted&&e>0&&(this.muted=!1)}},{key:"muted",get:function(){return Boolean(this.media.muted)},set:function(t){var e=t;N(e)||(e=this.storage.get("muted")),N(e)||(e=this.config.muted),this.config.muted=e,this.media.muted=e}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",get:function(){return Number(this.media.playbackRate)},set:function(t){var e=this,r=null;M(t)&&(r=t),M(r)||(r=this.storage.get("speed")),M(r)||(r=this.config.speed.selected);var n=this.minimumSpeed,i=this.maximumSpeed;r=ve(r,n,i),this.config.speed.selected=r,setTimeout((function(){e.media&&(e.media.playbackRate=r)}),0)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,s(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,s(this.options.speed)):this.isVimeo?2:16}},{key:"quality",get:function(){return this.media.quality},set:function(t){var e=this.config.quality,r=this.options.quality;if(r.length){var n=[!z(t)&&Number(t),this.storage.get("quality"),e.selected,e.default].find(M),i=!0;if(!r.includes(n)){var a=_t(r,n);this.debug.warn("Unsupported quality option: ".concat(n,", using ").concat(a," instead")),n=a,i=!1}e.selected=n,this.media.quality=n,i&&this.storage.set({quality:n})}}},{key:"loop",get:function(){return Boolean(this.media.loop)},set:function(t){var e=N(t)?t:this.config.loop.active;this.config.loop.active=e,this.media.loop=e}},{key:"source",get:function(){return this.media.currentSrc},set:function(t){Te.change.call(this,t)}},{key:"download",get:function(){var t=this.config.urls.download;return q(t)?t:this.source},set:function(t){q(t)&&(this.config.urls.download=t,Wt.setDownloadUrl.call(this))}},{key:"poster",get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null},set:function(t){this.isVideo?ae.setPoster.call(this,t,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")}},{key:"ratio",get:function(){if(!this.isVideo)return null;var t=xt(Ct.call(this));return B(t)?t.join(":"):t},set:function(t){this.isVideo?F(t)&&Rt(t)?(this.config.ratio=xt(t),It.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(t,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",get:function(){return Boolean(this.config.autoplay)},set:function(t){this.config.autoplay=N(t)?t:this.config.autoplay}},{key:"toggleCaptions",value:function(t){$t.toggle.call(this,t,!1)}},{key:"currentTrack",get:function(){var t=this.captions,e=t.toggled,r=t.currentTrack;return e?r:-1},set:function(t){$t.set.call(this,t,!1),$t.setup.call(this)}},{key:"language",get:function(){return($t.getCurrentTrack.call(this)||{}).language},set:function(t){$t.setLanguage.call(this,t,!1)}},{key:"pip",get:function(){return pt.pip?z(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Zt:null},set:function(t){if(pt.pip){var e=N(t)?t:!this.pip;U(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(e?Zt:"inline"),U(this.media.requestPictureInPicture)&&(!this.pip&&e?this.media.requestPictureInPicture():this.pip&&!e&&document.exitPictureInPicture())}}},{key:"setPreviewThumbnails",value:function(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Ee(this))}}],[{key:"supported",value:function(t,e){return pt.check(t,e)}},{key:"loadSprite",value:function(t,e){return Ht(t,e)}},{key:"setup",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return F(t)?n=Array.from(document.querySelectorAll(t)):j(t)?n=Array.from(t):B(t)&&(n=t.filter(G)),z(n)?null:n.map((function(t){return new e(t,r)}))}}]),e}();return we.defaults=(me=Qt,JSON.parse(JSON.stringify(me))),we},"object"==y(e)?t.exports=a():void 0===(i="function"==typeof(n=a)?n.call(e,r,e,t):n)||(t.exports=i))},2010:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var i=function(t){"use strict";var e,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),o=new R(n||[]);return a._invoke=function(t,e,r){var n=f;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return C()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?p:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",g={};function v(){}function m(){}function y(){}var b={};b[o]=function(){return this};var E=Object.getPrototypeOf,T=E&&E(E(x([])));T&&T!==r&&i.call(T,o)&&(b=T);var w=y.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function A(t,e){function r(a,o,s,u){var l=c(t[a],t,o);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"===n(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){f.value=t,s(f)}),(function(t){return r("throw",t,s,u)}))}u(l.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}}function _(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:C}}function C(){return{value:e,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,y[u]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(A.prototype),A.prototype[s]=function(){return this},t.AsyncIterator=A,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new A(l(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(w),w[u]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}("object"===n(t=r.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},8538:function(t,e,r){"use strict";var n;r.r(e),r.d(e,{NIL:function(){return C},parse:function(){return v},stringify:function(){return h},v1:function(){return g},v3:function(){return _},v4:function(){return k},v5:function(){return x},validate:function(){return s},version:function(){return I}});var i=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}for(var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(t){return"string"==typeof t&&o.test(t)},u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));var c,f,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},d=0,p=0,g=function(t,e,r){var n=e&&r||0,i=e||new Array(16),o=(t=t||{}).node||c,s=void 0!==t.clockseq?t.clockseq:f;if(null==o||null==s){var u=t.random||(t.rng||a)();null==o&&(o=c=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=f=16383&(u[6]<<8|u[7]))}var l=void 0!==t.msecs?t.msecs:Date.now(),g=void 0!==t.nsecs?t.nsecs:p+1,v=l-d+(g-p)/1e4;if(v<0&&void 0===t.clockseq&&(s=s+1&16383),(v<0||l>d)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=l,p=g,f=s;var m=(1e4*(268435455&(l+=122192928e5))+g)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;var y=l/4294967296*1e4&268435455;i[n++]=y>>>8&255,i[n++]=255&y,i[n++]=y>>>24&15|16,i[n++]=y>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var b=0;b<6;++b)i[n+b]=o[b];return e||h(i)},v=function(t){if(!s(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r};function m(t,e,r){function n(t,n,i,a){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=v(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(n),o.set(t,n.length),(o=r(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,i){a=a||0;for(var s=0;s<16;++s)i[a+s]=o[s];return i}return h(o)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function y(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function E(t,e,r,n,i,a){return b((o=b(b(e,t),b(n,a)))<<(s=i)|o>>>32-s,r);var o,s}function T(t,e,r,n,i,a,o){return E(e&r|~e&n,t,e,i,a,o)}function w(t,e,r,n,i,a,o){return E(e&n|r&~n,t,e,i,a,o)}function S(t,e,r,n,i,a,o){return E(e^r^n,t,e,i,a,o)}function A(t,e,r,n,i,a,o){return E(r^(e|~n),t,e,i,a,o)}var _=m("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,n="0123456789abcdef",i=0;i<r;i+=8){var a=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[y(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,o=0;o<t.length;o+=16){var s=r,u=n,l=i,c=a;r=T(r,n,i,a,t[o],7,-680876936),a=T(a,r,n,i,t[o+1],12,-389564586),i=T(i,a,r,n,t[o+2],17,606105819),n=T(n,i,a,r,t[o+3],22,-1044525330),r=T(r,n,i,a,t[o+4],7,-176418897),a=T(a,r,n,i,t[o+5],12,1200080426),i=T(i,a,r,n,t[o+6],17,-1473231341),n=T(n,i,a,r,t[o+7],22,-45705983),r=T(r,n,i,a,t[o+8],7,1770035416),a=T(a,r,n,i,t[o+9],12,-1958414417),i=T(i,a,r,n,t[o+10],17,-42063),n=T(n,i,a,r,t[o+11],22,-1990404162),r=T(r,n,i,a,t[o+12],7,1804603682),a=T(a,r,n,i,t[o+13],12,-40341101),i=T(i,a,r,n,t[o+14],17,-1502002290),r=w(r,n=T(n,i,a,r,t[o+15],22,1236535329),i,a,t[o+1],5,-165796510),a=w(a,r,n,i,t[o+6],9,-1069501632),i=w(i,a,r,n,t[o+11],14,643717713),n=w(n,i,a,r,t[o],20,-373897302),r=w(r,n,i,a,t[o+5],5,-701558691),a=w(a,r,n,i,t[o+10],9,38016083),i=w(i,a,r,n,t[o+15],14,-660478335),n=w(n,i,a,r,t[o+4],20,-405537848),r=w(r,n,i,a,t[o+9],5,568446438),a=w(a,r,n,i,t[o+14],9,-1019803690),i=w(i,a,r,n,t[o+3],14,-187363961),n=w(n,i,a,r,t[o+8],20,1163531501),r=w(r,n,i,a,t[o+13],5,-1444681467),a=w(a,r,n,i,t[o+2],9,-51403784),i=w(i,a,r,n,t[o+7],14,1735328473),r=S(r,n=w(n,i,a,r,t[o+12],20,-1926607734),i,a,t[o+5],4,-378558),a=S(a,r,n,i,t[o+8],11,-2022574463),i=S(i,a,r,n,t[o+11],16,1839030562),n=S(n,i,a,r,t[o+14],23,-35309556),r=S(r,n,i,a,t[o+1],4,-1530992060),a=S(a,r,n,i,t[o+4],11,1272893353),i=S(i,a,r,n,t[o+7],16,-155497632),n=S(n,i,a,r,t[o+10],23,-1094730640),r=S(r,n,i,a,t[o+13],4,681279174),a=S(a,r,n,i,t[o],11,-358537222),i=S(i,a,r,n,t[o+3],16,-722521979),n=S(n,i,a,r,t[o+6],23,76029189),r=S(r,n,i,a,t[o+9],4,-640364487),a=S(a,r,n,i,t[o+12],11,-421815835),i=S(i,a,r,n,t[o+15],16,530742520),r=A(r,n=S(n,i,a,r,t[o+2],23,-995338651),i,a,t[o],6,-198630844),a=A(a,r,n,i,t[o+7],10,1126891415),i=A(i,a,r,n,t[o+14],15,-1416354905),n=A(n,i,a,r,t[o+5],21,-57434055),r=A(r,n,i,a,t[o+12],6,1700485571),a=A(a,r,n,i,t[o+3],10,-1894986606),i=A(i,a,r,n,t[o+10],15,-1051523),n=A(n,i,a,r,t[o+1],21,-2054922799),r=A(r,n,i,a,t[o+8],6,1873313359),a=A(a,r,n,i,t[o+15],10,-30611744),i=A(i,a,r,n,t[o+6],15,-1560198380),n=A(n,i,a,r,t[o+13],21,1309151649),r=A(r,n,i,a,t[o+4],6,-145523070),a=A(a,r,n,i,t[o+11],10,-1120210379),i=A(i,a,r,n,t[o+2],15,718787259),n=A(n,i,a,r,t[o+9],21,-343485551),r=b(r,s),n=b(n,u),i=b(i,l),a=b(a,c)}return[r,n,i,a]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(y(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))})),k=function(t,e,r){var n=(t=t||{}).random||(t.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return h(n)};function L(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function R(t,e){return t<<e|t>>>32-e}var x=m("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,o=Math.ceil(a/16),s=new Array(o),u=0;u<o;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=t[64*u+4*c]<<24|t[64*u+4*c+1]<<16|t[64*u+4*c+2]<<8|t[64*u+4*c+3];s[u]=l}s[o-1][14]=8*(t.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<o;++f){for(var h=new Uint32Array(80),d=0;d<16;++d)h[d]=s[f][d];for(var p=16;p<80;++p)h[p]=R(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var g=r[0],v=r[1],m=r[2],y=r[3],b=r[4],E=0;E<80;++E){var T=Math.floor(E/20),w=R(g,5)+L(T,v,m,y)+b+e[T]+h[E]>>>0;b=y,y=m,m=R(v,30)>>>0,v=g,g=w}r[0]=r[0]+g>>>0,r[1]=r[1]+v>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),C="00000000-0000-0000-0000-000000000000",I=function(t){if(!s(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},5389:function(t,e,r){var n;!function(){function i(t,e,r){return t.call.apply(t.bind,arguments)}function a(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function o(t,e,r){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:a).apply(null,arguments)}var s=Date.now||function(){return+new Date};function u(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var l=!!window.FontFace;function c(t,e,r,n){if(e=t.c.createElement(e),r)for(var i in r)r.hasOwnProperty(i)&&("style"==i?e.style.cssText=r[i]:e.setAttribute(i,r[i]));return n&&e.appendChild(t.c.createTextNode(n)),e}function f(t,e,r){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(r,t.lastChild)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e,r){e=e||[],r=r||[];for(var n=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var a=!1,o=0;o<n.length;o+=1)if(e[i]===n[o]){a=!0;break}a||n.push(e[i])}for(e=[],i=0;i<n.length;i+=1){for(a=!1,o=0;o<r.length;o+=1)if(n[i]===r[o]){a=!0;break}a||e.push(n[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function p(t,e){for(var r=t.className.split(/\s+/),n=0,i=r.length;n<i;n++)if(r[n]==e)return!0;return!1}function g(t,e,r){function n(){s&&i&&a&&(s(o),s=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,a=!0,o=null,s=r||null;l?(e.onload=function(){i=!0,n()},e.onerror=function(){i=!0,o=Error("Stylesheet failed to load"),n()}):setTimeout((function(){i=!0,n()}),0),f(t,"head",e)}function v(t,e,r,n){var i=t.c.getElementsByTagName("head")[0];if(i){var a=c(t,"script",{src:e}),o=!1;return a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,r&&r(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&i.removeChild(a))},i.appendChild(a),setTimeout((function(){o||(o=!0,r&&r(Error("Script load timeout")))}),n||5e3),a}return null}function m(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,E(t)}}function b(t,e){t.c=e,E(t)}function E(t){0==t.a&&t.c&&(t.c(),t.c=null)}function T(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var r=(e||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function S(t){var e=[];t=t.split(/,\s*/);for(var r=0;r<t.length;r++){var n=t[r].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function A(t){return t.a+t.f}function _(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function k(t){var e=4,r="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(r=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),r+e}function L(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new T("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function R(t){if(t.g){var e=p(t.f,t.a.c("wf","active")),r=[],n=[t.a.c("wf","loading")];e||r.push(t.a.c("wf","inactive")),d(t.f,r,n)}x(t,"inactive")}function x(t,e,r){t.j&&t.h[e]&&(r?t.h[e](r.c,A(r)):t.h[e]())}function C(){this.c={}}function I(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function D(t){f(t.c,"body",t.a)}function P(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(t.c)+";font-style:"+_(t)+";font-weight:"+t.f+"00;"}function O(t,e,r,n,i,a){this.g=t,this.j=e,this.a=n,this.c=r,this.f=i||3e3,this.h=a||void 0}function M(t,e,r,n,i,a,o){this.v=t,this.B=e,this.c=r,this.a=n,this.s=o||"BESbswy",this.f={},this.w=i||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new I(this.c,this.s),this.h=new I(this.c,this.s),this.j=new I(this.c,this.s),this.m=new I(this.c,this.s),t=P(t=new w(this.a.c+",serif",A(this.a))),this.g.a.style.cssText=t,t=P(t=new w(this.a.c+",sans-serif",A(this.a))),this.h.a.style.cssText=t,t=P(t=new w("serif",A(this.a))),this.j.a.style.cssText=t,t=P(t=new w("sans-serif",A(this.a))),this.m.a.style.cssText=t,D(this.g),D(this.h),D(this.j),D(this.m)}T.prototype.c=function(t){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},O.prototype.start=function(){var t=this.c.o.document,e=this,r=s(),n=new Promise((function(n,i){!function a(){s()-r>=e.f?i():t.fonts.load(function(t){return _(t)+" "+t.f+"00 300px "+S(t.c)}(e.a),e.h).then((function(t){1<=t.length?n():setTimeout(a,25)}),(function(){i()}))}()})),i=null,a=new Promise((function(t,r){i=setTimeout(r,e.f)}));Promise.race([a,n]).then((function(){i&&(clearTimeout(i),i=null),e.g(e.a)}),(function(){e.j(e.a)}))};var F={D:"serif",C:"sans-serif"},N=null;function U(){if(null===N){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return N}function B(t,e,r){for(var n in F)if(F.hasOwnProperty(n)&&e===t.f[F[n]]&&r===t.f[F[n]])return!0;return!1}function j(t){var e,r=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=r===t.f.serif&&n===t.f["sans-serif"])||(e=U()&&B(t,r,n)),e?s()-t.A>=t.w?U()&&B(t,r,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?G(t,t.v):G(t,t.B):function(t){setTimeout(o((function(){j(this)}),t),50)}(t):G(t,t.v)}function G(t,e){setTimeout(o((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),e(this.a)}),t),0)}function H(t,e,r){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=r}M.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),j(this)};var K=null;function V(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&d(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),x(t,"active")):R(t.a))}function q(t){this.j=t,this.a=new C,this.h=0,this.f=this.g=!0}function z(t,e,r,n,i){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=i||null,s=n||{};if(0===r.length&&a)R(e.a);else{e.f+=r.length,a&&(e.j=a);var u,l=[];for(u=0;u<r.length;u++){var c=r[u],f=s[c.c],h=e.a,p=c;if(h.g&&d(h.f,[h.a.c("wf",p.c,A(p).toString(),"loading")]),x(h,"fontloading",p),h=null,null===K)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);K=p?42<parseInt(p[1],10):!g}else K=!1;h=K?new O(o(e.g,e),o(e.h,e),e.c,c,e.s,f):new M(o(e.g,e),o(e.h,e),e.c,c,e.s,t,f),l.push(h)}for(u=0;u<l.length;u++)l[u].start()}}),0)}function W(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t,this.a=e}function X(t,e){this.c=t||$,this.a=[],this.f=[],this.g=e||""}H.prototype.g=function(t){var e=this.a;e.g&&d(e.f,[e.a.c("wf",t.c,A(t).toString(),"active")],[e.a.c("wf",t.c,A(t).toString(),"loading"),e.a.c("wf",t.c,A(t).toString(),"inactive")]),x(e,"fontactive",t),this.m=!0,V(this)},H.prototype.h=function(t){var e=this.a;if(e.g){var r=p(e.f,e.a.c("wf",t.c,A(t).toString(),"active")),n=[],i=[e.a.c("wf",t.c,A(t).toString(),"loading")];r||n.push(e.a.c("wf",t.c,A(t).toString(),"inactive")),d(e.f,n,i)}x(e,"fontinactive",t),V(this)},q.prototype.load=function(t){this.c=new u(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,r){var n=[],i=r.timeout;!function(t){t.g&&d(t.f,[t.a.c("wf","loading")]),x(t,"loading")}(e),n=function(t,e,r){var n,i=[];for(n in e)if(e.hasOwnProperty(n)){var a=t.c[n];a&&i.push(a(e[n],r))}return i}(t.a,r,t.c);var a=new H(t.c,e,i);for(t.h=n.length,e=0,r=n.length;e<r;e++)n[e].load((function(e,r,n){z(t,a,e,r,n)}))}(this,new L(this.c,t),t)},W.prototype.load=function(t){function e(){if(a["__mti_fntLst"+n]){var r,i=a["__mti_fntLst"+n](),o=[];if(i)for(var s=0;s<i.length;s++){var u=i[s].fontfamily;null!=i[s].fontStyle&&null!=i[s].fontWeight?(r=i[s].fontStyle+i[s].fontWeight,o.push(new w(u,r))):o.push(new w(u))}t(o)}else setTimeout((function(){e()}),50)}var r=this,n=r.a.projectId,i=r.a.version;if(n){var a=r.c.o;v(this.c,(r.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(i?"?v="+i:""),(function(i){i?t([]):(a["__MonotypeConfiguration__"+n]=function(){return r.a},e())})).id="__MonotypeAPIScript__"+n}else t([])},Y.prototype.load=function(t){var e,r,n=this.a.urls||[],i=this.a.families||[],a=this.a.testStrings||{},o=new m;for(e=0,r=n.length;e<r;e++)g(this.c,n[e],y(o));var s=[];for(e=0,r=i.length;e<r;e++)if((n=i[e].split(":"))[1])for(var u=n[1].split(","),l=0;l<u.length;l+=1)s.push(new w(n[0],u[l]));else s.push(new w(n[0]));b(o,(function(){t(s,a)}))};var $="https://fonts.googleapis.com/css";function Q(t){this.f=t,this.a=[],this.c={}}var Z={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function rt(t,e){this.c=t,this.a=e}var nt={Arimo:!0,Cousine:!0,Tinos:!0};function it(t,e){this.c=t,this.a=e}function at(t,e){this.c=t,this.f=e,this.a=[]}rt.prototype.load=function(t){var e=new m,r=this.c,n=new X(this.a.api,this.a.text),i=this.a.families;!function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n].split(":");3==i.length&&t.f.push(i.pop());var a="";2==i.length&&""!=i[1]&&(a=":"),t.a.push(i.join(a))}}(n,i);var a=new Q(i);!function(t){for(var e=t.f.length,r=0;r<e;r++){var n=t.f[r].split(":"),i=n[0].replace(/\+/g," "),a=["n4"];if(2<=n.length){var o;if(o=[],s=n[1])for(var s,u=(s=s.split(",")).length,l=0;l<u;l++){var c;if((c=s[l]).match(/^[\w-]+$/))if(null==(f=et.exec(c.toLowerCase())))c="";else{if(c=null==(c=f[2])||""==c?"n":tt[c],null==(f=f[1])||""==f)f="4";else var f=J[f]||(isNaN(f)?"4":f.substr(0,1));c=[c,f].join("")}else c="";c&&o.push(c)}0<o.length&&(a=o),3==n.length&&(o=[],0<(n=(n=n[2])?n.split(","):o).length&&(n=Z[n[0]])&&(t.c[i]=n))}for(t.c[i]||(n=Z[i])&&(t.c[i]=n),n=0;n<a.length;n+=1)t.a.push(new w(i,a[n]))}}(a),g(r,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,r=[],n=0;n<e;n++)r.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+r.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(n),y(e)),b(e,(function(){t(a.a,a.c,nt)}))},it.prototype.load=function(t){var e=this.a.id,r=this.c.o;e?v(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){e=r.Typekit.config.fn;for(var n=[],i=0;i<e.length;i+=2)for(var a=e[i],o=e[i+1],s=0;s<o.length;s++)n.push(new w(a,o[s]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}}),2e3):t([])},at.prototype.load=function(t){var e=this.f.id,r=this.c.o,n=this;e?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[e]=function(e,r){for(var i=0,a=r.fonts.length;i<a;++i){var o=r.fonts[i];n.a.push(new w(o.name,k("font-weight:"+o.weight+";font-style:"+o.style)))}t(n.a)},v(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var ot=new q(window);ot.a.c.custom=function(t,e){return new Y(e,t)},ot.a.c.fontdeck=function(t,e){return new at(e,t)},ot.a.c.monotype=function(t,e){return new W(e,t)},ot.a.c.typekit=function(t,e){return new it(e,t)},ot.a.c.google=function(t,e){return new rt(e,t)};var st={load:o(ot.load,ot)};void 0===(n=function(){return st}.call(e,r,e,t))||(t.exports=n)}()},3161:function(t,e,r){"use strict";r.r(e),r.d(e,{Expression:function(){return C},Parser:function(){return Gt}});var n="INUMBER",i="IOP1",a="IOP2",o="IOP3",s="IVAR",u="IVARNAME",l="IFUNCALL",c="IFUNDEF",f="IEXPR",h="IEXPREVAL",d="IMEMBER",p="IENDSTATEMENT",g="IARRAY";function v(t,e){this.type=t,this.value=null!=e?e:0}function m(t){return new v(i,t)}function y(t){return new v(a,t)}function b(t){return new v(o,t)}function E(t,e,r,l,c){for(var h,p,m,y,b=[],T=[],w=0;w<t.length;w++){var S=t[w],A=S.type;if(A===n||A===u)Array.isArray(S.value)?b.push.apply(b,E(S.value.map((function(t){return new v(n,t)})).concat(new v(g,S.value.length)),e,r,l,c)):b.push(S);else if(A===s&&c.hasOwnProperty(S.value))S=new v(n,c[S.value]),b.push(S);else if(A===a&&b.length>1)p=b.pop(),h=b.pop(),y=r[S.value],S=new v(n,y(h.value,p.value)),b.push(S);else if(A===o&&b.length>2)m=b.pop(),p=b.pop(),h=b.pop(),"?"===S.value?b.push(h.value?p.value:m.value):(y=l[S.value],S=new v(n,y(h.value,p.value,m.value)),b.push(S));else if(A===i&&b.length>0)h=b.pop(),y=e[S.value],S=new v(n,y(h.value)),b.push(S);else if(A===f){for(;b.length>0;)T.push(b.shift());T.push(new v(f,E(S.value,e,r,l,c)))}else if(A===d&&b.length>0)h=b.pop(),b.push(new v(n,h.value[S.value]));else{for(;b.length>0;)T.push(b.shift());T.push(S)}}for(;b.length>0;)T.push(b.shift());return T}function T(t,e,r){for(var n=[],u=0;u<t.length;u++){var l=t[u],c=l.type;if(c===s&&l.value===e)for(var h=0;h<r.tokens.length;h++){var d,p=r.tokens[h];d=p.type===i?m(p.value):p.type===a?y(p.value):p.type===o?b(p.value):new v(p.type,p.value),n.push(d)}else c===f?n.push(new v(f,T(l.value,e,r))):n.push(l)}return n}function w(t,e,r){var v,m,y,b,E,T,k=[];if(A(t))return _(t,r);for(var L=t.length,R=0;R<L;R++){var x=t[R],C=x.type;if(C===n||C===u)k.push(x.value);else if(C===a)m=k.pop(),v=k.pop(),"and"===x.value?k.push(!!v&&!!w(m,e,r)):"or"===x.value?k.push(!!v||!!w(m,e,r)):"="===x.value?(b=e.binaryOps[x.value],k.push(b(v,w(m,e,r),r))):(b=e.binaryOps[x.value],k.push(b(_(v,r),_(m,r))));else if(C===o)y=k.pop(),m=k.pop(),v=k.pop(),"?"===x.value?k.push(w(v?m:y,e,r)):(b=e.ternaryOps[x.value],k.push(b(_(v,r),_(m,r),_(y,r))));else if(C===s)if(x.value in e.functions)k.push(e.functions[x.value]);else if(x.value in e.unaryOps&&e.parser.isOperatorEnabled(x.value))k.push(e.unaryOps[x.value]);else{var I=r[x.value];if(void 0===I)throw new Error("undefined variable: "+x.value);k.push(I)}else if(C===i)v=k.pop(),b=e.unaryOps[x.value],k.push(b(_(v,r)));else if(C===l){for(T=x.value,E=[];T-- >0;)E.unshift(_(k.pop(),r));if(!(b=k.pop()).apply||!b.call)throw new Error(b+" is not a function");k.push(b.apply(void 0,E))}else if(C===c)k.push(function(){for(var t=k.pop(),n=[],i=x.value;i-- >0;)n.unshift(k.pop());var a=k.pop(),o=function(){for(var i=Object.assign({},r),a=0,o=n.length;a<o;a++)i[n[a]]=arguments[a];return w(t,e,i)};return Object.defineProperty(o,"name",{value:a,writable:!1}),r[a]=o,o}());else if(C===f)k.push(S(x,e));else if(C===h)k.push(x);else if(C===d)v=k.pop(),k.push(v[x.value]);else if(C===p)k.pop();else{if(C!==g)throw new Error("invalid Expression");for(T=x.value,E=[];T-- >0;)E.unshift(k.pop());k.push(E)}}if(k.length>1)throw new Error("invalid Expression (parity)");return 0===k[0]?0:_(k[0],r)}function S(t,e,r){return A(t)?t:{type:h,value:function(r){return w(t.value,e,r)}}}function A(t){return t&&t.type===h}function _(t,e){return A(t)?t.value(e):t}function k(t,e){for(var r,h,v,m,y,b,E=[],T=0;T<t.length;T++){var w=t[T],S=w.type;if(S===n)"number"==typeof w.value&&w.value<0?E.push("("+w.value+")"):Array.isArray(w.value)?E.push("["+w.value.map(L).join(", ")+"]"):E.push(L(w.value));else if(S===a)h=E.pop(),r=E.pop(),m=w.value,e?"^"===m?E.push("Math.pow("+r+", "+h+")"):"and"===m?E.push("(!!"+r+" && !!"+h+")"):"or"===m?E.push("(!!"+r+" || !!"+h+")"):"||"===m?E.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+r+"),("+h+")))"):"=="===m?E.push("("+r+" === "+h+")"):"!="===m?E.push("("+r+" !== "+h+")"):"["===m?E.push(r+"[("+h+") | 0]"):E.push("("+r+" "+m+" "+h+")"):"["===m?E.push(r+"["+h+"]"):E.push("("+r+" "+m+" "+h+")");else if(S===o){if(v=E.pop(),h=E.pop(),r=E.pop(),"?"!==(m=w.value))throw new Error("invalid Expression");E.push("("+r+" ? "+h+" : "+v+")")}else if(S===s||S===u)E.push(w.value);else if(S===i)r=E.pop(),"-"===(m=w.value)||"+"===m?E.push("("+m+r+")"):e?"not"===m?E.push("(!"+r+")"):"!"===m?E.push("fac("+r+")"):E.push(m+"("+r+")"):"!"===m?E.push("("+r+"!)"):E.push("("+m+" "+r+")");else if(S===l){for(b=w.value,y=[];b-- >0;)y.unshift(E.pop());m=E.pop(),E.push(m+"("+y.join(", ")+")")}else if(S===c){for(h=E.pop(),b=w.value,y=[];b-- >0;)y.unshift(E.pop());r=E.pop(),e?E.push("("+r+" = function("+y.join(", ")+") { return "+h+" })"):E.push("("+r+"("+y.join(", ")+") = "+h+")")}else if(S===d)r=E.pop(),E.push(r+"."+w.value);else if(S===g){for(b=w.value,y=[];b-- >0;)y.unshift(E.pop());E.push("["+y.join(", ")+"]")}else if(S===f)E.push("("+k(w.value,e)+")");else if(S!==p)throw new Error("invalid Expression")}return E.length>1&&(E=e?[E.join(",")]:[E.join(";")]),String(E[0])}function L(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function R(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function x(t,e,r){for(var n=!!(r=r||{}).withMembers,i=null,a=0;a<t.length;a++){var o=t[a];o.type===s||o.type===u?n||R(e,o.value)?null!==i?(R(e,i)||e.push(i),i=o.value):i=o.value:e.push(o.value):o.type===d&&n&&null!==i?i+="."+o.value:o.type===f?x(o.value,e,r):null!==i&&(R(e,i)||e.push(i),i=null)}null===i||R(e,i)||e.push(i)}function C(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}v.prototype.toString=function(){switch(this.type){case n:case i:case a:case o:case s:case u:case p:return this.value;case l:return"CALL "+this.value;case c:return"DEF "+this.value;case g:return"ARRAY "+this.value;case d:return"."+this.value;default:return"Invalid Instruction"}},C.prototype.simplify=function(t){return t=t||{},new C(E(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},C.prototype.substitute=function(t,e){return e instanceof C||(e=this.parser.parse(String(e))),new C(T(this.tokens,t,e),this.parser)},C.prototype.evaluate=function(t){return t=t||{},w(this.tokens,this,t)},C.prototype.toString=function(){return k(this.tokens,!1)},C.prototype.symbols=function(t){t=t||{};var e=[];return x(this.tokens,e,t),e},C.prototype.variables=function(t){t=t||{};var e=[];x(this.tokens,e,t);var r=this.functions;return e.filter((function(t){return!(t in r)}))},C.prototype.toJSFunction=function(t,e){var r=this,n=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+k(this.simplify(e).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var I="TEOF",D="TOP",P="TNUMBER",O="TSTRING",M="TPAREN",F="TBRACKET",N="TCOMMA",U="TNAME",B="TSEMICOLON";function j(t,e,r){this.type=t,this.value=e,this.index=r}function G(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}j.prototype.toString=function(){return this.type+": "+this.value},G.prototype.newToken=function(t,e,r){return new j(t,e,null!=r?r:this.pos)},G.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},G.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},G.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(I,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},G.prototype.isString=function(){var t=!1,e=this.pos,r=this.expression.charAt(e);if("'"===r||'"'===r)for(var n=this.expression.indexOf(r,e+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,"\\"!==this.expression.charAt(n-1)){var i=this.expression.substring(e+1,n);this.current=this.newToken(O,this.unescape(i),e),t=!0;break}n=this.expression.indexOf(r,n+1)}return t},G.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(M,t),this.pos++,!0)},G.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken(F,t),this.pos++,0))},G.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(N,","),this.pos++,!0)},G.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(B,";"),this.pos++,!0)},G.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&"."!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(n in this.consts)return this.current=this.newToken(P,this.consts[n]),this.pos+=n.length,!0}return!1},G.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(D,n),this.pos+=n.length,!0}return!1},G.prototype.isName=function(){for(var t=this.pos,e=t,r=!1;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()){if(e===this.pos&&("$"===n||"_"===n)){"_"===n&&(r=!0);continue}if(e===this.pos||!r||"_"!==n&&(n<"0"||n>"9"))break}else r=!0}if(r){var i=this.expression.substring(t,e);return this.current=this.newToken(U,i),this.pos+=i.length,!0}return!1},G.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var H=/^[0-9a-f]{4}$/i;function K(t,e,r){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==r.allowMemberAccess}G.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var r=t.substring(0,e);e>=0;){var n=t.charAt(++e);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"u":var i=t.substring(e+1,e+5);H.test(i)||this.parseError("Illegal escape sequence: \\u"+i),r+=String.fromCharCode(parseInt(i,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++e;var a=t.indexOf("\\",e);r+=t.substring(e,a<0?t.length:a),e=a}return r},G.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},G.prototype.isRadixInteger=function(){var t,e,r=this.pos;if(r>=this.expression.length-2||"0"!==this.expression.charAt(r))return!1;if(++r,"x"===this.expression.charAt(r))t=16,e=/^[0-9a-f]$/i,++r;else{if("b"!==this.expression.charAt(r))return!1;t=2,e=/^[01]$/i,++r}for(var n=!1,i=r;r<this.expression.length;){var a=this.expression.charAt(r);if(!e.test(a))break;r++,n=!0}return n&&(this.current=this.newToken(P,parseInt(this.expression.substring(i,r),t)),this.pos=r),n},G.prototype.isNumber=function(){for(var t,e=!1,r=this.pos,n=r,i=r,a=!1,o=!1;r<this.expression.length&&((t=this.expression.charAt(r))>="0"&&t<="9"||!a&&"."===t);)"."===t?a=!0:o=!0,r++,e=o;if(e&&(i=r),"e"===t||"E"===t){r++;for(var s=!0,u=!1;r<this.expression.length;){if(t=this.expression.charAt(r),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,s=!1}else s=!1;r++}u||(r=i)}return e?(this.current=this.newToken(P,parseFloat(this.expression.substring(n,r))),this.pos=r):this.pos=i,e},G.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(D,e);else if("∙"===e||"•"===e)this.current=this.newToken(D,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(D,">="),this.pos++):this.current=this.newToken(D,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(D,"<="),this.pos++):this.current=this.newToken(D,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(D,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(D,"=="),this.pos++):this.current=this.newToken(D,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(D,"!="),this.pos++):this.current=this.newToken(D,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},G.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},G.prototype.getCoordinates=function(){var t,e=0,r=-1;do{e++,t=this.pos-r,r=this.expression.indexOf("\n",r+1)}while(r>=0&&r<this.pos);return{line:e,column:t}},G.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},K.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},K.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?R(e,t.value):"function"==typeof e?e(t):t.value===e)},K.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},K.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},K.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},K.prototype.expect=function(t,e){if(!this.accept(t,e)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(e||t))}},K.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(U)||this.accept(D,(function(t){return t.value in e})))t.push(new v(s,this.current.value));else if(this.accept(P))t.push(new v(n,this.current.value));else if(this.accept(O))t.push(new v(n,this.current.value));else if(this.accept(M,"("))this.parseExpression(t),this.expect(M,")");else{if(!this.accept(F,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(F,"]"))t.push(new v(g,0));else{var r=this.parseArrayList(t);t.push(new v(g,r))}}},K.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},K.prototype.pushExpression=function(t,e){for(var r=0,n=e.length;r<n;r++)t.push(e[r])},K.prototype.parseUntilEndStatement=function(t,e){return!!this.accept(B)&&(!this.nextToken||this.nextToken.type===I||this.nextToken.type===M&&")"===this.nextToken.value||e.push(new v(p)),this.nextToken.type!==I&&this.parseExpression(e),t.push(new v(f,e)),!0)},K.prototype.parseArrayList=function(t){for(var e=0;!this.accept(F,"]");)for(this.parseExpression(t),++e;this.accept(N);)this.parseExpression(t),++e;return e},K.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(D,"=");){var e=t.pop(),r=[],n=t.length-1;if(e.type!==l){if(e.type!==s&&e.type!==d)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),t.push(new v(u,e.value)),t.push(new v(f,r)),t.push(y("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,a=e.value+1;i<a;i++){var o=n-i;t[o].type===s&&(t[o]=new v(u,t[o].value))}this.parseVariableAssignmentExpression(r),t.push(new v(f,r)),t.push(new v(c,e.value))}}},K.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(D,"?");){var e=[],r=[];this.parseConditionalExpression(e),this.expect(D,":"),this.parseConditionalExpression(r),t.push(new v(f,e)),t.push(new v(f,r)),t.push(b("?"))}},K.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(D,"or");){var e=[];this.parseAndExpression(e),t.push(new v(f,e)),t.push(y("or"))}},K.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(D,"and");){var e=[];this.parseComparison(e),t.push(new v(f,e)),t.push(y("and"))}};var V=["==","!=","<","<=",">=",">","in"];K.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(D,V);){var e=this.current;this.parseAddSub(t),t.push(y(e.value))}};var q=["+","-","||"];K.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(D,q);){var e=this.current;this.parseTerm(t),t.push(y(e.value))}};var z=["*","/","%"];function W(t,e){return Number(t)+Number(e)}function Y(t,e){return t-e}function X(t,e){return t*e}function $(t,e){return t/e}function Q(t,e){return t%e}function Z(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function J(t,e){return t===e}function tt(t,e){return t!==e}function et(t,e){return t>e}function rt(t,e){return t<e}function nt(t,e){return t>=e}function it(t,e){return t<=e}function at(t,e){return Boolean(t&&e)}function ot(t,e){return Boolean(t||e)}function st(t,e){return R(e,t)}function ut(t){return(Math.exp(t)-Math.exp(-t))/2}function lt(t){return(Math.exp(t)+Math.exp(-t))/2}function ct(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function ft(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function ht(t){return Math.log(t+Math.sqrt(t*t-1))}function dt(t){return Math.log((1+t)/(1-t))/2}function pt(t){return Math.log(t)*Math.LOG10E}function gt(t){return-t}function vt(t){return!t}function mt(t){return t<0?Math.ceil(t):Math.floor(t)}function yt(t){return Math.random()*(t||1)}function bt(t){return Tt(t+1)}K.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(D,z);){var e=this.current;this.parseFactor(t),t.push(y(e.value))}},K.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(D,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===M&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===B||this.nextToken.type===N||this.nextToken.type===I||this.nextToken.type===M&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var r=this.current;this.parseFactor(t),t.push(m(r.value))}else this.parseExponential(t)},K.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(D,"^");)this.parseFactor(t),t.push(y("^"))},K.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(D,"!");)t.push(m("!"))},K.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(D,(function(t){return t.value in e}))){var r=this.current;this.parseAtom(t),t.push(m(r.value))}else for(this.parseMemberExpression(t);this.accept(M,"(");)if(this.accept(M,")"))t.push(new v(l,0));else{var n=this.parseArgumentList(t);t.push(new v(l,n))}},K.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(M,")");)for(this.parseExpression(t),++e;this.accept(N);)this.parseExpression(t),++e;return e},K.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(D,".")||this.accept(F,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(U),t.push(new v(d,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(F,"]"),t.push(y("["))}}};var Et=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Tt(t){var e,r;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var n=t-2,i=t-1;n>1;)i*=n,n--;return 0===i&&(i=1),i}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Tt(1-t));if(t>=171.35)return 1/0;if(t>85){var a=t*t,o=a*t,s=o*t,u=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*a)-139/(51840*o)-571/(2488320*s)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,r=Et[0];for(var l=1;l<Et.length;++l)r+=Et[l]/(t+l);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*r}function wt(t){return Array.isArray(t)?t.length:String(t).length}function St(){for(var t=0,e=0,r=0;r<arguments.length;r++){var n,i=Math.abs(arguments[r]);e<i?(t=t*(n=e/i)*n+1,e=i):t+=i>0?(n=i/e)*n:i}return e===1/0?1/0:e*Math.sqrt(t)}function At(t,e,r){return t?e:r}function _t(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function kt(t,e,r){return r&&(r[t]=e),e}function Lt(t,e){return t[0|e]}function Rt(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function xt(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function Ct(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,r){return t(e,r)}))}function It(t,e,r){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce((function(e,r,n){return t(e,r,n)}),e)}function Dt(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,r){return t(e,r)}))}function Pt(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function Ot(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function Mt(t){return(t>0)-(t<0)||+t}var Ft=1/3;function Nt(t){return t<0?-Math.pow(-t,Ft):Math.pow(t,Ft)}function Ut(t){return Math.exp(t)-1}function Bt(t){return Math.log(1+t)}function jt(t){return Math.log(t)/Math.LN2}function Gt(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||ut,cosh:Math.cosh||lt,tanh:Math.tanh||ct,asinh:Math.asinh||ft,acosh:Math.acosh||ht,atanh:Math.atanh||dt,sqrt:Math.sqrt,cbrt:Math.cbrt||Nt,log:Math.log,log2:Math.log2||jt,ln:Math.log,lg:Math.log10||pt,log10:Math.log10||pt,expm1:Math.expm1||Ut,log1p:Math.log1p||Bt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||mt,"-":gt,"+":Number,exp:Math.exp,not:vt,length:wt,"!":bt,sign:Math.sign||Mt},this.binaryOps={"+":W,"-":Y,"*":X,"/":$,"%":Q,"^":Math.pow,"||":Z,"==":J,"!=":tt,">":et,"<":rt,">=":nt,"<=":it,and:at,or:ot,in:st,"=":kt,"[":Lt},this.ternaryOps={"?":At},this.functions={random:yt,fac:bt,min:xt,max:Rt,hypot:Math.hypot||St,pyt:Math.hypot||St,pow:Math.pow,atan2:Math.atan2,if:At,gamma:Tt,roundTo:_t,map:Ct,fold:It,filter:Dt,indexOf:Pt,join:Ot},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Gt.prototype.parse=function(t){var e=[],r=new K(this,new G(this,t),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(e),r.expect(I,"EOF"),new C(e,this)},Gt.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Ht=new Gt;Gt.parse=function(t){return Ht.parse(t)},Gt.evaluate=function(t,e){return Ht.parse(t).evaluate(e)};var Kt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Gt.prototype.isOperatorEnabled=function(t){var e=function(t){return Kt.hasOwnProperty(t)?Kt[t]:t}(t),r=this.options.operators||{};return!(e in r)||!!r[e]};var Vt={Parser:Gt,Expression:C};e.default=Vt},5957:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){var e="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)},o(t)}function s(t,e,r){return s=u()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&l(i,r.prototype),i},s.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}r.r(e),r.d(e,{HTTPError:function(){return f},TimeoutError:function(){return E},default:function(){return bt}});var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(s,t);var e,r,n,o=(e=s,r=u(),function(){var t,n=c(e);if(r){var a=c(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return i(this,t)});function s(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=t.status||0===t.status?t.status:"",u=t.statusText||"",l="".concat(i," ").concat(u).trim(),c=l?"status code ".concat(l):"an unknown error";return n=o.call(this,"Request failed with ".concat(c)),Object.defineProperty(a(n),"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a(n),"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a(n),"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.name="HTTPError",n.response=t,n.request=e,n.options=r,n}return n=s,Object.defineProperty(n,"prototype",{writable:!1}),n}(o(Error));function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return v(t,arguments,b(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,t)},g(t)}function v(t,e,r){return v=m()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&y(i,r.prototype),i},v.apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(a,t);var e,r,n,i=(e=a,r=m(),function(){var t,n=b(e);if(r){var i=b(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,"Request timed out"),Object.defineProperty(p(e),"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.name="TimeoutError",e.request=t,e}return n=a,Object.defineProperty(n,"prototype",{writable:!1}),n}(g(Error));function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}var w=function(t){return null!==t&&"object"===T(t)};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===S(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||C(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||C(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=C(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function C(t,e){if(t){if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(t,e):void 0}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D,P,O=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var a=i[n];if((!w(a)||Array.isArray(a))&&void 0!==a)throw new TypeError("The `options` argument must be an object")}return F.apply(void 0,[{}].concat(e))},M=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new globalThis.Headers(e),i=r instanceof globalThis.Headers,a=new globalThis.Headers(r),o=x(a.entries());try{for(o.s();!(t=o.n()).done;){var s=R(t.value,2),u=s[0],l=s[1];i&&"undefined"===l||void 0===l?n.delete(u):n.set(u,l)}}catch(t){o.e(t)}finally{o.f()}return n},F=function t(){for(var e={},r={},n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var o=0,s=i;o<s.length;o++){var u=s[o];if(Array.isArray(u))Array.isArray(e)||(e=[]),e=[].concat(L(e),L(u));else if(w(u)){for(var l=0,c=Object.entries(u);l<c.length;l++){var f=R(c[l],2),h=f[0],d=f[1];w(d)&&h in e&&(d=t(e[h],d)),e=_(_({},e),{},k({},h,d))}w(u.headers)&&(r=M(r,u.headers),e.headers=r)}}return e},N=(D=!1,P=!1,"function"==typeof globalThis.ReadableStream&&(P=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return D=!0,"half"}}).headers.has("Content-Type")),D&&!P),U="function"==typeof globalThis.AbortController,B="function"==typeof globalThis.FormData,j=["get","post","put","patch","head","delete"],G={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},H=2147483647,K=Symbol("stop");function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function W(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===V(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Y=function(t){return j.includes(t)?t.toUpperCase():t},X=[413,429,503],$={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:X,maxRetryAfter:Number.POSITIVE_INFINITY},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof t)return z(z({},$),{},{limit:t});if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return z(z(z({},$),t),{},{afterStatusCodes:X})};function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function J(){J=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var a=e&&e.prototype instanceof h?e:h,o=Object.create(a.prototype),s=new _(i||[]);return n(o,"_invoke",{value:T(t,r,s)}),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var g={};u(g,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(k([])));m&&m!==e&&r.call(m,a)&&(g=m);var y=p.prototype=h.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function i(n,a,o,s){var u=c(t[n],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Z(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return i("throw",t,o,s)}))}s(u.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function T(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=w(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(E.prototype),u(E.prototype,o,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new E(l(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(y),u(y,s,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function tt(t,e,r,n,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){tt(a,n,i,o,s,"next",t)}function s(t){tt(a,n,i,o,s,"throw",t)}o(void 0)}))}}var rt=function(){var t=et(J().mark((function t(e,r,n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var a=setTimeout((function(){r&&r.abort(),i(new E(e))}),n.timeout);n.fetch(e).then(t).catch(i).then((function(){clearTimeout(a)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),nt=function(){var t=et(J().mark((function t(e){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ot(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function ot(t,e){if(t){if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(t,e):void 0}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ut(){ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var a=e&&e.prototype instanceof h?e:h,o=Object.create(a.prototype),s=new _(i||[]);return n(o,"_invoke",{value:T(t,r,s)}),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var g={};u(g,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(k([])));m&&m!==e&&r.call(m,a)&&(g=m);var y=p.prototype=h.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function i(n,a,o,s){var u=c(t[n],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==it(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return i("throw",t,o,s)}))}s(u.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function T(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=w(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(E.prototype),u(E.prototype,o,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new E(l(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(y),u(y,s,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function lt(t,e,r,n,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){lt(a,n,i,o,s,"next",t)}function s(t){lt(a,n,i,o,s,"throw",t)}o(void 0)}))}}function ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(r),!0).forEach((function(e){dt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dt(t,e,r){return(e=vt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vt(n.key),n)}}function vt(t){var e=function(t,e){if("object"!==it(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===it(e)?e:String(e)}var mt=function(){function t(e){var r,n,i,a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(pt(this,t),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e,this._options=ht(ht({credentials:this._input.credentials||"same-origin"},o),{},{headers:M(this._input.headers,o.headers),hooks:F({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},o.hooks),method:Y(null!==(r=o.method)&&void 0!==r?r:this._input.method),prefixUrl:String(o.prefixUrl||""),retry:Q(o.retry),throwHttpErrors:!1!==o.throwHttpErrors,timeout:void 0===o.timeout?1e4:o.timeout,fetch:null!==(n=o.fetch)&&void 0!==n?n:globalThis.fetch.bind(globalThis)}),"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(U&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(function(){a.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),N&&(this.request.duplex="half"),this._options.searchParams){var s="string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString(),u="?"+s,l=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,u);!(B&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(l,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",null!==(i=this._options.headers.get("content-type"))&&void 0!==i?i:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}var e,r,n,i,a;return e=t,r=[{key:"_calculateRetryDelay",value:function(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof E)){if(t instanceof f){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;var e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){var r=Number(e);return Number.isNaN(r)?r=Date.parse(e)-Date.now():r*=1e3,void 0!==this._options.retry.maxRetryAfter&&r>this._options.retry.maxRetryAfter?0:r}if(413===t.response.status)return 0}return.3*Math.pow(2,this._retryCount-1)*1e3}return 0}},{key:"_decorateResponse",value:function(t){var e=this;return this._options.parseJson&&(t.json=ct(ut().mark((function r(){return ut().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e._options,r.next=3,t.text();case 3:return r.t1=r.sent,r.abrupt("return",r.t0.parseJson.call(r.t0,r.t1));case 5:case"end":return r.stop()}}),r)})))),t}},{key:"_retry",value:(a=ct(ut().mark((function t(e){var r,n,i,a;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!(0!==(r=Math.min(this._calculateRetryDelay(t.t0),H))&&this._retryCount>0)){t.next=33;break}return t.next=12,nt(r);case 12:n=at(this._options.hooks.beforeRetry),t.prev=13,n.s();case 15:if((i=n.n()).done){t.next=24;break}return a=i.value,t.next=19,a({request:this.request,options:this._options,error:t.t0,retryCount:this._retryCount});case 19:if(t.sent!==K){t.next=22;break}return t.abrupt("return");case 22:t.next=15;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(13),n.e(t.t1);case 29:return t.prev=29,n.f(),t.finish(29);case 32:return t.abrupt("return",this._retry(e));case 33:throw t.t0;case 34:case"end":return t.stop()}}),t,this,[[0,6],[13,26,29,32]])}))),function(t){return a.apply(this,arguments)})},{key:"_fetch",value:(i=ct(ut().mark((function t(){var e,r,n,i;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=at(this._options.hooks.beforeRequest),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=15;break}return n=r.value,t.next=7,n(this.request,this._options);case 7:if(!((i=t.sent)instanceof Request)){t.next=11;break}return this.request=i,t.abrupt("break",15);case 11:if(!(i instanceof Response)){t.next=13;break}return t.abrupt("return",i);case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),e.e(t.t0);case 20:return t.prev=20,e.f(),t.finish(20);case 23:if(!1!==this._options.timeout){t.next=25;break}return t.abrupt("return",this._options.fetch(this.request.clone()));case 25:return t.abrupt("return",rt(this.request.clone(),this.abortController,this._options));case 26:case"end":return t.stop()}}),t,this,[[1,17,20,23]])}))),function(){return i.apply(this,arguments)})},{key:"_stream",value:function(t,e){var r=Number(t.headers.get("content-length"))||0,n=0;return 204===t.status?(e&&e({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({start:function(i){return ct(ut().mark((function a(){var o,s,u;return ut().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=function(){return(u=ct(ut().mark((function t(){var a,u,l;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.read();case 2:if(a=t.sent,u=a.done,l=a.value,!u){t.next=8;break}return i.close(),t.abrupt("return");case 8:return e&&(n+=l.byteLength,e({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},l)),i.enqueue(l),t.next=12,s();case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(){return u.apply(this,arguments)},o=t.body.getReader(),e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),a.next=6,s();case 6:case"end":return a.stop()}}),a)})))()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}],n=[{key:"create",value:function(e,r){for(var n=new t(e,r),i=function(){var t=ct(ut().mark((function t(){var e,r,i,a,o,s,u,l,c;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n._options.timeout>H)){t.next=2;break}throw new RangeError("The `timeout` option cannot be greater than ".concat(H));case 2:return t.next=4,Promise.resolve();case 4:return t.next=6,n._fetch();case 6:e=t.sent,r=at(n._options.hooks.afterResponse),t.prev=8,r.s();case 10:if((i=r.n()).done){t.next=18;break}return a=i.value,t.next=14,a(n.request,n._options,n._decorateResponse(e.clone()));case 14:(o=t.sent)instanceof globalThis.Response&&(e=o);case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),r.e(t.t0);case 23:return t.prev=23,r.f(),t.finish(23);case 26:if(n._decorateResponse(e),e.ok||!n._options.throwHttpErrors){t.next=48;break}s=new f(e,n.request,n._options),u=at(n._options.hooks.beforeError),t.prev=30,u.s();case 32:if((l=u.n()).done){t.next=39;break}return c=l.value,t.next=36,c(s);case 36:s=t.sent;case 37:t.next=32;break;case 39:t.next=44;break;case 41:t.prev=41,t.t1=t.catch(30),u.e(t.t1);case 44:return t.prev=44,u.f(),t.finish(44);case 47:throw s;case 48:if(!n._options.onDownloadProgress){t.next=54;break}if("function"==typeof n._options.onDownloadProgress){t.next=51;break}throw new TypeError("The `onDownloadProgress` option must be a function");case 51:if(N){t.next=53;break}throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");case 53:return t.abrupt("return",n._stream(e.clone(),n._options.onDownloadProgress));case 54:return t.abrupt("return",e);case 55:case"end":return t.stop()}}),t,null,[[8,20,23,26],[30,41,44,47]])})));return function(){return t.apply(this,arguments)}}(),a=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(i):i(),o=function(){var t,i=(2,function(t){if(Array.isArray(t))return t}(t=u[s])||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{for(a=(r=r.call(t)).next,0;!(u=(n=a.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t)||ot(t,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],l=i[1];a[o]=ct(ut().mark((function t(){var e,i;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.request.headers.set("accept",n.request.headers.get("accept")||l),t.next=3,a;case 3:if(e=t.sent,i=e.clone(),"json"!==o){t.next=14;break}if(204!==i.status){t.next=8;break}return t.abrupt("return","");case 8:if(!r.parseJson){t.next=14;break}return t.t0=r,t.next=12,i.text();case 12:return t.t1=t.sent,t.abrupt("return",t.t0.parseJson.call(t.t0,t.t1));case 14:return t.abrupt("return",i[o]());case 15:case"end":return t.stop()}}),t)})))},s=0,u=Object.entries(G);s<u.length;s++)o();return a}}],r&&gt(e.prototype,r),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bt=function t(e){var r,n=function(t,r){return mt.create(t,O(e,r))},i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(t,e):void 0}}(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}(j);try{var a=function(){var t=r.value;n[t]=function(r,n){return mt.create(r,O(e,n,{method:t}))}};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}return n.create=function(e){return t(O(e))},n.extend=function(r){return t(O(e,r))},n.stop=K,n}()}}]);